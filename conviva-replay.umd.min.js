!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).ConvivaReplay={})}(this,function(e){"use strict";function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function n(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function r(e){return function(){var t=this,r=arguments;return new Promise(function(i,o){var a=e.apply(t,r);function s(e){n(a,i,o,s,l,"next",e)}function l(e){n(a,i,o,s,l,"throw",e)}s(void 0)})}}function i(e,t,n){return t=c(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,d()?Reflect.construct(t,n||[],c(e).constructor):t.apply(e,n))}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=I(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function l(e,t,n){return(t=_(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(){return u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},u.apply(null,arguments)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}function d(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(d=function(){return!!e})()}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach(function(t){l(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function m(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function v(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */
var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return y(u,"_invoke",function(n,r,i){var o,s,l,u=0,c=i||[],h=!1,d={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return o=t,s=0,l=e,d.n=n,a}};function f(n,r){for(s=n,l=r,t=0;!h&&u&&!i&&t<c.length;t++){var i,o=c[t],f=d.p,p=o[2];n>3?(i=p===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=f&&((i=n<2&&f<o[1])?(s=0,d.v=r,d.n=o[1]):f<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,d.n=p,s=0))}if(i||n>1)return a;throw h=!0,r}return function(i,c,p){if(u>1)throw TypeError("Generator is already running");for(h&&1===c&&f(c,p),s=c,l=p;(t=s<2?e:l)||!h;){o||(s?s<3?(s>1&&(d.n=-1),f(s,l)):d.n=l:d.v=l);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(h=d.n<0)?l:n.call(r,d))!==a)break}catch(t){o=e,s=1,l=t}finally{u=1}}return{value:t,done:h}}}(n,i,o),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(y(t={},r,function(){return this}),t),h=u.prototype=s.prototype=Object.create(c);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,y(e,i,"GeneratorFunction")),e.prototype=Object.create(h),e}return l.prototype=u,y(h,"constructor",u),y(u,"constructor",l),l.displayName="GeneratorFunction",y(u,i,"GeneratorFunction"),y(h),y(h,i,"Generator"),y(h,r,function(){return this}),y(h,"toString",function(){return"[object Generator]"}),(v=function(){return{w:o,m:d}})()}function y(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}y=function(e,t,n,r){function o(t,n){y(e,t,function(e){return this._invoke(t,n,e)})}t?i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},y(e,t,n,r)}function g(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}throw new TypeError(typeof e+" is not iterable")}function w(e,t){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},w(e,t)}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||I(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t,n,r){var i=u(c(e.prototype),t,n);return"function"==typeof i?function(e){return i.apply(n,e)}:i}function S(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||I(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function I(e,n){if(e){if("string"==typeof e)return t(e,n);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}function x(e){var t="function"==typeof Map?new Map:void 0;return x=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return function(e,t,n){if(d())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var i=new(e.bind.apply(e,r));return n&&w(i,n.prototype),i}(e,arguments,c(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),w(n,e)},x(e)}var E,O,A=["inputs"],R=["inputId"],M=["inputs"],T=["inputId"],N=["type"],L=Object.defineProperty,D=function(e,t,n){return function(e,t,n){return t in e?L(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!==C(t)?t+"":t,n)},P=Object.defineProperty,F=function(e,t,n){return function(e,t,n){return t in e?P(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!==C(t)?t+"":t,n)},z=((O=z||{})[O.Document=0]="Document",O[O.DocumentType=1]="DocumentType",O[O.Element=2]="Element",O[O.Text=3]="Text",O[O.CDATA=4]="CDATA",O[O.Comment=5]="Comment",O),U={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},j={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},B={};function Z(e){if(B[e])return B[e];var t=globalThis[e],n=t.prototype,r=e in U?U[e]:void 0,i=Boolean(r&&r.every(function(e){var t,r;return Boolean(null==(r=null==(t=Object.getOwnPropertyDescriptor(n,e))?void 0:t.get)?void 0:r.toString().includes("[native code]"))})),o=e in j?j[e]:void 0,a=Boolean(o&&o.every(function(e){var t;return"function"==typeof n[e]&&(null==(t=n[e])?void 0:t.toString().includes("[native code]"))}));if(i&&a&&!globalThis.Zone)return B[e]=t.prototype,t.prototype;try{var s=document.createElement("iframe");document.body.appendChild(s);var l=s.contentWindow;if(!l)return t.prototype;var u=l[e].prototype;return document.body.removeChild(s),u?B[e]=u:n}catch(e){return n}}var G={};function V(e,t,n){var r,i="".concat(e,".").concat(String(n));if(G[i])return G[i].call(t);var o=Z(e),a=null==(r=Object.getOwnPropertyDescriptor(o,n))?void 0:r.get;return a?(G[i]=a,a.call(t)):t[n]}var W={};function Y(e,t,n){var r="".concat(e,".").concat(String(n));if(W[r])return W[r].bind(t);var i=Z(e)[n];return"function"!=typeof i?t[n]:(W[r]=i,i.bind(t))}var H={childNodes:function(e){return V("Node",e,"childNodes")},parentNode:function(e){return V("Node",e,"parentNode")},parentElement:function(e){return V("Node",e,"parentElement")},textContent:function(e){return V("Node",e,"textContent")},contains:function(e,t){return Y("Node",e,"contains")(t)},getRootNode:function(e){return Y("Node",e,"getRootNode")()},host:function(e){return e&&"host"in e?V("ShadowRoot",e,"host"):null},styleSheets:function(e){return e.styleSheets},shadowRoot:function(e){return e&&"shadowRoot"in e?V("Element",e,"shadowRoot"):null},querySelector:function(e,t){return V("Element",e,"querySelector")(t)},querySelectorAll:function(e,t){return V("Element",e,"querySelectorAll")(t)},mutationObserver:function(){return Z("MutationObserver").constructor}};function K(e){return e.nodeType===e.ELEMENT_NODE}function q(e){var t=e&&"host"in e&&"mode"in e&&H.host(e)||null;return Boolean(t&&"shadowRoot"in t&&H.shadowRoot(t)===e)}function X(e){return"[object ShadowRoot]"===Object.prototype.toString.call(e)}function J(e){try{var t=e.rules||e.cssRules;if(!t)return null;var n=e.href;!n&&e.ownerNode&&e.ownerNode.ownerDocument&&(n=e.ownerNode.ownerDocument.location.href);var r=Array.from(t,function(e){return $(e,n)}).join("");return(i=r).includes(" background-clip: text;")&&!i.includes(" -webkit-background-clip: text;")&&(i=i.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),i}catch(e){return null}var i}function $(e,t){if(function(e){return"styleSheet"in e}(e)){var n;try{n=J(e.styleSheet)||function(e){var t=e.cssText;if(t.split('"').length<3)return t;var n=["@import","url(".concat(JSON.stringify(e.href),")")];return""===e.layerName?n.push("layer"):e.layerName&&n.push("layer(".concat(e.layerName,")")),e.supportsText&&n.push("supports(".concat(e.supportsText,")")),e.media.length&&n.push(e.media.mediaText),n.join(" ")+";"}(e)}catch(t){n=e.cssText}return e.styleSheet.href?ue(n,e.styleSheet.href):n}var r,i=e.cssText;return function(e){return"selectorText"in e}(e)&&e.selectorText.includes(":")&&(r=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm,i=i.replace(r,"$1\\$2")),t?ue(i,t):i}var Q=a(function e(){o(this,e),F(this,"idNodeMap",new Map),F(this,"nodeMetaMap",new WeakMap)},[{key:"getId",value:function(e){var t;if(!e)return-1;var n=null==(t=this.getMeta(e))?void 0:t.id;return null!=n?n:-1}},{key:"getNode",value:function(e){return this.idNodeMap.get(e)||null}},{key:"getIds",value:function(){return Array.from(this.idNodeMap.keys())}},{key:"getMeta",value:function(e){return this.nodeMetaMap.get(e)||null}},{key:"removeNodeFromMap",value:function(e){var t=this,n=this.getId(e);this.idNodeMap.delete(n),e.childNodes&&e.childNodes.forEach(function(e){return t.removeNodeFromMap(e)})}},{key:"has",value:function(e){return this.idNodeMap.has(e)}},{key:"hasNode",value:function(e){return this.nodeMetaMap.has(e)}},{key:"add",value:function(e,t){var n=t.id;this.idNodeMap.set(n,e),this.nodeMetaMap.set(e,t)}},{key:"replace",value:function(e,t){var n=this.getNode(e);if(n){var r=this.nodeMetaMap.get(n);r&&this.nodeMetaMap.set(t,r)}this.idNodeMap.set(e,t)}},{key:"reset",value:function(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}]);function ee(e){var t=e.element,n=e.maskInputOptions,r=e.tagName,i=e.type,o=e.value,a=e.maskInputFn,s=o||"",l=i&&te(i);return(n[r.toLowerCase()]||l&&n[l])&&(s=a?a(s,t):"*".repeat(s.length)),s}function te(e){return e.toLowerCase()}var ne="__rrweb_original__";function re(e){var t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?te(t):null}function ie(e,t){var n,r;try{r=new URL(e,null!=t?t:window.location.href)}catch(e){return null}var i=r.pathname.match(/\.([0-9a-z]+)(?:$)/i);return null!==(n=null==i?void 0:i[1])&&void 0!==n?n:null}var oe=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,ae=/^(?:[a-z+]+:)?\/\//i,se=/^www\..*/i,le=/^(data:)([^,]*),(.*)/i;function ue(e,t){return(e||"").replace(oe,function(e,n,r,i,o,a){var l,u=r||o||a,c=n||i||"";if(!u)return e;if(ae.test(u)||se.test(u))return"url(".concat(c).concat(u).concat(c,")");if(le.test(u))return"url(".concat(c).concat(u).concat(c,")");if("/"===u[0])return"url(".concat(c).concat((l=t,(l.indexOf("//")>-1?l.split("/").slice(0,3).join("/"):l.split("/")[0]).split("?")[0]+u)).concat(c,")");var h=t.split("/"),d=u.split("/");h.pop();var f,p=s(d);try{for(p.s();!(f=p.n()).done;){var m=f.value;"."!==m&&(".."===m?h.pop():h.push(m))}}catch(e){p.e(e)}finally{p.f()}return"url(".concat(c).concat(h.join("/")).concat(c,")")})}function ce(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?e.replace(/(\/\*[^*]*\*\/)|[\s;]/g,""):e.replace(/(\/\*[^*]*\*\/)|[\s;]/g,"").replace(/0px/g,"0")}function he(e,t){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Array.from(t.childNodes),i=[],o=0;if(r.length>1&&e&&"string"==typeof e)for(var a=ce(e,n),s=a.length/e.length,l=1;l<r.length;l++)if(r[l].textContent&&"string"==typeof r[l].textContent){for(var u=ce(r[l].textContent,n),c=3;c<u.length&&(u[c].match(/[a-zA-Z0-9]/)||-1!==u.indexOf(u.substring(0,c),1));c++);for(;c<u.length;c++){var h=u.substring(0,c),d=a.split(h),f=-1;if(2===d.length)f=d[0].length;else if(d.length>2&&""===d[0]&&""!==r[l-1].textContent)f=a.indexOf(h,1);else if(1===d.length){if(h=h.substring(0,h.length-1),(d=a.split(h)).length<=1)return i.push(e),i;c=101}else c===u.length-1&&(f=a.indexOf(h));if(d.length>=2&&c>100){var p=r[l-1].textContent;if(p&&"string"==typeof p){var m=ce(p).length;f=a.indexOf(h,m)}-1===f&&(f=d[0].length)}if(-1!==f){for(var v=Math.floor(f/s);v>0&&v<e.length;){if(++o>50*r.length)return i.push(e),i;var y=ce(e.substring(0,v),n);if(y.length===f){i.push(e.substring(0,v)),e=e.substring(v),a=a.substring(f);break}y.length<f?v+=Math.max(1,Math.floor((f-y.length)/s)):v-=Math.max(1,Math.floor((y.length-f)*s))}break}}}return i.push(e),i}(e,t).join("/* rr_split */")}var de,fe,pe=1,me=new RegExp("[^a-z0-9-_:]");function ve(){return pe++}var ye=/^[^ \t\n\r\u000c]+/,ge=/^[, \t\n\r\u000c]+/;var we=new WeakMap;function be(e,t){return t&&""!==t.trim()?Se(e,t):t}function ke(e){return Boolean("svg"===e.tagName||e.ownerSVGElement)}function Se(e,t){var n=we.get(e);if(n||(n=e.createElement("a"),we.set(e,n)),t){if(t.startsWith("blob:")||t.startsWith("data:"))return t}else t="";return n.setAttribute("href",t),n.href}function _e(e,t,n,r){return r?"src"===n||"href"===n&&("use"!==t||"#"!==r[0])||"xlink:href"===n&&"#"!==r[0]?be(e,r):"background"!==n||"table"!==t&&"td"!==t&&"th"!==t?"srcset"===n?function(e,t){if(""===t.trim())return t;var n=0;function r(e){var r,i=e.exec(t.substring(n));return i?(r=i[0],n+=r.length,r):""}for(var i=[];r(ge),!(n>=t.length);){var o=r(ye);if(","===o.slice(-1))o=be(e,o.substring(0,o.length-1)),i.push(o);else{var a="";o=be(e,o);for(var s=!1;;){var l=t.charAt(n);if(""===l){i.push((o+a).trim());break}if(s)")"===l&&(s=!1);else{if(","===l){n+=1,i.push((o+a).trim());break}"("===l&&(s=!0)}a+=l,n+=1}}}return i.join(", ")}(e,r):"style"===n?ue(r,Se(e)):"object"===t&&"data"===n?be(e,r):r:be(e,r):r}function Ce(e,t,n){return("video"===e||"audio"===e)&&"autoplay"===t}function Ie(e,t,n){if(!e)return!1;if(e.nodeType!==e.ELEMENT_NODE)return!!n&&Ie(H.parentNode(e),t,n);for(var r=e.classList.length;r--;){var i=e.classList[r];if(t.test(i))return!0}return!!n&&Ie(H.parentNode(e),t,n)}function xe(e,t,n,r){var i;if(K(e)){if(i=e,!H.childNodes(i).length)return!1}else{if(null===H.parentElement(e))return!1;i=H.parentElement(e)}try{if("string"==typeof t){if(r){if(i.closest(".".concat(t)))return!0}else if(i.classList.contains(t))return!0}else if(Ie(i,t,r))return!0;if(n)if(r){if(i.closest(n))return!0}else if(i.matches(n))return!0}catch(e){}return!1}function Ee(e,t){var n=t.doc,r=t.mirror,i=t.blockClass,o=t.blockSelector,a=t.needsMask,s=t.inlineStylesheet,l=t.maskInputOptions,u=void 0===l?{}:l,c=t.maskTextFn,h=t.maskInputFn,d=t.dataURLOptions,f=void 0===d?{}:d,p=t.inlineImages,m=t.recordCanvas,v=t.keepIframeSrcFn,y=t.newlyAddedElement,g=void 0!==y&&y,w=t.cssCaptured,b=void 0!==w&&w,k=function(e,t){if(!t.hasNode(e))return;var n=t.getId(e);return 1===n?void 0:n}(n,r);switch(e.nodeType){case e.DOCUMENT_NODE:return"CSS1Compat"!==e.compatMode?{type:z.Document,childNodes:[],compatMode:e.compatMode}:{type:z.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:z.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:k};case e.ELEMENT_NODE:return function(e,t){for(var n,r=t.doc,i=t.blockClass,o=t.blockSelector,a=t.inlineStylesheet,s=t.maskInputOptions,l=void 0===s?{}:s,u=t.maskInputFn,c=t.dataURLOptions,h=void 0===c?{}:c,d=t.inlineImages,f=t.recordCanvas,p=t.keepIframeSrcFn,m=t.newlyAddedElement,v=void 0!==m&&m,y=t.rootId,g=function(e,t,n){try{if("string"==typeof t){if(e.classList.contains(t))return!0}else for(var r=e.classList.length;r--;){var i=e.classList[r];if(t.test(i))return!0}if(n)return e.matches(n)}catch(e){}return!1}(e,i,o),w=function(e){if(e instanceof HTMLFormElement)return"form";var t=te(e.tagName);return me.test(t)?"div":t}(e),b={},k=e.attributes.length,S=0;S<k;S++){var _=e.attributes[S];Ce(w,_.name,_.value)||(b[_.name]=_e(r,w,te(_.name),_.value))}if("link"===w&&a){var C=Array.from(r.styleSheets).find(function(t){return t.href===e.href}),I=null;C&&(I=J(C)),I&&(delete b.rel,delete b.href,b._cssText=I)}if("style"===w&&e.sheet){var x=J(e.sheet);x&&(e.childNodes.length>1&&(x=he(x,e)),b._cssText=x)}if("input"===w||"textarea"===w||"select"===w){var E=e.value,O=e.checked;"radio"!==b.type&&"checkbox"!==b.type&&"submit"!==b.type&&"button"!==b.type&&E?b.value=ee({element:e,type:re(e),tagName:w,value:E,maskInputOptions:l,maskInputFn:u}):O&&(b.checked=O)}"option"===w&&(e.selected&&!l.select?b.selected=!0:delete b.selected);"dialog"===w&&e.open&&(b.rr_open_mode=e.matches("dialog:modal")?"modal":"non-modal");if("canvas"===w&&f)if("2d"===e.__context)(function(e){var t=e.getContext("2d");if(!t)return!0;for(var n=0;n<e.width;n+=50)for(var r=0;r<e.height;r+=50){var i=t.getImageData,o=ne in i?i[ne]:i;if(new Uint32Array(o.call(t,n,r,Math.min(50,e.width-n),Math.min(50,e.height-r)).data.buffer).some(function(e){return 0!==e}))return!1}return!0})(e)||(b.rr_dataURL=e.toDataURL(h.type,h.quality));else if(!("__context"in e)){var A=e.toDataURL(h.type,h.quality),R=r.createElement("canvas");R.width=e.width,R.height=e.height,A!==R.toDataURL(h.type,h.quality)&&(b.rr_dataURL=A)}if("img"===w&&d){de||(de=r.createElement("canvas"),fe=de.getContext("2d"));var M=e,T=M.currentSrc||M.getAttribute("src")||"<unknown-src>",N=M.crossOrigin,L=function(){M.removeEventListener("load",L);try{de.width=M.naturalWidth,de.height=M.naturalHeight,fe.drawImage(M,0,0),b.rr_dataURL=de.toDataURL(h.type,h.quality)}catch(e){if("anonymous"!==M.crossOrigin)return M.crossOrigin="anonymous",void(M.complete&&0!==M.naturalWidth?L():M.addEventListener("load",L));console.warn("Cannot inline img src=".concat(T,"! Error: ").concat(e))}"anonymous"===M.crossOrigin&&(N?b.crossOrigin=N:M.removeAttribute("crossorigin"))};M.complete&&0!==M.naturalWidth?L():M.addEventListener("load",L)}if("audio"===w||"video"===w){var D=b;D.rr_mediaState=e.paused?"paused":"played",D.rr_mediaCurrentTime=e.currentTime,D.rr_mediaPlaybackRate=e.playbackRate,D.rr_mediaMuted=e.muted,D.rr_mediaLoop=e.loop,D.rr_mediaVolume=e.volume}v||(e.scrollLeft&&(b.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(b.rr_scrollTop=e.scrollTop));if(g){var P=e.getBoundingClientRect(),F=P.width,U=P.height;b={class:b.class,rr_width:"".concat(F,"px"),rr_height:"".concat(U,"px")}}"iframe"!==w||p(b.src)||(e.contentDocument||(b.rr_src=b.src),delete b.src);try{customElements.get(w)&&(n=!0)}catch(e){}return{type:z.Element,tagName:w,attributes:b,childNodes:[],isSVG:ke(e)||void 0,needBlock:g,rootId:y,isCustom:n}}(e,{doc:n,blockClass:i,blockSelector:o,inlineStylesheet:s,maskInputOptions:u,maskInputFn:h,dataURLOptions:f,inlineImages:p,recordCanvas:m,keepIframeSrcFn:v,newlyAddedElement:g,rootId:k});case e.TEXT_NODE:return function(e,t){var n=t.needsMask,r=t.maskTextFn,i=t.rootId,o=t.cssCaptured,a=H.parentNode(e),s=a&&a.tagName,l="",u="STYLE"===s||void 0,c="SCRIPT"===s||void 0;c?l="SCRIPT_PLACEHOLDER":o||(l=H.textContent(e),u&&l&&(l=ue(l,Se(t.doc))));!u&&!c&&l&&n&&(l=r?r(l,H.parentElement(e)):l.replace(/[\S]/g,"*"));return{type:z.Text,textContent:l||"",rootId:i}}(e,{doc:n,needsMask:a,maskTextFn:c,rootId:k,cssCaptured:b});case e.CDATA_SECTION_NODE:return{type:z.CDATA,textContent:"",rootId:k};case e.COMMENT_NODE:return{type:z.Comment,textContent:H.textContent(e)||"",rootId:k};default:return!1}}function Oe(e){return null==e?"":e.toLowerCase()}function Ae(e,t){var n=t.doc,r=t.mirror,i=t.blockClass,o=t.blockSelector,a=t.maskTextClass,s=t.maskTextSelector,l=t.skipChild,u=void 0!==l&&l,c=t.inlineStylesheet,h=void 0===c||c,d=t.maskInputOptions,f=void 0===d?{}:d,p=t.maskTextFn,m=t.maskInputFn,v=t.slimDOMOptions,y=t.dataURLOptions,g=void 0===y?{}:y,w=t.inlineImages,b=void 0!==w&&w,k=t.recordCanvas,S=void 0!==k&&k,_=t.onSerialize,C=t.onIframeLoad,I=t.iframeLoadTimeout,x=void 0===I?5e3:I,E=t.onStylesheetLoad,O=t.stylesheetLoadTimeout,A=void 0===O?5e3:O,R=t.keepIframeSrcFn,M=void 0===R?function(){return!1}:R,T=t.newlyAddedElement,N=void 0!==T&&T,L=t.cssCaptured,D=void 0!==L&&L,P=t.needsMask,F=t.preserveWhiteSpace,U=void 0===F||F;P||(P=xe(e,a,s,void 0===P));var j,B=Ee(e,{doc:n,mirror:r,blockClass:i,blockSelector:o,needsMask:P,inlineStylesheet:h,maskInputOptions:f,maskTextFn:p,maskInputFn:m,dataURLOptions:g,inlineImages:b,recordCanvas:S,keepIframeSrcFn:M,newlyAddedElement:N,cssCaptured:D});if(!B)return console.warn(e,"not serialized"),null;j=r.hasNode(e)?r.getId(e):function(e,t){if(t.comment&&e.type===z.Comment)return!0;if(e.type===z.Element){if(t.script&&("script"===e.tagName||"link"===e.tagName&&("preload"===e.attributes.rel||"modulepreload"===e.attributes.rel)&&"script"===e.attributes.as||"link"===e.tagName&&"prefetch"===e.attributes.rel&&"string"==typeof e.attributes.href&&"js"===ie(e.attributes.href)))return!0;if(t.headFavicon&&("link"===e.tagName&&"shortcut icon"===e.attributes.rel||"meta"===e.tagName&&(Oe(e.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===Oe(e.attributes.name)||"icon"===Oe(e.attributes.rel)||"apple-touch-icon"===Oe(e.attributes.rel)||"shortcut icon"===Oe(e.attributes.rel))))return!0;if("meta"===e.tagName){if(t.headMetaDescKeywords&&Oe(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(Oe(e.attributes.property).match(/^(og|twitter|fb):/)||Oe(e.attributes.name).match(/^(og|twitter):/)||"pinterest"===Oe(e.attributes.name)))return!0;if(t.headMetaRobots&&("robots"===Oe(e.attributes.name)||"googlebot"===Oe(e.attributes.name)||"bingbot"===Oe(e.attributes.name)))return!0;if(t.headMetaHttpEquiv&&void 0!==e.attributes["http-equiv"])return!0;if(t.headMetaAuthorship&&("author"===Oe(e.attributes.name)||"generator"===Oe(e.attributes.name)||"framework"===Oe(e.attributes.name)||"publisher"===Oe(e.attributes.name)||"progid"===Oe(e.attributes.name)||Oe(e.attributes.property).match(/^article:/)||Oe(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&("google-site-verification"===Oe(e.attributes.name)||"yandex-verification"===Oe(e.attributes.name)||"csrf-token"===Oe(e.attributes.name)||"p:domain_verify"===Oe(e.attributes.name)||"verify-v1"===Oe(e.attributes.name)||"verification"===Oe(e.attributes.name)||"shopify-checkout-api-token"===Oe(e.attributes.name)))return!0}}return!1}(B,v)||!U&&B.type===z.Text&&!B.textContent.replace(/^\s+|\s+$/gm,"").length?-2:ve();var Z=Object.assign(B,{id:j});if(r.add(e,Z),-2===j)return null;_&&_(e);var G=!u;if(Z.type===z.Element){G=G&&!Z.needBlock,delete Z.needBlock;var V=H.shadowRoot(e);V&&X(V)&&(Z.isShadowHost=!0)}if((Z.type===z.Document||Z.type===z.Element)&&G){v.headWhitespace&&Z.type===z.Element&&"head"===Z.tagName&&(U=!1);var W={doc:n,mirror:r,blockClass:i,blockSelector:o,needsMask:P,maskTextClass:a,maskTextSelector:s,skipChild:u,inlineStylesheet:h,maskInputOptions:f,maskTextFn:p,maskInputFn:m,slimDOMOptions:v,dataURLOptions:g,inlineImages:b,recordCanvas:S,preserveWhiteSpace:U,onSerialize:_,onIframeLoad:C,iframeLoadTimeout:x,onStylesheetLoad:E,stylesheetLoadTimeout:A,keepIframeSrcFn:M,cssCaptured:!1};if(Z.type===z.Element&&"textarea"===Z.tagName&&void 0!==Z.attributes.value);else{Z.type===z.Element&&void 0!==Z.attributes._cssText&&"string"==typeof Z.attributes._cssText&&(W.cssCaptured=!0);for(var Y=0,J=Array.from(H.childNodes(e));Y<J.length;Y++){var $=Ae(J[Y],W);$&&Z.childNodes.push($)}}var Q=null;if(K(e)&&(Q=H.shadowRoot(e)))for(var ee=0,te=Array.from(H.childNodes(Q));ee<te.length;ee++){var ne=Ae(te[ee],W);ne&&(X(Q)&&(ne.isShadow=!0),Z.childNodes.push(ne))}}var re=H.parentNode(e);return re&&q(re)&&X(re)&&(Z.isShadow=!0),Z.type===z.Element&&"iframe"===Z.tagName&&function(e,t,n){var r=e.contentWindow;if(r){var i,o=!1;try{i=r.document.readyState}catch(e){return}if("complete"===i){var a="about:blank";if(r.location.href!==a||e.src===a||""===e.src)return setTimeout(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}else{var s=setTimeout(function(){o||(t(),o=!0)},n);e.addEventListener("load",function(){clearTimeout(s),o=!0,t()})}}}(e,function(){var t=e.contentDocument;if(t&&C){var n=Ae(t,{doc:t,mirror:r,blockClass:i,blockSelector:o,needsMask:P,maskTextClass:a,maskTextSelector:s,skipChild:!1,inlineStylesheet:h,maskInputOptions:f,maskTextFn:p,maskInputFn:m,slimDOMOptions:v,dataURLOptions:g,inlineImages:b,recordCanvas:S,preserveWhiteSpace:U,onSerialize:_,onIframeLoad:C,iframeLoadTimeout:x,onStylesheetLoad:E,stylesheetLoadTimeout:A,keepIframeSrcFn:M});n&&C(e,n)}},x),Z.type===z.Element&&"link"===Z.tagName&&"string"==typeof Z.attributes.rel&&("stylesheet"===Z.attributes.rel||"preload"===Z.attributes.rel&&"string"==typeof Z.attributes.href&&"css"===ie(Z.attributes.href))&&function(e,t,n){var r,i=!1;try{r=e.sheet}catch(e){return}if(!r){var o=setTimeout(function(){i||(t(),i=!0)},n);e.addEventListener("load",function(){clearTimeout(o),i=!0,t()})}}(e,function(){if(E){var t=Ae(e,{doc:n,mirror:r,blockClass:i,blockSelector:o,needsMask:P,maskTextClass:a,maskTextSelector:s,skipChild:!1,inlineStylesheet:h,maskInputOptions:f,maskTextFn:p,maskInputFn:m,slimDOMOptions:v,dataURLOptions:g,inlineImages:b,recordCanvas:S,preserveWhiteSpace:U,onSerialize:_,onIframeLoad:C,iframeLoadTimeout:x,onStylesheetLoad:E,stylesheetLoadTimeout:A,keepIframeSrcFn:M});t&&E(e,t)}},A),Z}var Re={exports:{}},Me=String,Te=function(){return{isColorSupported:!1,reset:Me,bold:Me,dim:Me,italic:Me,underline:Me,inverse:Me,hidden:Me,strikethrough:Me,black:Me,red:Me,green:Me,yellow:Me,blue:Me,magenta:Me,cyan:Me,white:Me,gray:Me,bgBlack:Me,bgRed:Me,bgGreen:Me,bgYellow:Me,bgBlue:Me,bgMagenta:Me,bgCyan:Me,bgWhite:Me}};Re.exports=Te(),Re.exports.createColors=Te;var Ne=Re.exports,Le=function(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var n=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})}),n}(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"}))),De=Ne,Pe=Le,Fe=function(e){function t(e,n,r,a,s,l){var u;return o(this,t),(u=i(this,t,[e])).name="CssSyntaxError",u.reason=e,s&&(u.file=s),a&&(u.source=a),l&&(u.plugin=l),void 0!==n&&void 0!==r&&("number"==typeof n?(u.line=n,u.column=r):(u.line=n.line,u.column=n.column,u.endLine=r.line,u.endColumn=r.column)),u.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(u,t),u}return h(t,e),a(t,[{key:"setMessage",value:function(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",void 0!==this.line&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}},{key:"showSourceCode",value:function(e){var t=this;if(!this.source)return"";var n=this.source;null==e&&(e=De.isColorSupported),Pe&&e&&(n=Pe(n));var r,i,o=n.split(/\r?\n/),a=Math.max(this.line-3,0),s=Math.min(this.line+2,o.length),l=String(s).length;if(e){var u=De.createColors(!0),c=u.bold,h=u.gray,d=u.red;r=function(e){return c(d(e))},i=function(e){return h(e)}}else r=i=function(e){return e};return o.slice(a,s).map(function(e,n){var o=a+1+n,s=" "+(" "+o).slice(-l)+" | ";if(o===t.line){var u=i(s.replace(/\d/g," "))+e.slice(0,t.column-1).replace(/[^\t]/g," ");return r(">")+i(s)+e+"\n "+u+r("^")}return" "+i(s)+e}).join("\n")}},{key:"toString",value:function(){var e=this.showSourceCode();return e&&(e="\n\n"+e+"\n"),this.name+": "+this.message+e}}])}(x(Error)),ze=Fe;Fe.default=Fe;var Ue={};Ue.isClean=Symbol("isClean"),Ue.my=Symbol("my");var je={after:"\n",beforeClose:"\n",beforeComment:"\n",beforeDecl:"\n",beforeOpen:" ",beforeRule:"\n",colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};var Be=a(function e(t){o(this,e),this.builder=t},[{key:"atrule",value:function(e,t){var n="@"+e.name,r=e.params?this.rawValue(e,"params"):"";if(void 0!==e.raws.afterName?n+=e.raws.afterName:r&&(n+=" "),e.nodes)this.block(e,n+r);else{var i=(e.raws.between||"")+(t?";":"");this.builder(n+r+i,e)}}},{key:"beforeAfter",value:function(e,t){var n;n="decl"===e.type?this.raw(e,null,"beforeDecl"):"comment"===e.type?this.raw(e,null,"beforeComment"):"before"===t?this.raw(e,null,"beforeRule"):this.raw(e,null,"beforeClose");for(var r=e.parent,i=0;r&&"root"!==r.type;)i+=1,r=r.parent;if(n.includes("\n")){var o=this.raw(e,null,"indent");if(o.length)for(var a=0;a<i;a++)n+=o}return n}},{key:"block",value:function(e,t){var n,r=this.raw(e,"between","beforeOpen");this.builder(t+r+"{",e,"start"),e.nodes&&e.nodes.length?(this.body(e),n=this.raw(e,"after")):n=this.raw(e,"after","emptyBody"),n&&this.builder(n),this.builder("}",e,"end")}},{key:"body",value:function(e){for(var t=e.nodes.length-1;t>0&&"comment"===e.nodes[t].type;)t-=1;for(var n=this.raw(e,"semicolon"),r=0;r<e.nodes.length;r++){var i=e.nodes[r],o=this.raw(i,"before");o&&this.builder(o),this.stringify(i,t!==r||n)}}},{key:"comment",value:function(e){var t=this.raw(e,"left","commentLeft"),n=this.raw(e,"right","commentRight");this.builder("/*"+t+e.text+n+"*/",e)}},{key:"decl",value:function(e,t){var n=this.raw(e,"between","colon"),r=e.prop+n+this.rawValue(e,"value");e.important&&(r+=e.raws.important||" !important"),t&&(r+=";"),this.builder(r,e)}},{key:"document",value:function(e){this.body(e)}},{key:"raw",value:function(e,t,n){var r;if(n||(n=t),t&&void 0!==(r=e.raws[t]))return r;var i=e.parent;if("before"===n){if(!i||"root"===i.type&&i.first===e)return"";if(i&&"document"===i.type)return""}if(!i)return je[n];var o=e.root();if(o.rawCache||(o.rawCache={}),void 0!==o.rawCache[n])return o.rawCache[n];if("before"===n||"after"===n)return this.beforeAfter(e,n);var a,s="raw"+((a=n)[0].toUpperCase()+a.slice(1));return this[s]?r=this[s](o,e):o.walk(function(e){if(void 0!==(r=e.raws[t]))return!1}),void 0===r&&(r=je[n]),o.rawCache[n]=r,r}},{key:"rawBeforeClose",value:function(e){var t;return e.walk(function(e){if(e.nodes&&e.nodes.length>0&&void 0!==e.raws.after)return(t=e.raws.after).includes("\n")&&(t=t.replace(/[^\n]+$/,"")),!1}),t&&(t=t.replace(/\S/g,"")),t}},{key:"rawBeforeComment",value:function(e,t){var n;return e.walkComments(function(e){if(void 0!==e.raws.before)return(n=e.raws.before).includes("\n")&&(n=n.replace(/[^\n]+$/,"")),!1}),void 0===n?n=this.raw(t,null,"beforeDecl"):n&&(n=n.replace(/\S/g,"")),n}},{key:"rawBeforeDecl",value:function(e,t){var n;return e.walkDecls(function(e){if(void 0!==e.raws.before)return(n=e.raws.before).includes("\n")&&(n=n.replace(/[^\n]+$/,"")),!1}),void 0===n?n=this.raw(t,null,"beforeRule"):n&&(n=n.replace(/\S/g,"")),n}},{key:"rawBeforeOpen",value:function(e){var t;return e.walk(function(e){if("decl"!==e.type&&void 0!==(t=e.raws.between))return!1}),t}},{key:"rawBeforeRule",value:function(e){var t;return e.walk(function(n){if(n.nodes&&(n.parent!==e||e.first!==n)&&void 0!==n.raws.before)return(t=n.raws.before).includes("\n")&&(t=t.replace(/[^\n]+$/,"")),!1}),t&&(t=t.replace(/\S/g,"")),t}},{key:"rawColon",value:function(e){var t;return e.walkDecls(function(e){if(void 0!==e.raws.between)return t=e.raws.between.replace(/[^\s:]/g,""),!1}),t}},{key:"rawEmptyBody",value:function(e){var t;return e.walk(function(e){if(e.nodes&&0===e.nodes.length&&void 0!==(t=e.raws.after))return!1}),t}},{key:"rawIndent",value:function(e){return e.raws.indent?e.raws.indent:(e.walk(function(n){var r=n.parent;if(r&&r!==e&&r.parent&&r.parent===e&&void 0!==n.raws.before){var i=n.raws.before.split("\n");return t=(t=i[i.length-1]).replace(/\S/g,""),!1}}),t);var t}},{key:"rawSemicolon",value:function(e){var t;return e.walk(function(e){if(e.nodes&&e.nodes.length&&"decl"===e.last.type&&void 0!==(t=e.raws.semicolon))return!1}),t}},{key:"rawValue",value:function(e,t){var n=e[t],r=e.raws[t];return r&&r.value===n?r.raw:n}},{key:"root",value:function(e){this.body(e),e.raws.after&&this.builder(e.raws.after)}},{key:"rule",value:function(e){this.block(e,this.rawValue(e,"selector")),e.raws.ownSemicolon&&this.builder(e.raws.ownSemicolon,e,"end")}},{key:"stringify",value:function(e,t){if(!this[e.type])throw new Error("Unknown AST node type "+e.type+". Maybe you need to change PostCSS stringifier.");this[e.type](e,t)}}]),Ze=Be;Be.default=Be;var Ge=Ze;function Ve(e,t){new Ge(t).stringify(e)}var We=Ve;Ve.default=Ve;var Ye=Ue.isClean,He=Ue.my,Ke=ze,qe=Ze,Xe=We;function Je(e,t){var n=new e.constructor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&"proxyCache"!==r){var i=e[r],o=C(i);"parent"===r&&"object"===o?t&&(n[r]=t):"source"===r?n[r]=i:Array.isArray(i)?n[r]=i.map(function(e){return Je(e,n)}):("object"===o&&null!==i&&(i=Je(i)),n[r]=i)}return n}var $e=a(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var n in o(this,e),this.raws={},this[Ye]=!1,this[He]=!0,t)if("nodes"===n){this.nodes=[];var r,i=s(t[n]);try{for(i.s();!(r=i.n()).done;){var a=r.value;"function"==typeof a.clone?this.append(a.clone()):this.append(a)}}catch(e){i.e(e)}finally{i.f()}}else this[n]=t[n]},[{key:"addToError",value:function(e){if(e.postcssNode=this,e.stack&&this.source&&/\n\s{4}at /.test(e.stack)){var t=this.source;e.stack=e.stack.replace(/\n\s{4}at /,"$&".concat(t.input.from,":").concat(t.start.line,":").concat(t.start.column,"$&"))}return e}},{key:"after",value:function(e){return this.parent.insertAfter(this,e),this}},{key:"assign",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var t in e)this[t]=e[t];return this}},{key:"before",value:function(e){return this.parent.insertBefore(this,e),this}},{key:"cleanRaws",value:function(e){delete this.raws.before,delete this.raws.after,e||delete this.raws.between}},{key:"clone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Je(this);for(var n in e)t[n]=e[n];return t}},{key:"cloneAfter",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.clone(e);return this.parent.insertAfter(this,t),t}},{key:"cloneBefore",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.clone(e);return this.parent.insertBefore(this,t),t}},{key:"error",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.source){var n=this.rangeBy(t),r=n.end,i=n.start;return this.source.input.error(e,{column:i.column,line:i.line},{column:r.column,line:r.line},t)}return new Ke(e)}},{key:"getProxyProcessor",value:function(){return{get:function(e,t){return"proxyOf"===t?e:"root"===t?function(){return e.root().toProxy()}:e[t]},set:function(e,t,n){return e[t]===n||(e[t]=n,"prop"!==t&&"value"!==t&&"name"!==t&&"params"!==t&&"important"!==t&&"text"!==t||e.markDirty()),!0}}}},{key:"markDirty",value:function(){if(this[Ye]){this[Ye]=!1;for(var e=this;e=e.parent;)e[Ye]=!1}}},{key:"next",value:function(){if(this.parent){var e=this.parent.index(this);return this.parent.nodes[e+1]}}},{key:"positionBy",value:function(e,t){var n=this.source.start;if(e.index)n=this.positionInside(e.index,t);else if(e.word){var r=(t=this.toString()).indexOf(e.word);-1!==r&&(n=this.positionInside(r,t))}return n}},{key:"positionInside",value:function(e,t){for(var n=t||this.toString(),r=this.source.start.column,i=this.source.start.line,o=0;o<e;o++)"\n"===n[o]?(r=1,i+=1):r+=1;return{column:r,line:i}}},{key:"prev",value:function(){if(this.parent){var e=this.parent.index(this);return this.parent.nodes[e-1]}}},{key:"rangeBy",value:function(e){var t={column:this.source.start.column,line:this.source.start.line},n=this.source.end?{column:this.source.end.column+1,line:this.source.end.line}:{column:t.column+1,line:t.line};if(e.word){var r=this.toString(),i=r.indexOf(e.word);-1!==i&&(t=this.positionInside(i,r),n=this.positionInside(i+e.word.length,r))}else e.start?t={column:e.start.column,line:e.start.line}:e.index&&(t=this.positionInside(e.index)),e.end?n={column:e.end.column,line:e.end.line}:"number"==typeof e.endIndex?n=this.positionInside(e.endIndex):e.index&&(n=this.positionInside(e.index+1));return(n.line<t.line||n.line===t.line&&n.column<=t.column)&&(n={column:t.column+1,line:t.line}),{end:n,start:t}}},{key:"raw",value:function(e,t){return(new qe).raw(this,e,t)}},{key:"remove",value:function(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}},{key:"replaceWith",value:function(){if(this.parent){for(var e=this,t=!1,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];for(var o=0,a=r;o<a.length;o++){var s=a[o];s===this?t=!0:t?(this.parent.insertAfter(e,s),e=s):this.parent.insertBefore(e,s)}t||this.remove()}return this}},{key:"root",value:function(){for(var e=this;e.parent&&"document"!==e.parent.type;)e=e.parent;return e}},{key:"toJSON",value:function(e,t){var n={},r=null==t;t=t||new Map;var i=0;for(var o in this)if(Object.prototype.hasOwnProperty.call(this,o)&&"parent"!==o&&"proxyCache"!==o){var a=this[o];if(Array.isArray(a))n[o]=a.map(function(e){return"object"===C(e)&&e.toJSON?e.toJSON(null,t):e});else if("object"===C(a)&&a.toJSON)n[o]=a.toJSON(null,t);else if("source"===o){var s=t.get(a.input);null==s&&(s=i,t.set(a.input,i),i++),n[o]={end:a.end,inputId:s,start:a.start}}else n[o]=a}return r&&(n.inputs=S(t.keys()).map(function(e){return e.toJSON()})),n}},{key:"toProxy",value:function(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe;e.stringify&&(e=e.stringify);var t="";return e(this,function(e){t+=e}),t}},{key:"warn",value:function(e,t,n){var r={node:this};for(var i in n)r[i]=n[i];return e.warn(t,r)}},{key:"proxyOf",get:function(){return this}}]),Qe=$e;$e.default=$e;var et=function(e){function t(e){var n;return o(this,t),e&&void 0!==e.value&&"string"!=typeof e.value&&(e=p(p({},e),{},{value:String(e.value)})),(n=i(this,t,[e])).type="decl",n}return h(t,e),a(t,[{key:"variable",get:function(){return this.prop.startsWith("--")||"$"===this.prop[0]}}])}(Qe),tt=et;et.default=et;var nt=function(){for(var e="",t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;t--;)e+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return e},rt=Le.SourceMapConsumer,it=Le.SourceMapGenerator,ot=Le.existsSync,at=Le.readFileSync,st=Le.dirname,lt=Le.join;var ut=a(function e(t,n){if(o(this,e),!1!==n.map){this.loadAnnotation(t),this.inline=this.startWith(this.annotation,"data:");var r=n.map?n.map.prev:void 0,i=this.loadMap(n.from,r);!this.mapFile&&n.from&&(this.mapFile=n.from),this.mapFile&&(this.root=st(this.mapFile)),i&&(this.text=i)}},[{key:"consumer",value:function(){return this.consumerCache||(this.consumerCache=new rt(this.text)),this.consumerCache}},{key:"decodeInline",value:function(e){var t;if(/^data:application\/json;charset=utf-?8,/.test(e)||/^data:application\/json,/.test(e))return decodeURIComponent(e.substr(RegExp.lastMatch.length));if(/^data:application\/json;charset=utf-?8;base64,/.test(e)||/^data:application\/json;base64,/.test(e))return t=e.substr(RegExp.lastMatch.length),Buffer?Buffer.from(t,"base64").toString():window.atob(t);var n=e.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+n)}},{key:"getAnnotationURL",value:function(e){return e.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}},{key:"isMap",value:function(e){return"object"===C(e)&&("string"==typeof e.mappings||"string"==typeof e._mappings||Array.isArray(e.sections))}},{key:"loadAnnotation",value:function(e){var t=e.match(/\/\*\s*# sourceMappingURL=/gm);if(t){var n=e.lastIndexOf(t.pop()),r=e.indexOf("*/",n);n>-1&&r>-1&&(this.annotation=this.getAnnotationURL(e.substring(n,r)))}}},{key:"loadFile",value:function(e){if(this.root=st(e),ot(e))return this.mapFile=e,at(e,"utf-8").toString().trim()}},{key:"loadMap",value:function(e,t){if(!1===t)return!1;if(t){if("string"==typeof t)return t;if("function"!=typeof t){if(t instanceof rt)return it.fromSourceMap(t).toString();if(t instanceof it)return t.toString();if(this.isMap(t))return JSON.stringify(t);throw new Error("Unsupported previous source map format: "+t.toString())}var n=t(e);if(n){var r=this.loadFile(n);if(!r)throw new Error("Unable to load previous source map: "+n.toString());return r}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){var i=this.annotation;return e&&(i=lt(st(e),i)),this.loadFile(i)}}}},{key:"startWith",value:function(e,t){return!!e&&e.substr(0,t.length)===t}},{key:"withContent",value:function(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}}]),ct=ut;ut.default=ut;var ht=Le.SourceMapConsumer,dt=Le.SourceMapGenerator,ft=Le.fileURLToPath,pt=Le.pathToFileURL,mt=Le.isAbsolute,vt=Le.resolve,yt=nt,gt=Le,wt=ze,bt=ct,kt=Symbol("fromOffsetCache"),St=Boolean(ht&&dt),_t=Boolean(vt&&mt),Ct=a(function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(o(this,e),null==t||"object"===C(t)&&!t.toString)throw new Error("PostCSS received ".concat(t," instead of CSS string"));if(this.css=t.toString(),"\ufeff"===this.css[0]||"ï¿¾"===this.css[0]?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,n.from&&(!_t||/^\w+:\/\//.test(n.from)||mt(n.from)?this.file=n.from:this.file=vt(n.from)),_t&&St){var r=new bt(this.css,n);if(r.text){this.map=r;var i=r.consumer().file;!this.file&&i&&(this.file=this.mapResolve(i))}}this.file||(this.id="<input css "+yt(6)+">"),this.map&&(this.map.file=this.from)},[{key:"error",value:function(e,t,n){var r,i,o,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(t&&"object"===C(t)){var s=t,l=n;if("number"==typeof s.offset){var u=this.fromOffset(s.offset);t=u.line,n=u.col}else t=s.line,n=s.column;if("number"==typeof l.offset){var c=this.fromOffset(l.offset);i=c.line,o=c.col}else i=l.line,o=l.column}else if(!n){var h=this.fromOffset(t);t=h.line,n=h.col}var d=this.origin(t,n,i,o);return(r=d?new wt(e,void 0===d.endLine?d.line:{column:d.column,line:d.line},void 0===d.endLine?d.column:{column:d.endColumn,line:d.endLine},d.source,d.file,a.plugin):new wt(e,void 0===i?t:{column:n,line:t},void 0===i?n:{column:o,line:i},this.css,this.file,a.plugin)).input={column:n,endColumn:o,endLine:i,line:t,source:this.css},this.file&&(pt&&(r.input.url=pt(this.file).toString()),r.input.file=this.file),r}},{key:"fromOffset",value:function(e){var t;if(this[kt])t=this[kt];else{var n=this.css.split("\n");t=new Array(n.length);for(var r=0,i=0,o=n.length;i<o;i++)t[i]=r,r+=n[i].length+1;this[kt]=t}var a=0;if(e>=t[t.length-1])a=t.length-1;else for(var s,l=t.length-2;a<l;)if(e<t[s=a+(l-a>>1)])l=s-1;else{if(!(e>=t[s+1])){a=s;break}a=s+1}return{col:e-t[a]+1,line:a+1}}},{key:"mapResolve",value:function(e){return/^\w+:\/\//.test(e)?e:vt(this.map.consumer().sourceRoot||this.map.root||".",e)}},{key:"origin",value:function(e,t,n,r){if(!this.map)return!1;var i,o,a=this.map.consumer(),s=a.originalPositionFor({column:t,line:e});if(!s.source)return!1;"number"==typeof n&&(i=a.originalPositionFor({column:r,line:n})),o=mt(s.source)?pt(s.source):new URL(s.source,this.map.consumer().sourceRoot||pt(this.map.mapFile));var l={column:s.column,endColumn:i&&i.column,endLine:i&&i.line,line:s.line,url:o.toString()};if("file:"===o.protocol){if(!ft)throw new Error("file: protocol is not available in this PostCSS build");l.file=ft(o)}var u=a.sourceContentFor(s.source);return u&&(l.source=u),l}},{key:"toJSON",value:function(){for(var e={},t=0,n=["hasBOM","css","file","id"];t<n.length;t++){var r=n[t];null!=this[r]&&(e[r]=this[r])}return this.map&&(e.map=p({},this.map),e.map.consumerCache&&(e.map.consumerCache=void 0)),e}},{key:"from",get:function(){return this.file||this.id}}]),It=Ct;Ct.default=Ct,gt&&gt.registerInput&&gt.registerInput(Ct);var xt=Le.SourceMapConsumer,Et=Le.SourceMapGenerator,Ot=Le.dirname,At=Le.relative,Rt=Le.resolve,Mt=Le.sep,Tt=Le.pathToFileURL,Nt=It,Lt=Boolean(xt&&Et),Dt=Boolean(Ot&&Rt&&At&&Mt),Pt=a(function e(t,n,r,i){o(this,e),this.stringify=t,this.mapOpts=r.map||{},this.root=n,this.opts=r,this.css=i,this.originalCSS=i,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map},[{key:"addAnnotation",value:function(){var e;e=this.isInline()?"data:application/json;base64,"+this.toBase64(this.map.toString()):"string"==typeof this.mapOpts.annotation?this.mapOpts.annotation:"function"==typeof this.mapOpts.annotation?this.mapOpts.annotation(this.opts.to,this.root):this.outputFile()+".map";var t="\n";this.css.includes("\r\n")&&(t="\r\n"),this.css+=t+"/*# sourceMappingURL="+e+" */"}},{key:"applyPrevMaps",value:function(){var e,t=s(this.previous());try{for(t.s();!(e=t.n()).done;){var n=e.value,r=this.toUrl(this.path(n.file)),i=n.root||Ot(n.file),o=void 0;!1===this.mapOpts.sourcesContent?(o=new xt(n.text)).sourcesContent&&(o.sourcesContent=null):o=n.consumer(),this.map.applySourceMap(o,r,this.toUrl(this.path(i)))}}catch(e){t.e(e)}finally{t.f()}}},{key:"clearAnnotation",value:function(){if(!1!==this.mapOpts.annotation)if(this.root)for(var e,t=this.root.nodes.length-1;t>=0;t--)"comment"===(e=this.root.nodes[t]).type&&0===e.text.indexOf("# sourceMappingURL=")&&this.root.removeChild(t);else this.css&&(this.css=this.css.replace(/\n*?\/\*#[\S\s]*?\*\/$/gm,""))}},{key:"generate",value:function(){if(this.clearAnnotation(),Dt&&Lt&&this.isMap())return this.generateMap();var e="";return this.stringify(this.root,function(t){e+=t}),[e]}},{key:"generateMap",value:function(){if(this.root)this.generateString();else if(1===this.previous().length){var e=this.previous()[0].consumer();e.file=this.outputFile(),this.map=Et.fromSourceMap(e,{ignoreInvalidMapping:!0})}else this.map=new Et({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}},{key:"generateString",value:function(){var e=this;this.css="",this.map=new Et({file:this.outputFile(),ignoreInvalidMapping:!0});var t,n,r=1,i=1,o="<no source>",a={generated:{column:0,line:0},original:{column:0,line:0},source:""};this.stringify(this.root,function(s,l,u){if(e.css+=s,l&&"end"!==u&&(a.generated.line=r,a.generated.column=i-1,l.source&&l.source.start?(a.source=e.sourcePath(l),a.original.line=l.source.start.line,a.original.column=l.source.start.column-1,e.map.addMapping(a)):(a.source=o,a.original.line=1,a.original.column=0,e.map.addMapping(a))),(t=s.match(/\n/g))?(r+=t.length,n=s.lastIndexOf("\n"),i=s.length-n):i+=s.length,l&&"start"!==u){var c=l.parent||{raws:{}};("decl"===l.type||"atrule"===l.type&&!l.nodes)&&l===c.last&&!c.raws.semicolon||(l.source&&l.source.end?(a.source=e.sourcePath(l),a.original.line=l.source.end.line,a.original.column=l.source.end.column-1,a.generated.line=r,a.generated.column=i-2,e.map.addMapping(a)):(a.source=o,a.original.line=1,a.original.column=0,a.generated.line=r,a.generated.column=i-1,e.map.addMapping(a)))}})}},{key:"isAnnotation",value:function(){return!!this.isInline()||(void 0!==this.mapOpts.annotation?this.mapOpts.annotation:!this.previous().length||this.previous().some(function(e){return e.annotation}))}},{key:"isInline",value:function(){if(void 0!==this.mapOpts.inline)return this.mapOpts.inline;var e=this.mapOpts.annotation;return(void 0===e||!0===e)&&(!this.previous().length||this.previous().some(function(e){return e.inline}))}},{key:"isMap",value:function(){return void 0!==this.opts.map?!!this.opts.map:this.previous().length>0}},{key:"isSourcesContent",value:function(){return void 0!==this.mapOpts.sourcesContent?this.mapOpts.sourcesContent:!this.previous().length||this.previous().some(function(e){return e.withContent()})}},{key:"outputFile",value:function(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}},{key:"path",value:function(e){if(this.mapOpts.absolute)return e;if(60===e.charCodeAt(0))return e;if(/^\w+:\/\//.test(e))return e;var t=this.memoizedPaths.get(e);if(t)return t;var n=this.opts.to?Ot(this.opts.to):".";"string"==typeof this.mapOpts.annotation&&(n=Ot(Rt(n,this.mapOpts.annotation)));var r=At(n,e);return this.memoizedPaths.set(e,r),r}},{key:"previous",value:function(){var e=this;if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk(function(t){if(t.source&&t.source.input.map){var n=t.source.input.map;e.previousMaps.includes(n)||e.previousMaps.push(n)}});else{var t=new Nt(this.originalCSS,this.opts);t.map&&this.previousMaps.push(t.map)}return this.previousMaps}},{key:"setSourcesContent",value:function(){var e=this,t={};if(this.root)this.root.walk(function(n){if(n.source){var r=n.source.input.from;if(r&&!t[r]){t[r]=!0;var i=e.usesFileUrls?e.toFileUrl(r):e.toUrl(e.path(r));e.map.setSourceContent(i,n.source.input.css)}}});else if(this.css){var n=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(n,this.css)}}},{key:"sourcePath",value:function(e){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(e.source.input.from):this.toUrl(this.path(e.source.input.from))}},{key:"toBase64",value:function(e){return Buffer?Buffer.from(e).toString("base64"):window.btoa(unescape(encodeURIComponent(e)))}},{key:"toFileUrl",value:function(e){var t=this.memoizedFileURLs.get(e);if(t)return t;if(Tt){var n=Tt(e).toString();return this.memoizedFileURLs.set(e,n),n}throw new Error("`map.absolute` option is not available in this PostCSS build")}},{key:"toUrl",value:function(e){var t=this.memoizedURLs.get(e);if(t)return t;"\\"===Mt&&(e=e.replace(/\\/g,"/"));var n=encodeURI(e).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(e,n),n}}]),Ft=function(e){function t(e){var n;return o(this,t),(n=i(this,t,[e])).type="comment",n}return h(t,e),a(t)}(Qe),zt=Ft;Ft.default=Ft;var Ut,jt,Bt,Zt,Gt=Ue.isClean,Vt=Ue.my,Wt=tt,Yt=zt;function Ht(e){return e.map(function(e){return e.nodes&&(e.nodes=Ht(e.nodes)),delete e.source,e})}function Kt(e){if(e[Gt]=!1,e.proxyOf.nodes){var t,n=s(e.proxyOf.nodes);try{for(n.s();!(t=n.n()).done;){Kt(t.value)}}catch(e){n.e(e)}finally{n.f()}}}var qt=function(e){function t(){return o(this,t),i(this,t,arguments)}return h(t,e),a(t,[{key:"append",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0,i=t;r<i.length;r++){var o,a=i[r],l=s(this.normalize(a,this.last));try{for(l.s();!(o=l.n()).done;){var u=o.value;this.proxyOf.nodes.push(u)}}catch(e){l.e(e)}finally{l.f()}}return this.markDirty(),this}},{key:"cleanRaws",value:function(e){if(k(t,"cleanRaws",this)([e]),this.nodes){var n,r=s(this.nodes);try{for(r.s();!(n=r.n()).done;){n.value.cleanRaws(e)}}catch(e){r.e(e)}finally{r.f()}}}},{key:"each",value:function(e){if(this.proxyOf.nodes){for(var t,n,r=this.getIterator();this.indexes[r]<this.proxyOf.nodes.length&&(t=this.indexes[r],!1!==(n=e(this.proxyOf.nodes[t],t)));)this.indexes[r]+=1;return delete this.indexes[r],n}}},{key:"every",value:function(e){return this.nodes.every(e)}},{key:"getIterator",value:function(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;var e=this.lastEach;return this.indexes[e]=0,e}},{key:"getProxyProcessor",value:function(){return{get:function(e,t){return"proxyOf"===t?e:e[t]?"each"===t||"string"==typeof t&&t.startsWith("walk")?function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e[t].apply(e,S(r.map(function(e){return"function"==typeof e?function(t,n){return e(t.toProxy(),n)}:e})))}:"every"===t||"some"===t?function(n){return e[t](function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return n.apply(void 0,[e.toProxy()].concat(r))})}:"root"===t?function(){return e.root().toProxy()}:"nodes"===t?e.nodes.map(function(e){return e.toProxy()}):"first"===t||"last"===t?e[t].toProxy():e[t]:e[t]},set:function(e,t,n){return e[t]===n||(e[t]=n,"name"!==t&&"params"!==t&&"selector"!==t||e.markDirty()),!0}}}},{key:"index",value:function(e){return"number"==typeof e?e:(e.proxyOf&&(e=e.proxyOf),this.proxyOf.nodes.indexOf(e))}},{key:"insertAfter",value:function(e,t){var n=this.index(e),r=this.normalize(t,this.proxyOf.nodes[n]).reverse();n=this.index(e);var i,o,a=s(r);try{for(a.s();!(i=a.n()).done;){var l=i.value;this.proxyOf.nodes.splice(n+1,0,l)}}catch(e){a.e(e)}finally{a.f()}for(var u in this.indexes)n<(o=this.indexes[u])&&(this.indexes[u]=o+r.length);return this.markDirty(),this}},{key:"insertBefore",value:function(e,t){var n=this.index(e),r=0===n&&"prepend",i=this.normalize(t,this.proxyOf.nodes[n],r).reverse();n=this.index(e);var o,a,l=s(i);try{for(l.s();!(o=l.n()).done;){var u=o.value;this.proxyOf.nodes.splice(n,0,u)}}catch(e){l.e(e)}finally{l.f()}for(var c in this.indexes)n<=(a=this.indexes[c])&&(this.indexes[c]=a+i.length);return this.markDirty(),this}},{key:"normalize",value:function(e,n){var r=this;if("string"==typeof e)e=Ht(Ut(e).nodes);else if(void 0===e)e=[];else if(Array.isArray(e)){var i,o=s(e=e.slice(0));try{for(o.s();!(i=o.n()).done;){var a=i.value;a.parent&&a.parent.removeChild(a,"ignore")}}catch(e){o.e(e)}finally{o.f()}}else if("root"===e.type&&"document"!==this.type){var l,u=s(e=e.nodes.slice(0));try{for(u.s();!(l=u.n()).done;){var c=l.value;c.parent&&c.parent.removeChild(c,"ignore")}}catch(e){u.e(e)}finally{u.f()}}else if(e.type)e=[e];else if(e.prop){if(void 0===e.value)throw new Error("Value field is missed in node creation");"string"!=typeof e.value&&(e.value=String(e.value)),e=[new Wt(e)]}else if(e.selector)e=[new jt(e)];else if(e.name)e=[new Bt(e)];else{if(!e.text)throw new Error("Unknown node type in node creation");e=[new Yt(e)]}var h=e.map(function(e){return e[Vt]||t.rebuild(e),(e=e.proxyOf).parent&&e.parent.removeChild(e),e[Gt]&&Kt(e),void 0===e.raws.before&&n&&void 0!==n.raws.before&&(e.raws.before=n.raws.before.replace(/\S/g,"")),e.parent=r.proxyOf,e});return h}},{key:"prepend",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,i=s(t=t.reverse());try{for(i.s();!(r=i.n()).done;){var o,a=r.value,l=this.normalize(a,this.first,"prepend").reverse(),u=s(l);try{for(u.s();!(o=u.n()).done;){var c=o.value;this.proxyOf.nodes.unshift(c)}}catch(e){u.e(e)}finally{u.f()}for(var h in this.indexes)this.indexes[h]=this.indexes[h]+l.length}}catch(e){i.e(e)}finally{i.f()}return this.markDirty(),this}},{key:"push",value:function(e){return e.parent=this,this.proxyOf.nodes.push(e),this}},{key:"removeAll",value:function(){var e,t=s(this.proxyOf.nodes);try{for(t.s();!(e=t.n()).done;){e.value.parent=void 0}}catch(e){t.e(e)}finally{t.f()}return this.proxyOf.nodes=[],this.markDirty(),this}},{key:"removeChild",value:function(e){var t;for(var n in e=this.index(e),this.proxyOf.nodes[e].parent=void 0,this.proxyOf.nodes.splice(e,1),this.indexes)(t=this.indexes[n])>=e&&(this.indexes[n]=t-1);return this.markDirty(),this}},{key:"replaceValues",value:function(e,t,n){return n||(n=t,t={}),this.walkDecls(function(r){t.props&&!t.props.includes(r.prop)||t.fast&&!r.value.includes(t.fast)||(r.value=r.value.replace(e,n))}),this.markDirty(),this}},{key:"some",value:function(e){return this.nodes.some(e)}},{key:"walk",value:function(e){return this.each(function(t,n){var r;try{r=e(t,n)}catch(e){throw t.addToError(e)}return!1!==r&&t.walk&&(r=t.walk(e)),r})}},{key:"walkAtRules",value:function(e,t){return t?e instanceof RegExp?this.walk(function(n,r){if("atrule"===n.type&&e.test(n.name))return t(n,r)}):this.walk(function(n,r){if("atrule"===n.type&&n.name===e)return t(n,r)}):(t=e,this.walk(function(e,n){if("atrule"===e.type)return t(e,n)}))}},{key:"walkComments",value:function(e){return this.walk(function(t,n){if("comment"===t.type)return e(t,n)})}},{key:"walkDecls",value:function(e,t){return t?e instanceof RegExp?this.walk(function(n,r){if("decl"===n.type&&e.test(n.prop))return t(n,r)}):this.walk(function(n,r){if("decl"===n.type&&n.prop===e)return t(n,r)}):(t=e,this.walk(function(e,n){if("decl"===e.type)return t(e,n)}))}},{key:"walkRules",value:function(e,t){return t?e instanceof RegExp?this.walk(function(n,r){if("rule"===n.type&&e.test(n.selector))return t(n,r)}):this.walk(function(n,r){if("rule"===n.type&&n.selector===e)return t(n,r)}):(t=e,this.walk(function(e,n){if("rule"===e.type)return t(e,n)}))}},{key:"first",get:function(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}},{key:"last",get:function(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}}])}(Qe);qt.registerParse=function(e){Ut=e},qt.registerRule=function(e){jt=e},qt.registerAtRule=function(e){Bt=e},qt.registerRoot=function(e){Zt=e};var Xt=qt;qt.default=qt,qt.rebuild=function(e){"atrule"===e.type?Object.setPrototypeOf(e,Bt.prototype):"rule"===e.type?Object.setPrototypeOf(e,jt.prototype):"decl"===e.type?Object.setPrototypeOf(e,Wt.prototype):"comment"===e.type?Object.setPrototypeOf(e,Yt.prototype):"root"===e.type&&Object.setPrototypeOf(e,Zt.prototype),e[Vt]=!0,e.nodes&&e.nodes.forEach(function(e){qt.rebuild(e)})};var Jt,$t,Qt=function(e){function t(e){var n;return o(this,t),(n=i(this,t,[p({type:"document"},e)])).nodes||(n.nodes=[]),n}return h(t,e),a(t,[{key:"toResult",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Jt(new $t,this,e).stringify()}}])}(Xt);Qt.registerLazyResult=function(e){Jt=e},Qt.registerProcessor=function(e){$t=e};var en=Qt;Qt.default=Qt;var tn={},nn=function(e){tn[e]||(tn[e]=!0,"undefined"!=typeof console&&console.warn&&console.warn(e))},rn=a(function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(o(this,e),this.type="warning",this.text=t,n.node&&n.node.source){var r=n.node.rangeBy(n);this.line=r.start.line,this.column=r.start.column,this.endLine=r.end.line,this.endColumn=r.end.column}for(var i in n)this[i]=n[i]},[{key:"toString",value:function(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}}]),on=rn;rn.default=rn;var an=on,sn=a(function e(t,n,r){o(this,e),this.processor=t,this.messages=[],this.root=n,this.opts=r,this.css=void 0,this.map=void 0},[{key:"toString",value:function(){return this.css}},{key:"warn",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(t.plugin=this.lastPlugin.postcssPlugin);var n=new an(e,t);return this.messages.push(n),n}},{key:"warnings",value:function(){return this.messages.filter(function(e){return"warning"===e.type})}},{key:"content",get:function(){return this.css}}]),ln=sn;sn.default=sn;var un="'".charCodeAt(0),cn='"'.charCodeAt(0),hn="\\".charCodeAt(0),dn="/".charCodeAt(0),fn="\n".charCodeAt(0),pn=" ".charCodeAt(0),mn="\f".charCodeAt(0),vn="\t".charCodeAt(0),yn="\r".charCodeAt(0),gn="[".charCodeAt(0),wn="]".charCodeAt(0),bn="(".charCodeAt(0),kn=")".charCodeAt(0),Sn="{".charCodeAt(0),_n="}".charCodeAt(0),Cn=";".charCodeAt(0),In="*".charCodeAt(0),xn=":".charCodeAt(0),En="@".charCodeAt(0),On=/[\t\n\f\r "#'()/;[\\\]{}]/g,An=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,Rn=/.[\r\n"'(/\\]/,Mn=/[\da-f]/i,Tn=Xt,Nn=function(e){function t(e){var n;return o(this,t),(n=i(this,t,[e])).type="atrule",n}return h(t,e),a(t,[{key:"append",value:function(){this.proxyOf.nodes||(this.nodes=[]);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return k(t,"append",this)(n)}},{key:"prepend",value:function(){this.proxyOf.nodes||(this.nodes=[]);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return k(t,"prepend",this)(n)}}])}(Tn),Ln=Nn;Nn.default=Nn,Tn.registerAtRule(Nn);var Dn,Pn,Fn=Xt,zn=function(e){function t(e){var n;return o(this,t),(n=i(this,t,[e])).type="root",n.nodes||(n.nodes=[]),n}return h(t,e),a(t,[{key:"normalize",value:function(e,n,r){var i=k(t,"normalize",this)([e]);if(n)if("prepend"===r)this.nodes.length>1?n.raws.before=this.nodes[1].raws.before:delete n.raws.before;else if(this.first!==n){var o,a=s(i);try{for(a.s();!(o=a.n()).done;){o.value.raws.before=n.raws.before}}catch(e){a.e(e)}finally{a.f()}}return i}},{key:"removeChild",value:function(e,n){var r=this.index(e);return!n&&0===r&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[r].raws.before),k(t,"removeChild",this)([e])}},{key:"toResult",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Dn(new Pn,this,e).stringify()}}])}(Fn);zn.registerLazyResult=function(e){Dn=e},zn.registerProcessor=function(e){Pn=e};var Un=zn;zn.default=zn,Fn.registerRoot(zn);var jn={comma:function(e){return jn.split(e,[","],!0)},space:function(e){return jn.split(e,[" ","\n","\t"])},split:function(e,t,n){var r,i=[],o="",a=!1,l=0,u=!1,c="",h=!1,d=s(e);try{for(d.s();!(r=d.n()).done;){var f=r.value;h?h=!1:"\\"===f?h=!0:u?f===c&&(u=!1):'"'===f||"'"===f?(u=!0,c=f):"("===f?l+=1:")"===f?l>0&&(l-=1):0===l&&t.includes(f)&&(a=!0),a?(""!==o&&i.push(o.trim()),o="",a=!1):o+=f}}catch(e){d.e(e)}finally{d.f()}return(n||""!==o)&&i.push(o.trim()),i}},Bn=jn;jn.default=jn;var Zn=Xt,Gn=Bn,Vn=function(e){function t(e){var n;return o(this,t),(n=i(this,t,[e])).type="rule",n.nodes||(n.nodes=[]),n}return h(t,e),a(t,[{key:"selectors",get:function(){return Gn.comma(this.selector)},set:function(e){var t=this.selector?this.selector.match(/,\s*/):null,n=t?t[0]:","+this.raw("between","beforeOpen");this.selector=e.join(n)}}])}(Zn),Wn=Vn;Vn.default=Vn,Zn.registerRule(Vn);var Yn=tt,Hn=function(e){var t,n,r,i,o,a,s,l,u,c,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=e.css.valueOf(),f=h.ignoreErrors,p=d.length,m=0,v=[],y=[];function g(t){throw e.error("Unclosed "+t,m)}return{back:function(e){y.push(e)},endOfFile:function(){return 0===y.length&&m>=p},nextToken:function(e){if(y.length)return y.pop();if(!(m>=p)){var h=!!e&&e.ignoreUnclosed;switch(t=d.charCodeAt(m)){case fn:case pn:case vn:case yn:case mn:n=m;do{n+=1,t=d.charCodeAt(n)}while(t===pn||t===fn||t===vn||t===yn||t===mn);c=["space",d.slice(m,n)],m=n-1;break;case gn:case wn:case Sn:case _n:case xn:case Cn:case kn:var w=String.fromCharCode(t);c=[w,w,m];break;case bn:if(l=v.length?v.pop()[1]:"",u=d.charCodeAt(m+1),"url"===l&&u!==un&&u!==cn&&u!==pn&&u!==fn&&u!==vn&&u!==mn&&u!==yn){n=m;do{if(a=!1,-1===(n=d.indexOf(")",n+1))){if(f||h){n=m;break}g("bracket")}for(s=n;d.charCodeAt(s-1)===hn;)s-=1,a=!a}while(a);c=["brackets",d.slice(m,n+1),m,n],m=n}else n=d.indexOf(")",m+1),i=d.slice(m,n+1),-1===n||Rn.test(i)?c=["(","(",m]:(c=["brackets",i,m,n],m=n);break;case un:case cn:r=t===un?"'":'"',n=m;do{if(a=!1,-1===(n=d.indexOf(r,n+1))){if(f||h){n=m+1;break}g("string")}for(s=n;d.charCodeAt(s-1)===hn;)s-=1,a=!a}while(a);c=["string",d.slice(m,n+1),m,n],m=n;break;case En:On.lastIndex=m+1,On.test(d),n=0===On.lastIndex?d.length-1:On.lastIndex-2,c=["at-word",d.slice(m,n+1),m,n],m=n;break;case hn:for(n=m,o=!0;d.charCodeAt(n+1)===hn;)n+=1,o=!o;if(t=d.charCodeAt(n+1),o&&t!==dn&&t!==pn&&t!==fn&&t!==vn&&t!==yn&&t!==mn&&(n+=1,Mn.test(d.charAt(n)))){for(;Mn.test(d.charAt(n+1));)n+=1;d.charCodeAt(n+1)===pn&&(n+=1)}c=["word",d.slice(m,n+1),m,n],m=n;break;default:t===dn&&d.charCodeAt(m+1)===In?(0===(n=d.indexOf("*/",m+2)+1)&&(f||h?n=d.length:g("comment")),c=["comment",d.slice(m,n+1),m,n],m=n):(An.lastIndex=m+1,An.test(d),n=0===An.lastIndex?d.length-1:An.lastIndex-2,c=["word",d.slice(m,n+1),m,n],v.push(c),m=n)}return m++,c}},position:function(){return m}}},Kn=zt,qn=Ln,Xn=Un,Jn=Wn,$n={empty:!0,space:!0};var Qn=Xt,er=a(function e(t){o(this,e),this.input=t,this.root=new Xn,this.current=this.root,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:t,start:{column:1,line:1,offset:0}}},[{key:"atrule",value:function(e){var t,n,r,i=new qn;i.name=e[1].slice(1),""===i.name&&this.unnamedAtrule(i,e),this.init(i,e[2]);for(var o=!1,a=!1,s=[],l=[];!this.tokenizer.endOfFile();){if("("===(t=(e=this.tokenizer.nextToken())[0])||"["===t?l.push("("===t?")":"]"):"{"===t&&l.length>0?l.push("}"):t===l[l.length-1]&&l.pop(),0===l.length){if(";"===t){i.source.end=this.getPosition(e[2]),i.source.end.offset++,this.semicolon=!0;break}if("{"===t){a=!0;break}if("}"===t){if(s.length>0){for(n=s[r=s.length-1];n&&"space"===n[0];)n=s[--r];n&&(i.source.end=this.getPosition(n[3]||n[2]),i.source.end.offset++)}this.end(e);break}s.push(e)}else s.push(e);if(this.tokenizer.endOfFile()){o=!0;break}}i.raws.between=this.spacesAndCommentsFromEnd(s),s.length?(i.raws.afterName=this.spacesAndCommentsFromStart(s),this.raw(i,"params",s),o&&(e=s[s.length-1],i.source.end=this.getPosition(e[3]||e[2]),i.source.end.offset++,this.spaces=i.raws.between,i.raws.between="")):(i.raws.afterName="",i.params=""),a&&(i.nodes=[],this.current=i)}},{key:"checkMissedSemicolon",value:function(e){var t=this.colon(e);if(!1!==t){for(var n,r=0,i=t-1;i>=0&&("space"===(n=e[i])[0]||2!==(r+=1));i--);throw this.input.error("Missed semicolon","word"===n[0]?n[3]+1:n[2])}}},{key:"colon",value:function(e){var t,n,r,i,o=0,a=s(e.entries());try{for(a.s();!(i=a.n()).done;){var l=b(i.value,2),u=l[0];if("("===(n=(t=l[1])[0])&&(o+=1),")"===n&&(o-=1),0===o&&":"===n){if(r){if("word"===r[0]&&"progid"===r[1])continue;return u}this.doubleColon(t)}r=t}}catch(e){a.e(e)}finally{a.f()}return!1}},{key:"comment",value:function(e){var t=new Kn;this.init(t,e[2]),t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++;var n=e[1].slice(2,-2);if(/^\s*$/.test(n))t.text="",t.raws.left=n,t.raws.right="";else{var r=n.match(/^(\s*)([^]*\S)(\s*)$/);t.text=r[2],t.raws.left=r[1],t.raws.right=r[3]}}},{key:"createTokenizer",value:function(){this.tokenizer=Hn(this.input)}},{key:"decl",value:function(e,t){var n=new Yn;this.init(n,e[0][2]);var r,i=e[e.length-1];for(";"===i[0]&&(this.semicolon=!0,e.pop()),n.source.end=this.getPosition(i[3]||i[2]||function(e){for(var t=e.length-1;t>=0;t--){var n=e[t],r=n[3]||n[2];if(r)return r}}(e)),n.source.end.offset++;"word"!==e[0][0];)1===e.length&&this.unknownWord(e),n.raws.before+=e.shift()[1];for(n.source.start=this.getPosition(e[0][2]),n.prop="";e.length;){var o=e[0][0];if(":"===o||"space"===o||"comment"===o)break;n.prop+=e.shift()[1]}for(n.raws.between="";e.length;){if(":"===(r=e.shift())[0]){n.raws.between+=r[1];break}"word"===r[0]&&/\w/.test(r[1])&&this.unknownWord([r]),n.raws.between+=r[1]}"_"!==n.prop[0]&&"*"!==n.prop[0]||(n.raws.before+=n.prop[0],n.prop=n.prop.slice(1));for(var a,s=[];e.length&&("space"===(a=e[0][0])||"comment"===a);)s.push(e.shift());this.precheckMissedSemicolon(e);for(var l=e.length-1;l>=0;l--){if("!important"===(r=e[l])[1].toLowerCase()){n.important=!0;var u=this.stringFrom(e,l);" !important"!==(u=this.spacesFromEnd(e)+u)&&(n.raws.important=u);break}if("important"===r[1].toLowerCase()){for(var c=e.slice(0),h="",d=l;d>0;d--){var f=c[d][0];if(0===h.trim().indexOf("!")&&"space"!==f)break;h=c.pop()[1]+h}0===h.trim().indexOf("!")&&(n.important=!0,n.raws.important=h,e=c)}if("space"!==r[0]&&"comment"!==r[0])break}var p=e.some(function(e){return"space"!==e[0]&&"comment"!==e[0]});p&&(n.raws.between+=s.map(function(e){return e[1]}).join(""),s=[]),this.raw(n,"value",s.concat(e),t),n.value.includes(":")&&!t&&this.checkMissedSemicolon(e)}},{key:"doubleColon",value:function(e){throw this.input.error("Double colon",{offset:e[2]},{offset:e[2]+e[1].length})}},{key:"emptyRule",value:function(e){var t=new Jn;this.init(t,e[2]),t.selector="",t.raws.between="",this.current=t}},{key:"end",value:function(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(e)}},{key:"endFile",value:function(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}},{key:"freeSemicolon",value:function(e){if(this.spaces+=e[1],this.current.nodes){var t=this.current.nodes[this.current.nodes.length-1];t&&"rule"===t.type&&!t.raws.ownSemicolon&&(t.raws.ownSemicolon=this.spaces,this.spaces="")}}},{key:"getPosition",value:function(e){var t=this.input.fromOffset(e);return{column:t.col,line:t.line,offset:e}}},{key:"init",value:function(e,t){this.current.push(e),e.source={input:this.input,start:this.getPosition(t)},e.raws.before=this.spaces,this.spaces="","comment"!==e.type&&(this.semicolon=!1)}},{key:"other",value:function(e){for(var t=!1,n=null,r=!1,i=null,o=[],a=e[1].startsWith("--"),s=[],l=e;l;){if(n=l[0],s.push(l),"("===n||"["===n)i||(i=l),o.push("("===n?")":"]");else if(a&&r&&"{"===n)i||(i=l),o.push("}");else if(0===o.length){if(";"===n){if(r)return void this.decl(s,a);break}if("{"===n)return void this.rule(s);if("}"===n){this.tokenizer.back(s.pop()),t=!0;break}":"===n&&(r=!0)}else n===o[o.length-1]&&(o.pop(),0===o.length&&(i=null));l=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(t=!0),o.length>0&&this.unclosedBracket(i),t&&r){if(!a)for(;s.length&&("space"===(l=s[s.length-1][0])||"comment"===l);)this.tokenizer.back(s.pop());this.decl(s,a)}else this.unknownWord(s)}},{key:"parse",value:function(){for(var e;!this.tokenizer.endOfFile();)switch((e=this.tokenizer.nextToken())[0]){case"space":this.spaces+=e[1];break;case";":this.freeSemicolon(e);break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.other(e)}this.endFile()}},{key:"precheckMissedSemicolon",value:function(){}},{key:"raw",value:function(e,t,n,r){for(var i,o,a,s,l=n.length,u="",c=!0,h=0;h<l;h+=1)"space"!==(o=(i=n[h])[0])||h!==l-1||r?"comment"===o?(s=n[h-1]?n[h-1][0]:"empty",a=n[h+1]?n[h+1][0]:"empty",$n[s]||$n[a]||","===u.slice(-1)?c=!1:u+=i[1]):u+=i[1]:c=!1;if(!c){var d=n.reduce(function(e,t){return e+t[1]},"");e.raws[t]={raw:d,value:u}}e[t]=u}},{key:"rule",value:function(e){e.pop();var t=new Jn;this.init(t,e[0][2]),t.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(t,"selector",e),this.current=t}},{key:"spacesAndCommentsFromEnd",value:function(e){for(var t,n="";e.length&&("space"===(t=e[e.length-1][0])||"comment"===t);)n=e.pop()[1]+n;return n}},{key:"spacesAndCommentsFromStart",value:function(e){for(var t,n="";e.length&&("space"===(t=e[0][0])||"comment"===t);)n+=e.shift()[1];return n}},{key:"spacesFromEnd",value:function(e){for(var t="";e.length&&"space"===e[e.length-1][0];)t=e.pop()[1]+t;return t}},{key:"stringFrom",value:function(e,t){for(var n="",r=t;r<e.length;r++)n+=e[r][1];return e.splice(t,e.length-t),n}},{key:"unclosedBlock",value:function(){var e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)}},{key:"unclosedBracket",value:function(e){throw this.input.error("Unclosed bracket",{offset:e[2]},{offset:e[2]+1})}},{key:"unexpectedClose",value:function(e){throw this.input.error("Unexpected }",{offset:e[2]},{offset:e[2]+1})}},{key:"unknownWord",value:function(e){throw this.input.error("Unknown word",{offset:e[0][2]},{offset:e[0][2]+e[0][1].length})}},{key:"unnamedAtrule",value:function(e,t){throw this.input.error("At-rule without name",{offset:t[2]},{offset:t[2]+t[1].length})}}]),tr=It;function nr(e,t){var n=new tr(e,t),r=new er(n);try{r.parse()}catch(e){throw"production"!==process.env.NODE_ENV&&"CssSyntaxError"===e.name&&t&&t.from&&(/\.scss$/i.test(t.from)?e.message+="\nYou tried to parse SCSS with the standard CSS parser; try again with the postcss-scss parser":/\.sass/i.test(t.from)?e.message+="\nYou tried to parse Sass with the standard CSS parser; try again with the postcss-sass parser":/\.less$/i.test(t.from)&&(e.message+="\nYou tried to parse Less with the standard CSS parser; try again with the postcss-less parser")),e}return r.root}var rr=nr;nr.default=nr,Qn.registerParse(nr);var ir=Ue.isClean,or=Ue.my,ar=Pt,sr=We,lr=Xt,ur=en,cr=nn,hr=ln,dr=rr,fr=Un,pr={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},mr={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},vr={Once:!0,postcssPlugin:!0,prepare:!0};function yr(e){return"object"===C(e)&&"function"==typeof e.then}function gr(e){var t=!1,n=pr[e.type];return"decl"===e.type?t=e.prop.toLowerCase():"atrule"===e.type&&(t=e.name.toLowerCase()),t&&e.append?[n,n+"-"+t,0,n+"Exit",n+"Exit-"+t]:t?[n,n+"-"+t,n+"Exit",n+"Exit-"+t]:e.append?[n,0,n+"Exit"]:[n,n+"Exit"]}function wr(e){return{eventIndex:0,events:"document"===e.type?["Document",0,"DocumentExit"]:"root"===e.type?["Root",0,"RootExit"]:gr(e),iterator:0,node:e,visitorIndex:0,visitors:[]}}function br(e){return e[ir]=!1,e.nodes&&e.nodes.forEach(function(e){return br(e)}),e}var kr,Sr={},_r=a(function e(t,n,r){var i,a=this;if(o(this,e),this.stringified=!1,this.processed=!1,"object"!==C(n)||null===n||"root"!==n.type&&"document"!==n.type)if(n instanceof e||n instanceof hr)i=br(n.root),n.map&&(void 0===r.map&&(r.map={}),r.map.inline||(r.map.inline=!1),r.map.prev=n.map);else{var s=dr;r.syntax&&(s=r.syntax.parse),r.parser&&(s=r.parser),s.parse&&(s=s.parse);try{i=s(n,r)}catch(e){this.processed=!0,this.error=e}i&&!i[or]&&lr.rebuild(i)}else i=br(n);this.result=new hr(t,i,r),this.helpers=p(p({},Sr),{},{postcss:Sr,result:this.result}),this.plugins=this.processor.plugins.map(function(e){return"object"===C(e)&&e.prepare?p(p({},e),e.prepare(a.result)):e})},[{key:"async",value:function(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}},{key:"catch",value:function(e){return this.async().catch(e)}},{key:"finally",value:function(e){return this.async().then(e,e)}},{key:"getAsyncError",value:function(){throw new Error("Use process(css).then(cb) to work with async plugins")}},{key:"handleError",value:function(e,t){var n=this.result.lastPlugin;try{if(t&&t.addToError(e),this.error=e,"CssSyntaxError"!==e.name||e.plugin){if(n.postcssVersion&&"production"!==process.env.NODE_ENV){var r=n.postcssPlugin,i=n.postcssVersion,o=this.result.processor.version,a=i.split("."),s=o.split(".");(a[0]!==s[0]||parseInt(a[1])>parseInt(s[1]))&&console.error("Unknown error from PostCSS plugin. Your current PostCSS version is "+o+", but "+r+" uses "+i+". Perhaps this is the source of the error below.")}}else e.plugin=n.postcssPlugin,e.setMessage()}catch(e){console&&console.error&&console.error(e)}return e}},{key:"prepareVisitors",value:function(){var e=this;this.listeners={};var t,n=function(t,n,r){e.listeners[n]||(e.listeners[n]=[]),e.listeners[n].push([t,r])},r=s(this.plugins);try{for(r.s();!(t=r.n()).done;){var i=t.value;if("object"===C(i))for(var o in i){if(!mr[o]&&/^[A-Z]/.test(o))throw new Error("Unknown event ".concat(o," in ").concat(i.postcssPlugin,". Try to update PostCSS (").concat(this.processor.version," now)."));if(!vr[o])if("object"===C(i[o]))for(var a in i[o])n(i,"*"===a?o:o+"-"+a.toLowerCase(),i[o][a]);else"function"==typeof i[o]&&n(i,o,i[o])}}}catch(e){r.e(e)}finally{r.f()}this.hasListener=Object.keys(this.listeners).length>0}},{key:"runAsync",value:(kr=r(v().m(function e(){var t,n,r,i,o,a,l,u,c,h,d,f,p,m=this;return v().w(function(e){for(;;)switch(e.p=e.n){case 0:this.plugin=0,t=0;case 1:if(!(t<this.plugins.length)){e.n=6;break}if(n=this.plugins[t],!yr(r=this.runOnRoot(n))){e.n=5;break}return e.p=2,e.n=3,r;case 3:e.n=5;break;case 4:throw e.p=4,d=e.v,this.handleError(d);case 5:t++,e.n=1;break;case 6:if(this.prepareVisitors(),!this.hasListener){e.n=21;break}i=this.result.root;case 7:if(i[ir]){e.n=14;break}i[ir]=!0,o=[wr(i)];case 8:if(!(o.length>0)){e.n=13;break}if(!yr(a=this.visitTick(o))){e.n=12;break}return e.p=9,e.n=10,a;case 10:e.n=12;break;case 11:throw e.p=11,f=e.v,l=o[o.length-1].node,this.handleError(f,l);case 12:e.n=8;break;case 13:e.n=7;break;case 14:if(!this.listeners.OnceExit){e.n=21;break}u=s(this.listeners.OnceExit),e.p=15,h=v().m(function e(){var t,n,r,o,a;return v().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t=b(c.value,2),n=t[0],r=t[1],m.result.lastPlugin=n,e.p=1,"document"!==i.type){e.n=3;break}return o=i.nodes.map(function(e){return r(e,m.helpers)}),e.n=2,Promise.all(o);case 2:e.n=4;break;case 3:return e.n=4,r(i,m.helpers);case 4:e.n=6;break;case 5:throw e.p=5,a=e.v,m.handleError(a);case 6:return e.a(2)}},e,null,[[1,5]])}),u.s();case 16:if((c=u.n()).done){e.n=18;break}return e.d(g(h()),17);case 17:e.n=16;break;case 18:e.n=20;break;case 19:e.p=19,p=e.v,u.e(p);case 20:return e.p=20,u.f(),e.f(20);case 21:return this.processed=!0,e.a(2,this.stringify())}},e,this,[[15,19,20,21],[9,11],[2,4]])})),function(){return kr.apply(this,arguments)})},{key:"runOnRoot",value:function(e){var t=this;this.result.lastPlugin=e;try{if("object"===C(e)&&e.Once){if("document"===this.result.root.type){var n=this.result.root.nodes.map(function(n){return e.Once(n,t.helpers)});return yr(n[0])?Promise.all(n):n}return e.Once(this.result.root,this.helpers)}if("function"==typeof e)return e(this.result.root,this.result)}catch(e){throw this.handleError(e)}}},{key:"stringify",value:function(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();var e=this.result.opts,t=sr;e.syntax&&(t=e.syntax.stringify),e.stringifier&&(t=e.stringifier),t.stringify&&(t=t.stringify);var n=new ar(t,this.result.root,this.result.opts).generate();return this.result.css=n[0],this.result.map=n[1],this.result}},{key:"sync",value:function(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();var e,t=s(this.plugins);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(yr(this.runOnRoot(n)))throw this.getAsyncError()}}catch(e){t.e(e)}finally{t.f()}if(this.prepareVisitors(),this.hasListener){for(var r=this.result.root;!r[ir];)r[ir]=!0,this.walkSync(r);if(this.listeners.OnceExit)if("document"===r.type){var i,o=s(r.nodes);try{for(o.s();!(i=o.n()).done;){var a=i.value;this.visitSync(this.listeners.OnceExit,a)}}catch(e){o.e(e)}finally{o.f()}}else this.visitSync(this.listeners.OnceExit,r)}return this.result}},{key:"then",value:function(e,t){return"production"!==process.env.NODE_ENV&&("from"in this.opts||cr("Without `from` option PostCSS could generate wrong source map and will not find Browserslist config. Set it to CSS file path or to `undefined` to prevent this warning.")),this.async().then(e,t)}},{key:"toString",value:function(){return this.css}},{key:"visitSync",value:function(e,t){var n,r=s(e);try{for(r.s();!(n=r.n()).done;){var i=b(n.value,2),o=i[0],a=i[1];this.result.lastPlugin=o;var l=void 0;try{l=a(t,this.helpers)}catch(e){throw this.handleError(e,t.proxyOf)}if("root"!==t.type&&"document"!==t.type&&!t.parent)return!0;if(yr(l))throw this.getAsyncError()}}catch(e){r.e(e)}finally{r.f()}}},{key:"visitTick",value:function(e){var t=e[e.length-1],n=t.node,r=t.visitors;if("root"===n.type||"document"===n.type||n.parent){if(r.length>0&&t.visitorIndex<r.length){var i=b(r[t.visitorIndex],2),o=i[0],a=i[1];t.visitorIndex+=1,t.visitorIndex===r.length&&(t.visitors=[],t.visitorIndex=0),this.result.lastPlugin=o;try{return a(n.toProxy(),this.helpers)}catch(e){throw this.handleError(e,n)}}if(0!==t.iterator){for(var s,l=t.iterator;s=n.nodes[n.indexes[l]];)if(n.indexes[l]+=1,!s[ir])return s[ir]=!0,void e.push(wr(s));t.iterator=0,delete n.indexes[l]}for(var u=t.events;t.eventIndex<u.length;){var c=u[t.eventIndex];if(t.eventIndex+=1,0===c)return void(n.nodes&&n.nodes.length&&(n[ir]=!0,t.iterator=n.getIterator()));if(this.listeners[c])return void(t.visitors=this.listeners[c])}e.pop()}else e.pop()}},{key:"walkSync",value:function(e){var t=this;e[ir]=!0;var n,r=s(gr(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0===i)e.nodes&&e.each(function(e){e[ir]||t.walkSync(e)});else{var o=this.listeners[i];if(o&&this.visitSync(o,e.toProxy()))return}}}catch(e){r.e(e)}finally{r.f()}}},{key:"warnings",value:function(){return this.sync().warnings()}},{key:"content",get:function(){return this.stringify().content}},{key:"css",get:function(){return this.stringify().css}},{key:"map",get:function(){return this.stringify().map}},{key:"messages",get:function(){return this.sync().messages}},{key:"opts",get:function(){return this.result.opts}},{key:"processor",get:function(){return this.result.processor}},{key:"root",get:function(){return this.sync().root}},{key:Symbol.toStringTag,get:function(){return"LazyResult"}}]);_r.registerPostcss=function(e){Sr=e};var Cr=_r;_r.default=_r,fr.registerLazyResult(_r),ur.registerLazyResult(_r);var Ir=Pt,xr=We,Er=nn,Or=rr,Ar=ln,Rr=a(function e(t,n,r){var i;o(this,e),n=n.toString(),this.stringified=!1,this._processor=t,this._css=n,this._opts=r,this._map=void 0;var a=xr;this.result=new Ar(this._processor,i,this._opts),this.result.css=n;var s=this;Object.defineProperty(this.result,"root",{get:function(){return s.root}});var l=new Ir(a,i,this._opts,n);if(l.isMap()){var u=b(l.generate(),2),c=u[0],h=u[1];c&&(this.result.css=c),h&&(this.result.map=h)}else l.clearAnnotation(),this.result.css=l.css},[{key:"async",value:function(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}},{key:"catch",value:function(e){return this.async().catch(e)}},{key:"finally",value:function(e){return this.async().then(e,e)}},{key:"sync",value:function(){if(this.error)throw this.error;return this.result}},{key:"then",value:function(e,t){return"production"!==process.env.NODE_ENV&&("from"in this._opts||Er("Without `from` option PostCSS could generate wrong source map and will not find Browserslist config. Set it to CSS file path or to `undefined` to prevent this warning.")),this.async().then(e,t)}},{key:"toString",value:function(){return this._css}},{key:"warnings",value:function(){return[]}},{key:"content",get:function(){return this.result.css}},{key:"css",get:function(){return this.result.css}},{key:"map",get:function(){return this.result.map}},{key:"messages",get:function(){return[]}},{key:"opts",get:function(){return this.result.opts}},{key:"processor",get:function(){return this.result.processor}},{key:"root",get:function(){if(this._root)return this._root;var e,t=Or;try{e=t(this._css,this._opts)}catch(e){this.error=e}if(this.error)throw this.error;return this._root=e,e}},{key:Symbol.toStringTag,get:function(){return"NoWorkResult"}}]),Mr=Rr;Rr.default=Rr;var Tr=Mr,Nr=Cr,Lr=en,Dr=Un,Pr=a(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];o(this,e),this.version="8.4.38",this.plugins=this.normalize(t)},[{key:"normalize",value:function(e){var t,n=[],r=s(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(!0===i.postcss?i=i():i.postcss&&(i=i.postcss),"object"===C(i)&&Array.isArray(i.plugins))n=n.concat(i.plugins);else if("object"===C(i)&&i.postcssPlugin)n.push(i);else if("function"==typeof i)n.push(i);else{if("object"!==C(i)||!i.parse&&!i.stringify)throw new Error(i+" is not a PostCSS plugin");if("production"!==process.env.NODE_ENV)throw new Error("PostCSS syntaxes cannot be used as plugins. Instead, please use one of the syntax/parser/stringifier options as outlined in your PostCSS runner documentation.")}}}catch(e){r.e(e)}finally{r.f()}return n}},{key:"process",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.plugins.length||t.parser||t.stringifier||t.syntax?new Nr(this,e,t):new Tr(this,e,t)}},{key:"use",value:function(e){return this.plugins=this.plugins.concat(this.normalize([e])),this}}]),Fr=Pr;Pr.default=Pr,Dr.registerProcessor(Pr),Lr.registerProcessor(Pr);var zr=tt,Ur=ct,jr=zt,Br=Ln,Zr=It,Gr=Un,Vr=Wn;function Wr(e,t){if(Array.isArray(e))return e.map(function(e){return Wr(e)});var n=e.inputs,r=m(e,A);if(n){t=[];var i,o=s(n);try{for(o.s();!(i=o.n()).done;){var a=p(p({},i.value),{},{__proto__:Zr.prototype});a.map&&(a.map=p(p({},a.map),{},{__proto__:Ur.prototype})),t.push(a)}}catch(e){o.e(e)}finally{o.f()}}if(r.nodes&&(r.nodes=e.nodes.map(function(e){return Wr(e,t)})),r.source){var l=r.source,u=l.inputId,c=m(l,R);r.source=c,null!=u&&(r.source.input=t[u])}if("root"===r.type)return new Gr(r);if("decl"===r.type)return new zr(r);if("rule"===r.type)return new Vr(r);if("comment"===r.type)return new jr(r);if("atrule"===r.type)return new Br(r);throw new Error("Unknown node type: "+e.type)}var Yr=Wr;Wr.default=Wr;var Hr=ze,Kr=tt,qr=Cr,Xr=Xt,Jr=Fr,$r=We,Qr=Yr,ei=en,ti=on,ni=zt,ri=Ln,ii=ln,oi=It,ai=rr,si=Bn,li=Wn,ui=Un,ci=Qe;function hi(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 1===t.length&&Array.isArray(t[0])&&(t=t[0]),new Jr(t)}hi.plugin=function(e,t){var n,r=!1;function i(){console&&console.warn&&!r&&(r=!0,console.warn(e+": postcss.plugin was deprecated. Migration guide:\nhttps://evilmartians.com/chronicles/postcss-8-plugin-migration"),process.env.LANG&&process.env.LANG.startsWith("cn")&&console.warn(e+": éé¢ postcss.plugin è¢«å¼ç¨. è¿ç§»æå:\nhttps://www.w3ctech.com/topic/2226"));var n=t.apply(void 0,arguments);return n.postcssPlugin=e,n.postcssVersion=(new Jr).version,n}return Object.defineProperty(i,"postcss",{get:function(){return n||(n=i()),n}}),i.process=function(e,t,n){return hi([i(n)]).process(e,t)},i},hi.stringify=$r,hi.parse=ai,hi.fromJSON=Qr,hi.list=si,hi.comment=function(e){return new ni(e)},hi.atRule=function(e){return new ri(e)},hi.decl=function(e){return new Kr(e)},hi.rule=function(e){return new li(e)},hi.root=function(e){return new ui(e)},hi.document=function(e){return new ei(e)},hi.CssSyntaxError=Hr,hi.Declaration=Kr,hi.Container=Xr,hi.Processor=Jr,hi.Document=ei,hi.Comment=ni,hi.Warning=ti,hi.AtRule=ri,hi.Result=ii,hi.Input=oi,hi.Rule=li,hi.Root=ui,hi.Node=ci,qr.registerPostcss(hi);var di=hi;hi.default=hi;var fi,pi=(fi=di)&&fi.__esModule&&Object.prototype.hasOwnProperty.call(fi,"default")?fi.default:fi;pi.stringify,pi.fromJSON,pi.plugin,pi.parse,pi.list,pi.document,pi.comment,pi.atRule,pi.rule,pi.decl,pi.root,pi.CssSyntaxError,pi.Declaration,pi.Container,pi.Processor,pi.Document,pi.Comment,pi.Warning,pi.AtRule,pi.Result,pi.Input,pi.Rule,pi.Root,pi.Node;var mi=Object.defineProperty,vi=function(e,t,n){return function(e,t,n){return t in e?mi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!==C(t)?t+"":t,n)};var yi={exports:{}},gi=String,wi=function(){return{isColorSupported:!1,reset:gi,bold:gi,dim:gi,italic:gi,underline:gi,inverse:gi,hidden:gi,strikethrough:gi,black:gi,red:gi,green:gi,yellow:gi,blue:gi,magenta:gi,cyan:gi,white:gi,gray:gi,bgBlack:gi,bgRed:gi,bgGreen:gi,bgYellow:gi,bgBlue:gi,bgMagenta:gi,bgCyan:gi,bgWhite:gi}};yi.exports=wi(),yi.exports.createColors=wi;var bi=yi.exports,ki=function(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var n=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})}),n}(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"}))),Si=bi,_i=ki,Ci=function(e){function t(e,n,r,a,s,l){var u;return o(this,t),(u=i(this,t,[e])).name="CssSyntaxError",u.reason=e,s&&(u.file=s),a&&(u.source=a),l&&(u.plugin=l),void 0!==n&&void 0!==r&&("number"==typeof n?(u.line=n,u.column=r):(u.line=n.line,u.column=n.column,u.endLine=r.line,u.endColumn=r.column)),u.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(u,t),u}return h(t,e),a(t,[{key:"setMessage",value:function(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",void 0!==this.line&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}},{key:"showSourceCode",value:function(e){var t=this;if(!this.source)return"";var n=this.source;null==e&&(e=Si.isColorSupported),_i&&e&&(n=_i(n));var r,i,o=n.split(/\r?\n/),a=Math.max(this.line-3,0),s=Math.min(this.line+2,o.length),l=String(s).length;if(e){var u=Si.createColors(!0),c=u.bold,h=u.gray,d=u.red;r=function(e){return c(d(e))},i=function(e){return h(e)}}else r=i=function(e){return e};return o.slice(a,s).map(function(e,n){var o=a+1+n,s=" "+(" "+o).slice(-l)+" | ";if(o===t.line){var u=i(s.replace(/\d/g," "))+e.slice(0,t.column-1).replace(/[^\t]/g," ");return r(">")+i(s)+e+"\n "+u+r("^")}return" "+i(s)+e}).join("\n")}},{key:"toString",value:function(){var e=this.showSourceCode();return e&&(e="\n\n"+e+"\n"),this.name+": "+this.message+e}}])}(x(Error)),Ii=Ci;Ci.default=Ci;var xi={};xi.isClean=Symbol("isClean"),xi.my=Symbol("my");var Ei={after:"\n",beforeClose:"\n",beforeComment:"\n",beforeDecl:"\n",beforeOpen:" ",beforeRule:"\n",colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};var Oi=a(function e(t){o(this,e),this.builder=t},[{key:"atrule",value:function(e,t){var n="@"+e.name,r=e.params?this.rawValue(e,"params"):"";if(void 0!==e.raws.afterName?n+=e.raws.afterName:r&&(n+=" "),e.nodes)this.block(e,n+r);else{var i=(e.raws.between||"")+(t?";":"");this.builder(n+r+i,e)}}},{key:"beforeAfter",value:function(e,t){var n;n="decl"===e.type?this.raw(e,null,"beforeDecl"):"comment"===e.type?this.raw(e,null,"beforeComment"):"before"===t?this.raw(e,null,"beforeRule"):this.raw(e,null,"beforeClose");for(var r=e.parent,i=0;r&&"root"!==r.type;)i+=1,r=r.parent;if(n.includes("\n")){var o=this.raw(e,null,"indent");if(o.length)for(var a=0;a<i;a++)n+=o}return n}},{key:"block",value:function(e,t){var n,r=this.raw(e,"between","beforeOpen");this.builder(t+r+"{",e,"start"),e.nodes&&e.nodes.length?(this.body(e),n=this.raw(e,"after")):n=this.raw(e,"after","emptyBody"),n&&this.builder(n),this.builder("}",e,"end")}},{key:"body",value:function(e){for(var t=e.nodes.length-1;t>0&&"comment"===e.nodes[t].type;)t-=1;for(var n=this.raw(e,"semicolon"),r=0;r<e.nodes.length;r++){var i=e.nodes[r],o=this.raw(i,"before");o&&this.builder(o),this.stringify(i,t!==r||n)}}},{key:"comment",value:function(e){var t=this.raw(e,"left","commentLeft"),n=this.raw(e,"right","commentRight");this.builder("/*"+t+e.text+n+"*/",e)}},{key:"decl",value:function(e,t){var n=this.raw(e,"between","colon"),r=e.prop+n+this.rawValue(e,"value");e.important&&(r+=e.raws.important||" !important"),t&&(r+=";"),this.builder(r,e)}},{key:"document",value:function(e){this.body(e)}},{key:"raw",value:function(e,t,n){var r;if(n||(n=t),t&&void 0!==(r=e.raws[t]))return r;var i=e.parent;if("before"===n){if(!i||"root"===i.type&&i.first===e)return"";if(i&&"document"===i.type)return""}if(!i)return Ei[n];var o=e.root();if(o.rawCache||(o.rawCache={}),void 0!==o.rawCache[n])return o.rawCache[n];if("before"===n||"after"===n)return this.beforeAfter(e,n);var a,s="raw"+((a=n)[0].toUpperCase()+a.slice(1));return this[s]?r=this[s](o,e):o.walk(function(e){if(void 0!==(r=e.raws[t]))return!1}),void 0===r&&(r=Ei[n]),o.rawCache[n]=r,r}},{key:"rawBeforeClose",value:function(e){var t;return e.walk(function(e){if(e.nodes&&e.nodes.length>0&&void 0!==e.raws.after)return(t=e.raws.after).includes("\n")&&(t=t.replace(/[^\n]+$/,"")),!1}),t&&(t=t.replace(/\S/g,"")),t}},{key:"rawBeforeComment",value:function(e,t){var n;return e.walkComments(function(e){if(void 0!==e.raws.before)return(n=e.raws.before).includes("\n")&&(n=n.replace(/[^\n]+$/,"")),!1}),void 0===n?n=this.raw(t,null,"beforeDecl"):n&&(n=n.replace(/\S/g,"")),n}},{key:"rawBeforeDecl",value:function(e,t){var n;return e.walkDecls(function(e){if(void 0!==e.raws.before)return(n=e.raws.before).includes("\n")&&(n=n.replace(/[^\n]+$/,"")),!1}),void 0===n?n=this.raw(t,null,"beforeRule"):n&&(n=n.replace(/\S/g,"")),n}},{key:"rawBeforeOpen",value:function(e){var t;return e.walk(function(e){if("decl"!==e.type&&void 0!==(t=e.raws.between))return!1}),t}},{key:"rawBeforeRule",value:function(e){var t;return e.walk(function(n){if(n.nodes&&(n.parent!==e||e.first!==n)&&void 0!==n.raws.before)return(t=n.raws.before).includes("\n")&&(t=t.replace(/[^\n]+$/,"")),!1}),t&&(t=t.replace(/\S/g,"")),t}},{key:"rawColon",value:function(e){var t;return e.walkDecls(function(e){if(void 0!==e.raws.between)return t=e.raws.between.replace(/[^\s:]/g,""),!1}),t}},{key:"rawEmptyBody",value:function(e){var t;return e.walk(function(e){if(e.nodes&&0===e.nodes.length&&void 0!==(t=e.raws.after))return!1}),t}},{key:"rawIndent",value:function(e){return e.raws.indent?e.raws.indent:(e.walk(function(n){var r=n.parent;if(r&&r!==e&&r.parent&&r.parent===e&&void 0!==n.raws.before){var i=n.raws.before.split("\n");return t=(t=i[i.length-1]).replace(/\S/g,""),!1}}),t);var t}},{key:"rawSemicolon",value:function(e){var t;return e.walk(function(e){if(e.nodes&&e.nodes.length&&"decl"===e.last.type&&void 0!==(t=e.raws.semicolon))return!1}),t}},{key:"rawValue",value:function(e,t){var n=e[t],r=e.raws[t];return r&&r.value===n?r.raw:n}},{key:"root",value:function(e){this.body(e),e.raws.after&&this.builder(e.raws.after)}},{key:"rule",value:function(e){this.block(e,this.rawValue(e,"selector")),e.raws.ownSemicolon&&this.builder(e.raws.ownSemicolon,e,"end")}},{key:"stringify",value:function(e,t){if(!this[e.type])throw new Error("Unknown AST node type "+e.type+". Maybe you need to change PostCSS stringifier.");this[e.type](e,t)}}]),Ai=Oi;Oi.default=Oi;var Ri=Ai;function Mi(e,t){new Ri(t).stringify(e)}var Ti=Mi;Mi.default=Mi;var Ni=xi.isClean,Li=xi.my,Di=Ii,Pi=Ai,Fi=Ti;function zi(e,t){var n=new e.constructor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&"proxyCache"!==r){var i=e[r],o=C(i);"parent"===r&&"object"===o?t&&(n[r]=t):"source"===r?n[r]=i:Array.isArray(i)?n[r]=i.map(function(e){return zi(e,n)}):("object"===o&&null!==i&&(i=zi(i)),n[r]=i)}return n}var Ui=a(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var n in o(this,e),this.raws={},this[Ni]=!1,this[Li]=!0,t)if("nodes"===n){this.nodes=[];var r,i=s(t[n]);try{for(i.s();!(r=i.n()).done;){var a=r.value;"function"==typeof a.clone?this.append(a.clone()):this.append(a)}}catch(e){i.e(e)}finally{i.f()}}else this[n]=t[n]},[{key:"addToError",value:function(e){if(e.postcssNode=this,e.stack&&this.source&&/\n\s{4}at /.test(e.stack)){var t=this.source;e.stack=e.stack.replace(/\n\s{4}at /,"$&".concat(t.input.from,":").concat(t.start.line,":").concat(t.start.column,"$&"))}return e}},{key:"after",value:function(e){return this.parent.insertAfter(this,e),this}},{key:"assign",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var t in e)this[t]=e[t];return this}},{key:"before",value:function(e){return this.parent.insertBefore(this,e),this}},{key:"cleanRaws",value:function(e){delete this.raws.before,delete this.raws.after,e||delete this.raws.between}},{key:"clone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=zi(this);for(var n in e)t[n]=e[n];return t}},{key:"cloneAfter",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.clone(e);return this.parent.insertAfter(this,t),t}},{key:"cloneBefore",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.clone(e);return this.parent.insertBefore(this,t),t}},{key:"error",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.source){var n=this.rangeBy(t),r=n.end,i=n.start;return this.source.input.error(e,{column:i.column,line:i.line},{column:r.column,line:r.line},t)}return new Di(e)}},{key:"getProxyProcessor",value:function(){return{get:function(e,t){return"proxyOf"===t?e:"root"===t?function(){return e.root().toProxy()}:e[t]},set:function(e,t,n){return e[t]===n||(e[t]=n,"prop"!==t&&"value"!==t&&"name"!==t&&"params"!==t&&"important"!==t&&"text"!==t||e.markDirty()),!0}}}},{key:"markDirty",value:function(){if(this[Ni]){this[Ni]=!1;for(var e=this;e=e.parent;)e[Ni]=!1}}},{key:"next",value:function(){if(this.parent){var e=this.parent.index(this);return this.parent.nodes[e+1]}}},{key:"positionBy",value:function(e,t){var n=this.source.start;if(e.index)n=this.positionInside(e.index,t);else if(e.word){var r=(t=this.toString()).indexOf(e.word);-1!==r&&(n=this.positionInside(r,t))}return n}},{key:"positionInside",value:function(e,t){for(var n=t||this.toString(),r=this.source.start.column,i=this.source.start.line,o=0;o<e;o++)"\n"===n[o]?(r=1,i+=1):r+=1;return{column:r,line:i}}},{key:"prev",value:function(){if(this.parent){var e=this.parent.index(this);return this.parent.nodes[e-1]}}},{key:"rangeBy",value:function(e){var t={column:this.source.start.column,line:this.source.start.line},n=this.source.end?{column:this.source.end.column+1,line:this.source.end.line}:{column:t.column+1,line:t.line};if(e.word){var r=this.toString(),i=r.indexOf(e.word);-1!==i&&(t=this.positionInside(i,r),n=this.positionInside(i+e.word.length,r))}else e.start?t={column:e.start.column,line:e.start.line}:e.index&&(t=this.positionInside(e.index)),e.end?n={column:e.end.column,line:e.end.line}:"number"==typeof e.endIndex?n=this.positionInside(e.endIndex):e.index&&(n=this.positionInside(e.index+1));return(n.line<t.line||n.line===t.line&&n.column<=t.column)&&(n={column:t.column+1,line:t.line}),{end:n,start:t}}},{key:"raw",value:function(e,t){return(new Pi).raw(this,e,t)}},{key:"remove",value:function(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}},{key:"replaceWith",value:function(){if(this.parent){for(var e=this,t=!1,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];for(var o=0,a=r;o<a.length;o++){var s=a[o];s===this?t=!0:t?(this.parent.insertAfter(e,s),e=s):this.parent.insertBefore(e,s)}t||this.remove()}return this}},{key:"root",value:function(){for(var e=this;e.parent&&"document"!==e.parent.type;)e=e.parent;return e}},{key:"toJSON",value:function(e,t){var n={},r=null==t;t=t||new Map;var i=0;for(var o in this)if(Object.prototype.hasOwnProperty.call(this,o)&&"parent"!==o&&"proxyCache"!==o){var a=this[o];if(Array.isArray(a))n[o]=a.map(function(e){return"object"===C(e)&&e.toJSON?e.toJSON(null,t):e});else if("object"===C(a)&&a.toJSON)n[o]=a.toJSON(null,t);else if("source"===o){var s=t.get(a.input);null==s&&(s=i,t.set(a.input,i),i++),n[o]={end:a.end,inputId:s,start:a.start}}else n[o]=a}return r&&(n.inputs=S(t.keys()).map(function(e){return e.toJSON()})),n}},{key:"toProxy",value:function(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fi;e.stringify&&(e=e.stringify);var t="";return e(this,function(e){t+=e}),t}},{key:"warn",value:function(e,t,n){var r={node:this};for(var i in n)r[i]=n[i];return e.warn(t,r)}},{key:"proxyOf",get:function(){return this}}]),ji=Ui;Ui.default=Ui;var Bi=function(e){function t(e){var n;return o(this,t),e&&void 0!==e.value&&"string"!=typeof e.value&&(e=p(p({},e),{},{value:String(e.value)})),(n=i(this,t,[e])).type="decl",n}return h(t,e),a(t,[{key:"variable",get:function(){return this.prop.startsWith("--")||"$"===this.prop[0]}}])}(ji),Zi=Bi;Bi.default=Bi;var Gi=function(){for(var e="",t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;t--;)e+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return e},Vi=ki.SourceMapConsumer,Wi=ki.SourceMapGenerator,Yi=ki.existsSync,Hi=ki.readFileSync,Ki=ki.dirname,qi=ki.join;var Xi=a(function e(t,n){if(o(this,e),!1!==n.map){this.loadAnnotation(t),this.inline=this.startWith(this.annotation,"data:");var r=n.map?n.map.prev:void 0,i=this.loadMap(n.from,r);!this.mapFile&&n.from&&(this.mapFile=n.from),this.mapFile&&(this.root=Ki(this.mapFile)),i&&(this.text=i)}},[{key:"consumer",value:function(){return this.consumerCache||(this.consumerCache=new Vi(this.text)),this.consumerCache}},{key:"decodeInline",value:function(e){var t;if(/^data:application\/json;charset=utf-?8,/.test(e)||/^data:application\/json,/.test(e))return decodeURIComponent(e.substr(RegExp.lastMatch.length));if(/^data:application\/json;charset=utf-?8;base64,/.test(e)||/^data:application\/json;base64,/.test(e))return t=e.substr(RegExp.lastMatch.length),Buffer?Buffer.from(t,"base64").toString():window.atob(t);var n=e.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+n)}},{key:"getAnnotationURL",value:function(e){return e.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}},{key:"isMap",value:function(e){return"object"===C(e)&&("string"==typeof e.mappings||"string"==typeof e._mappings||Array.isArray(e.sections))}},{key:"loadAnnotation",value:function(e){var t=e.match(/\/\*\s*# sourceMappingURL=/gm);if(t){var n=e.lastIndexOf(t.pop()),r=e.indexOf("*/",n);n>-1&&r>-1&&(this.annotation=this.getAnnotationURL(e.substring(n,r)))}}},{key:"loadFile",value:function(e){if(this.root=Ki(e),Yi(e))return this.mapFile=e,Hi(e,"utf-8").toString().trim()}},{key:"loadMap",value:function(e,t){if(!1===t)return!1;if(t){if("string"==typeof t)return t;if("function"!=typeof t){if(t instanceof Vi)return Wi.fromSourceMap(t).toString();if(t instanceof Wi)return t.toString();if(this.isMap(t))return JSON.stringify(t);throw new Error("Unsupported previous source map format: "+t.toString())}var n=t(e);if(n){var r=this.loadFile(n);if(!r)throw new Error("Unable to load previous source map: "+n.toString());return r}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){var i=this.annotation;return e&&(i=qi(Ki(e),i)),this.loadFile(i)}}}},{key:"startWith",value:function(e,t){return!!e&&e.substr(0,t.length)===t}},{key:"withContent",value:function(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}}]),Ji=Xi;Xi.default=Xi;var $i=ki.SourceMapConsumer,Qi=ki.SourceMapGenerator,eo=ki.fileURLToPath,to=ki.pathToFileURL,no=ki.isAbsolute,ro=ki.resolve,io=Gi,oo=ki,ao=Ii,so=Ji,lo=Symbol("fromOffsetCache"),uo=Boolean($i&&Qi),co=Boolean(ro&&no),ho=a(function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(o(this,e),null==t||"object"===C(t)&&!t.toString)throw new Error("PostCSS received ".concat(t," instead of CSS string"));if(this.css=t.toString(),"\ufeff"===this.css[0]||"ï¿¾"===this.css[0]?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,n.from&&(!co||/^\w+:\/\//.test(n.from)||no(n.from)?this.file=n.from:this.file=ro(n.from)),co&&uo){var r=new so(this.css,n);if(r.text){this.map=r;var i=r.consumer().file;!this.file&&i&&(this.file=this.mapResolve(i))}}this.file||(this.id="<input css "+io(6)+">"),this.map&&(this.map.file=this.from)},[{key:"error",value:function(e,t,n){var r,i,o,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(t&&"object"===C(t)){var s=t,l=n;if("number"==typeof s.offset){var u=this.fromOffset(s.offset);t=u.line,n=u.col}else t=s.line,n=s.column;if("number"==typeof l.offset){var c=this.fromOffset(l.offset);i=c.line,o=c.col}else i=l.line,o=l.column}else if(!n){var h=this.fromOffset(t);t=h.line,n=h.col}var d=this.origin(t,n,i,o);return(r=d?new ao(e,void 0===d.endLine?d.line:{column:d.column,line:d.line},void 0===d.endLine?d.column:{column:d.endColumn,line:d.endLine},d.source,d.file,a.plugin):new ao(e,void 0===i?t:{column:n,line:t},void 0===i?n:{column:o,line:i},this.css,this.file,a.plugin)).input={column:n,endColumn:o,endLine:i,line:t,source:this.css},this.file&&(to&&(r.input.url=to(this.file).toString()),r.input.file=this.file),r}},{key:"fromOffset",value:function(e){var t;if(this[lo])t=this[lo];else{var n=this.css.split("\n");t=new Array(n.length);for(var r=0,i=0,o=n.length;i<o;i++)t[i]=r,r+=n[i].length+1;this[lo]=t}var a=0;if(e>=t[t.length-1])a=t.length-1;else for(var s,l=t.length-2;a<l;)if(e<t[s=a+(l-a>>1)])l=s-1;else{if(!(e>=t[s+1])){a=s;break}a=s+1}return{col:e-t[a]+1,line:a+1}}},{key:"mapResolve",value:function(e){return/^\w+:\/\//.test(e)?e:ro(this.map.consumer().sourceRoot||this.map.root||".",e)}},{key:"origin",value:function(e,t,n,r){if(!this.map)return!1;var i,o,a=this.map.consumer(),s=a.originalPositionFor({column:t,line:e});if(!s.source)return!1;"number"==typeof n&&(i=a.originalPositionFor({column:r,line:n})),o=no(s.source)?to(s.source):new URL(s.source,this.map.consumer().sourceRoot||to(this.map.mapFile));var l={column:s.column,endColumn:i&&i.column,endLine:i&&i.line,line:s.line,url:o.toString()};if("file:"===o.protocol){if(!eo)throw new Error("file: protocol is not available in this PostCSS build");l.file=eo(o)}var u=a.sourceContentFor(s.source);return u&&(l.source=u),l}},{key:"toJSON",value:function(){for(var e={},t=0,n=["hasBOM","css","file","id"];t<n.length;t++){var r=n[t];null!=this[r]&&(e[r]=this[r])}return this.map&&(e.map=p({},this.map),e.map.consumerCache&&(e.map.consumerCache=void 0)),e}},{key:"from",get:function(){return this.file||this.id}}]),fo=ho;ho.default=ho,oo&&oo.registerInput&&oo.registerInput(ho);var po=ki.SourceMapConsumer,mo=ki.SourceMapGenerator,vo=ki.dirname,yo=ki.relative,go=ki.resolve,wo=ki.sep,bo=ki.pathToFileURL,ko=fo,So=Boolean(po&&mo),_o=Boolean(vo&&go&&yo&&wo),Co=a(function e(t,n,r,i){o(this,e),this.stringify=t,this.mapOpts=r.map||{},this.root=n,this.opts=r,this.css=i,this.originalCSS=i,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map},[{key:"addAnnotation",value:function(){var e;e=this.isInline()?"data:application/json;base64,"+this.toBase64(this.map.toString()):"string"==typeof this.mapOpts.annotation?this.mapOpts.annotation:"function"==typeof this.mapOpts.annotation?this.mapOpts.annotation(this.opts.to,this.root):this.outputFile()+".map";var t="\n";this.css.includes("\r\n")&&(t="\r\n"),this.css+=t+"/*# sourceMappingURL="+e+" */"}},{key:"applyPrevMaps",value:function(){var e,t=s(this.previous());try{for(t.s();!(e=t.n()).done;){var n=e.value,r=this.toUrl(this.path(n.file)),i=n.root||vo(n.file),o=void 0;!1===this.mapOpts.sourcesContent?(o=new po(n.text)).sourcesContent&&(o.sourcesContent=null):o=n.consumer(),this.map.applySourceMap(o,r,this.toUrl(this.path(i)))}}catch(e){t.e(e)}finally{t.f()}}},{key:"clearAnnotation",value:function(){if(!1!==this.mapOpts.annotation)if(this.root)for(var e,t=this.root.nodes.length-1;t>=0;t--)"comment"===(e=this.root.nodes[t]).type&&0===e.text.indexOf("# sourceMappingURL=")&&this.root.removeChild(t);else this.css&&(this.css=this.css.replace(/\n*?\/\*#[\S\s]*?\*\/$/gm,""))}},{key:"generate",value:function(){if(this.clearAnnotation(),_o&&So&&this.isMap())return this.generateMap();var e="";return this.stringify(this.root,function(t){e+=t}),[e]}},{key:"generateMap",value:function(){if(this.root)this.generateString();else if(1===this.previous().length){var e=this.previous()[0].consumer();e.file=this.outputFile(),this.map=mo.fromSourceMap(e,{ignoreInvalidMapping:!0})}else this.map=new mo({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}},{key:"generateString",value:function(){var e=this;this.css="",this.map=new mo({file:this.outputFile(),ignoreInvalidMapping:!0});var t,n,r=1,i=1,o="<no source>",a={generated:{column:0,line:0},original:{column:0,line:0},source:""};this.stringify(this.root,function(s,l,u){if(e.css+=s,l&&"end"!==u&&(a.generated.line=r,a.generated.column=i-1,l.source&&l.source.start?(a.source=e.sourcePath(l),a.original.line=l.source.start.line,a.original.column=l.source.start.column-1,e.map.addMapping(a)):(a.source=o,a.original.line=1,a.original.column=0,e.map.addMapping(a))),(t=s.match(/\n/g))?(r+=t.length,n=s.lastIndexOf("\n"),i=s.length-n):i+=s.length,l&&"start"!==u){var c=l.parent||{raws:{}};("decl"===l.type||"atrule"===l.type&&!l.nodes)&&l===c.last&&!c.raws.semicolon||(l.source&&l.source.end?(a.source=e.sourcePath(l),a.original.line=l.source.end.line,a.original.column=l.source.end.column-1,a.generated.line=r,a.generated.column=i-2,e.map.addMapping(a)):(a.source=o,a.original.line=1,a.original.column=0,a.generated.line=r,a.generated.column=i-1,e.map.addMapping(a)))}})}},{key:"isAnnotation",value:function(){return!!this.isInline()||(void 0!==this.mapOpts.annotation?this.mapOpts.annotation:!this.previous().length||this.previous().some(function(e){return e.annotation}))}},{key:"isInline",value:function(){if(void 0!==this.mapOpts.inline)return this.mapOpts.inline;var e=this.mapOpts.annotation;return(void 0===e||!0===e)&&(!this.previous().length||this.previous().some(function(e){return e.inline}))}},{key:"isMap",value:function(){return void 0!==this.opts.map?!!this.opts.map:this.previous().length>0}},{key:"isSourcesContent",value:function(){return void 0!==this.mapOpts.sourcesContent?this.mapOpts.sourcesContent:!this.previous().length||this.previous().some(function(e){return e.withContent()})}},{key:"outputFile",value:function(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}},{key:"path",value:function(e){if(this.mapOpts.absolute)return e;if(60===e.charCodeAt(0))return e;if(/^\w+:\/\//.test(e))return e;var t=this.memoizedPaths.get(e);if(t)return t;var n=this.opts.to?vo(this.opts.to):".";"string"==typeof this.mapOpts.annotation&&(n=vo(go(n,this.mapOpts.annotation)));var r=yo(n,e);return this.memoizedPaths.set(e,r),r}},{key:"previous",value:function(){var e=this;if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk(function(t){if(t.source&&t.source.input.map){var n=t.source.input.map;e.previousMaps.includes(n)||e.previousMaps.push(n)}});else{var t=new ko(this.originalCSS,this.opts);t.map&&this.previousMaps.push(t.map)}return this.previousMaps}},{key:"setSourcesContent",value:function(){var e=this,t={};if(this.root)this.root.walk(function(n){if(n.source){var r=n.source.input.from;if(r&&!t[r]){t[r]=!0;var i=e.usesFileUrls?e.toFileUrl(r):e.toUrl(e.path(r));e.map.setSourceContent(i,n.source.input.css)}}});else if(this.css){var n=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(n,this.css)}}},{key:"sourcePath",value:function(e){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(e.source.input.from):this.toUrl(this.path(e.source.input.from))}},{key:"toBase64",value:function(e){return Buffer?Buffer.from(e).toString("base64"):window.btoa(unescape(encodeURIComponent(e)))}},{key:"toFileUrl",value:function(e){var t=this.memoizedFileURLs.get(e);if(t)return t;if(bo){var n=bo(e).toString();return this.memoizedFileURLs.set(e,n),n}throw new Error("`map.absolute` option is not available in this PostCSS build")}},{key:"toUrl",value:function(e){var t=this.memoizedURLs.get(e);if(t)return t;"\\"===wo&&(e=e.replace(/\\/g,"/"));var n=encodeURI(e).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(e,n),n}}]),Io=function(e){function t(e){var n;return o(this,t),(n=i(this,t,[e])).type="comment",n}return h(t,e),a(t)}(ji),xo=Io;Io.default=Io;var Eo,Oo,Ao,Ro,Mo=xi.isClean,To=xi.my,No=Zi,Lo=xo;function Do(e){return e.map(function(e){return e.nodes&&(e.nodes=Do(e.nodes)),delete e.source,e})}function Po(e){if(e[Mo]=!1,e.proxyOf.nodes){var t,n=s(e.proxyOf.nodes);try{for(n.s();!(t=n.n()).done;){Po(t.value)}}catch(e){n.e(e)}finally{n.f()}}}var Fo=function(e){function t(){return o(this,t),i(this,t,arguments)}return h(t,e),a(t,[{key:"append",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0,i=t;r<i.length;r++){var o,a=i[r],l=s(this.normalize(a,this.last));try{for(l.s();!(o=l.n()).done;){var u=o.value;this.proxyOf.nodes.push(u)}}catch(e){l.e(e)}finally{l.f()}}return this.markDirty(),this}},{key:"cleanRaws",value:function(e){if(k(t,"cleanRaws",this)([e]),this.nodes){var n,r=s(this.nodes);try{for(r.s();!(n=r.n()).done;){n.value.cleanRaws(e)}}catch(e){r.e(e)}finally{r.f()}}}},{key:"each",value:function(e){if(this.proxyOf.nodes){for(var t,n,r=this.getIterator();this.indexes[r]<this.proxyOf.nodes.length&&(t=this.indexes[r],!1!==(n=e(this.proxyOf.nodes[t],t)));)this.indexes[r]+=1;return delete this.indexes[r],n}}},{key:"every",value:function(e){return this.nodes.every(e)}},{key:"getIterator",value:function(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;var e=this.lastEach;return this.indexes[e]=0,e}},{key:"getProxyProcessor",value:function(){return{get:function(e,t){return"proxyOf"===t?e:e[t]?"each"===t||"string"==typeof t&&t.startsWith("walk")?function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e[t].apply(e,S(r.map(function(e){return"function"==typeof e?function(t,n){return e(t.toProxy(),n)}:e})))}:"every"===t||"some"===t?function(n){return e[t](function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return n.apply(void 0,[e.toProxy()].concat(r))})}:"root"===t?function(){return e.root().toProxy()}:"nodes"===t?e.nodes.map(function(e){return e.toProxy()}):"first"===t||"last"===t?e[t].toProxy():e[t]:e[t]},set:function(e,t,n){return e[t]===n||(e[t]=n,"name"!==t&&"params"!==t&&"selector"!==t||e.markDirty()),!0}}}},{key:"index",value:function(e){return"number"==typeof e?e:(e.proxyOf&&(e=e.proxyOf),this.proxyOf.nodes.indexOf(e))}},{key:"insertAfter",value:function(e,t){var n=this.index(e),r=this.normalize(t,this.proxyOf.nodes[n]).reverse();n=this.index(e);var i,o,a=s(r);try{for(a.s();!(i=a.n()).done;){var l=i.value;this.proxyOf.nodes.splice(n+1,0,l)}}catch(e){a.e(e)}finally{a.f()}for(var u in this.indexes)n<(o=this.indexes[u])&&(this.indexes[u]=o+r.length);return this.markDirty(),this}},{key:"insertBefore",value:function(e,t){var n=this.index(e),r=0===n&&"prepend",i=this.normalize(t,this.proxyOf.nodes[n],r).reverse();n=this.index(e);var o,a,l=s(i);try{for(l.s();!(o=l.n()).done;){var u=o.value;this.proxyOf.nodes.splice(n,0,u)}}catch(e){l.e(e)}finally{l.f()}for(var c in this.indexes)n<=(a=this.indexes[c])&&(this.indexes[c]=a+i.length);return this.markDirty(),this}},{key:"normalize",value:function(e,n){var r=this;if("string"==typeof e)e=Do(Eo(e).nodes);else if(void 0===e)e=[];else if(Array.isArray(e)){var i,o=s(e=e.slice(0));try{for(o.s();!(i=o.n()).done;){var a=i.value;a.parent&&a.parent.removeChild(a,"ignore")}}catch(e){o.e(e)}finally{o.f()}}else if("root"===e.type&&"document"!==this.type){var l,u=s(e=e.nodes.slice(0));try{for(u.s();!(l=u.n()).done;){var c=l.value;c.parent&&c.parent.removeChild(c,"ignore")}}catch(e){u.e(e)}finally{u.f()}}else if(e.type)e=[e];else if(e.prop){if(void 0===e.value)throw new Error("Value field is missed in node creation");"string"!=typeof e.value&&(e.value=String(e.value)),e=[new No(e)]}else if(e.selector)e=[new Oo(e)];else if(e.name)e=[new Ao(e)];else{if(!e.text)throw new Error("Unknown node type in node creation");e=[new Lo(e)]}var h=e.map(function(e){return e[To]||t.rebuild(e),(e=e.proxyOf).parent&&e.parent.removeChild(e),e[Mo]&&Po(e),void 0===e.raws.before&&n&&void 0!==n.raws.before&&(e.raws.before=n.raws.before.replace(/\S/g,"")),e.parent=r.proxyOf,e});return h}},{key:"prepend",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,i=s(t=t.reverse());try{for(i.s();!(r=i.n()).done;){var o,a=r.value,l=this.normalize(a,this.first,"prepend").reverse(),u=s(l);try{for(u.s();!(o=u.n()).done;){var c=o.value;this.proxyOf.nodes.unshift(c)}}catch(e){u.e(e)}finally{u.f()}for(var h in this.indexes)this.indexes[h]=this.indexes[h]+l.length}}catch(e){i.e(e)}finally{i.f()}return this.markDirty(),this}},{key:"push",value:function(e){return e.parent=this,this.proxyOf.nodes.push(e),this}},{key:"removeAll",value:function(){var e,t=s(this.proxyOf.nodes);try{for(t.s();!(e=t.n()).done;){e.value.parent=void 0}}catch(e){t.e(e)}finally{t.f()}return this.proxyOf.nodes=[],this.markDirty(),this}},{key:"removeChild",value:function(e){var t;for(var n in e=this.index(e),this.proxyOf.nodes[e].parent=void 0,this.proxyOf.nodes.splice(e,1),this.indexes)(t=this.indexes[n])>=e&&(this.indexes[n]=t-1);return this.markDirty(),this}},{key:"replaceValues",value:function(e,t,n){return n||(n=t,t={}),this.walkDecls(function(r){t.props&&!t.props.includes(r.prop)||t.fast&&!r.value.includes(t.fast)||(r.value=r.value.replace(e,n))}),this.markDirty(),this}},{key:"some",value:function(e){return this.nodes.some(e)}},{key:"walk",value:function(e){return this.each(function(t,n){var r;try{r=e(t,n)}catch(e){throw t.addToError(e)}return!1!==r&&t.walk&&(r=t.walk(e)),r})}},{key:"walkAtRules",value:function(e,t){return t?e instanceof RegExp?this.walk(function(n,r){if("atrule"===n.type&&e.test(n.name))return t(n,r)}):this.walk(function(n,r){if("atrule"===n.type&&n.name===e)return t(n,r)}):(t=e,this.walk(function(e,n){if("atrule"===e.type)return t(e,n)}))}},{key:"walkComments",value:function(e){return this.walk(function(t,n){if("comment"===t.type)return e(t,n)})}},{key:"walkDecls",value:function(e,t){return t?e instanceof RegExp?this.walk(function(n,r){if("decl"===n.type&&e.test(n.prop))return t(n,r)}):this.walk(function(n,r){if("decl"===n.type&&n.prop===e)return t(n,r)}):(t=e,this.walk(function(e,n){if("decl"===e.type)return t(e,n)}))}},{key:"walkRules",value:function(e,t){return t?e instanceof RegExp?this.walk(function(n,r){if("rule"===n.type&&e.test(n.selector))return t(n,r)}):this.walk(function(n,r){if("rule"===n.type&&n.selector===e)return t(n,r)}):(t=e,this.walk(function(e,n){if("rule"===e.type)return t(e,n)}))}},{key:"first",get:function(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}},{key:"last",get:function(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}}])}(ji);Fo.registerParse=function(e){Eo=e},Fo.registerRule=function(e){Oo=e},Fo.registerAtRule=function(e){Ao=e},Fo.registerRoot=function(e){Ro=e};var zo=Fo;Fo.default=Fo,Fo.rebuild=function(e){"atrule"===e.type?Object.setPrototypeOf(e,Ao.prototype):"rule"===e.type?Object.setPrototypeOf(e,Oo.prototype):"decl"===e.type?Object.setPrototypeOf(e,No.prototype):"comment"===e.type?Object.setPrototypeOf(e,Lo.prototype):"root"===e.type&&Object.setPrototypeOf(e,Ro.prototype),e[To]=!0,e.nodes&&e.nodes.forEach(function(e){Fo.rebuild(e)})};var Uo,jo,Bo=function(e){function t(e){var n;return o(this,t),(n=i(this,t,[p({type:"document"},e)])).nodes||(n.nodes=[]),n}return h(t,e),a(t,[{key:"toResult",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Uo(new jo,this,e).stringify()}}])}(zo);Bo.registerLazyResult=function(e){Uo=e},Bo.registerProcessor=function(e){jo=e};var Zo=Bo;Bo.default=Bo;var Go={},Vo=function(e){Go[e]||(Go[e]=!0,"undefined"!=typeof console&&console.warn&&console.warn(e))},Wo=a(function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(o(this,e),this.type="warning",this.text=t,n.node&&n.node.source){var r=n.node.rangeBy(n);this.line=r.start.line,this.column=r.start.column,this.endLine=r.end.line,this.endColumn=r.end.column}for(var i in n)this[i]=n[i]},[{key:"toString",value:function(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}}]),Yo=Wo;Wo.default=Wo;var Ho=Yo,Ko=a(function e(t,n,r){o(this,e),this.processor=t,this.messages=[],this.root=n,this.opts=r,this.css=void 0,this.map=void 0},[{key:"toString",value:function(){return this.css}},{key:"warn",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(t.plugin=this.lastPlugin.postcssPlugin);var n=new Ho(e,t);return this.messages.push(n),n}},{key:"warnings",value:function(){return this.messages.filter(function(e){return"warning"===e.type})}},{key:"content",get:function(){return this.css}}]),qo=Ko;Ko.default=Ko;var Xo="'".charCodeAt(0),Jo='"'.charCodeAt(0),$o="\\".charCodeAt(0),Qo="/".charCodeAt(0),ea="\n".charCodeAt(0),ta=" ".charCodeAt(0),na="\f".charCodeAt(0),ra="\t".charCodeAt(0),ia="\r".charCodeAt(0),oa="[".charCodeAt(0),aa="]".charCodeAt(0),sa="(".charCodeAt(0),la=")".charCodeAt(0),ua="{".charCodeAt(0),ca="}".charCodeAt(0),ha=";".charCodeAt(0),da="*".charCodeAt(0),fa=":".charCodeAt(0),pa="@".charCodeAt(0),ma=/[\t\n\f\r "#'()/;[\\\]{}]/g,va=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,ya=/.[\r\n"'(/\\]/,ga=/[\da-f]/i,wa=zo,ba=function(e){function t(e){var n;return o(this,t),(n=i(this,t,[e])).type="atrule",n}return h(t,e),a(t,[{key:"append",value:function(){this.proxyOf.nodes||(this.nodes=[]);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return k(t,"append",this)(n)}},{key:"prepend",value:function(){this.proxyOf.nodes||(this.nodes=[]);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return k(t,"prepend",this)(n)}}])}(wa),ka=ba;ba.default=ba,wa.registerAtRule(ba);var Sa,_a,Ca=zo,Ia=function(e){function t(e){var n;return o(this,t),(n=i(this,t,[e])).type="root",n.nodes||(n.nodes=[]),n}return h(t,e),a(t,[{key:"normalize",value:function(e,n,r){var i=k(t,"normalize",this)([e]);if(n)if("prepend"===r)this.nodes.length>1?n.raws.before=this.nodes[1].raws.before:delete n.raws.before;else if(this.first!==n){var o,a=s(i);try{for(a.s();!(o=a.n()).done;){o.value.raws.before=n.raws.before}}catch(e){a.e(e)}finally{a.f()}}return i}},{key:"removeChild",value:function(e,n){var r=this.index(e);return!n&&0===r&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[r].raws.before),k(t,"removeChild",this)([e])}},{key:"toResult",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Sa(new _a,this,e).stringify()}}])}(Ca);Ia.registerLazyResult=function(e){Sa=e},Ia.registerProcessor=function(e){_a=e};var xa=Ia;Ia.default=Ia,Ca.registerRoot(Ia);var Ea={comma:function(e){return Ea.split(e,[","],!0)},space:function(e){return Ea.split(e,[" ","\n","\t"])},split:function(e,t,n){var r,i=[],o="",a=!1,l=0,u=!1,c="",h=!1,d=s(e);try{for(d.s();!(r=d.n()).done;){var f=r.value;h?h=!1:"\\"===f?h=!0:u?f===c&&(u=!1):'"'===f||"'"===f?(u=!0,c=f):"("===f?l+=1:")"===f?l>0&&(l-=1):0===l&&t.includes(f)&&(a=!0),a?(""!==o&&i.push(o.trim()),o="",a=!1):o+=f}}catch(e){d.e(e)}finally{d.f()}return(n||""!==o)&&i.push(o.trim()),i}},Oa=Ea;Ea.default=Ea;var Aa=zo,Ra=Oa,Ma=function(e){function t(e){var n;return o(this,t),(n=i(this,t,[e])).type="rule",n.nodes||(n.nodes=[]),n}return h(t,e),a(t,[{key:"selectors",get:function(){return Ra.comma(this.selector)},set:function(e){var t=this.selector?this.selector.match(/,\s*/):null,n=t?t[0]:","+this.raw("between","beforeOpen");this.selector=e.join(n)}}])}(Aa),Ta=Ma;Ma.default=Ma,Aa.registerRule(Ma);var Na=Zi,La=function(e){var t,n,r,i,o,a,s,l,u,c,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=e.css.valueOf(),f=h.ignoreErrors,p=d.length,m=0,v=[],y=[];function g(t){throw e.error("Unclosed "+t,m)}return{back:function(e){y.push(e)},endOfFile:function(){return 0===y.length&&m>=p},nextToken:function(e){if(y.length)return y.pop();if(!(m>=p)){var h=!!e&&e.ignoreUnclosed;switch(t=d.charCodeAt(m)){case ea:case ta:case ra:case ia:case na:n=m;do{n+=1,t=d.charCodeAt(n)}while(t===ta||t===ea||t===ra||t===ia||t===na);c=["space",d.slice(m,n)],m=n-1;break;case oa:case aa:case ua:case ca:case fa:case ha:case la:var w=String.fromCharCode(t);c=[w,w,m];break;case sa:if(l=v.length?v.pop()[1]:"",u=d.charCodeAt(m+1),"url"===l&&u!==Xo&&u!==Jo&&u!==ta&&u!==ea&&u!==ra&&u!==na&&u!==ia){n=m;do{if(a=!1,-1===(n=d.indexOf(")",n+1))){if(f||h){n=m;break}g("bracket")}for(s=n;d.charCodeAt(s-1)===$o;)s-=1,a=!a}while(a);c=["brackets",d.slice(m,n+1),m,n],m=n}else n=d.indexOf(")",m+1),i=d.slice(m,n+1),-1===n||ya.test(i)?c=["(","(",m]:(c=["brackets",i,m,n],m=n);break;case Xo:case Jo:r=t===Xo?"'":'"',n=m;do{if(a=!1,-1===(n=d.indexOf(r,n+1))){if(f||h){n=m+1;break}g("string")}for(s=n;d.charCodeAt(s-1)===$o;)s-=1,a=!a}while(a);c=["string",d.slice(m,n+1),m,n],m=n;break;case pa:ma.lastIndex=m+1,ma.test(d),n=0===ma.lastIndex?d.length-1:ma.lastIndex-2,c=["at-word",d.slice(m,n+1),m,n],m=n;break;case $o:for(n=m,o=!0;d.charCodeAt(n+1)===$o;)n+=1,o=!o;if(t=d.charCodeAt(n+1),o&&t!==Qo&&t!==ta&&t!==ea&&t!==ra&&t!==ia&&t!==na&&(n+=1,ga.test(d.charAt(n)))){for(;ga.test(d.charAt(n+1));)n+=1;d.charCodeAt(n+1)===ta&&(n+=1)}c=["word",d.slice(m,n+1),m,n],m=n;break;default:t===Qo&&d.charCodeAt(m+1)===da?(0===(n=d.indexOf("*/",m+2)+1)&&(f||h?n=d.length:g("comment")),c=["comment",d.slice(m,n+1),m,n],m=n):(va.lastIndex=m+1,va.test(d),n=0===va.lastIndex?d.length-1:va.lastIndex-2,c=["word",d.slice(m,n+1),m,n],v.push(c),m=n)}return m++,c}},position:function(){return m}}},Da=xo,Pa=ka,Fa=xa,za=Ta,Ua={empty:!0,space:!0};var ja=zo,Ba=a(function e(t){o(this,e),this.input=t,this.root=new Fa,this.current=this.root,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:t,start:{column:1,line:1,offset:0}}},[{key:"atrule",value:function(e){var t,n,r,i=new Pa;i.name=e[1].slice(1),""===i.name&&this.unnamedAtrule(i,e),this.init(i,e[2]);for(var o=!1,a=!1,s=[],l=[];!this.tokenizer.endOfFile();){if("("===(t=(e=this.tokenizer.nextToken())[0])||"["===t?l.push("("===t?")":"]"):"{"===t&&l.length>0?l.push("}"):t===l[l.length-1]&&l.pop(),0===l.length){if(";"===t){i.source.end=this.getPosition(e[2]),i.source.end.offset++,this.semicolon=!0;break}if("{"===t){a=!0;break}if("}"===t){if(s.length>0){for(n=s[r=s.length-1];n&&"space"===n[0];)n=s[--r];n&&(i.source.end=this.getPosition(n[3]||n[2]),i.source.end.offset++)}this.end(e);break}s.push(e)}else s.push(e);if(this.tokenizer.endOfFile()){o=!0;break}}i.raws.between=this.spacesAndCommentsFromEnd(s),s.length?(i.raws.afterName=this.spacesAndCommentsFromStart(s),this.raw(i,"params",s),o&&(e=s[s.length-1],i.source.end=this.getPosition(e[3]||e[2]),i.source.end.offset++,this.spaces=i.raws.between,i.raws.between="")):(i.raws.afterName="",i.params=""),a&&(i.nodes=[],this.current=i)}},{key:"checkMissedSemicolon",value:function(e){var t=this.colon(e);if(!1!==t){for(var n,r=0,i=t-1;i>=0&&("space"===(n=e[i])[0]||2!==(r+=1));i--);throw this.input.error("Missed semicolon","word"===n[0]?n[3]+1:n[2])}}},{key:"colon",value:function(e){var t,n,r,i,o=0,a=s(e.entries());try{for(a.s();!(i=a.n()).done;){var l=b(i.value,2),u=l[0];if("("===(n=(t=l[1])[0])&&(o+=1),")"===n&&(o-=1),0===o&&":"===n){if(r){if("word"===r[0]&&"progid"===r[1])continue;return u}this.doubleColon(t)}r=t}}catch(e){a.e(e)}finally{a.f()}return!1}},{key:"comment",value:function(e){var t=new Da;this.init(t,e[2]),t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++;var n=e[1].slice(2,-2);if(/^\s*$/.test(n))t.text="",t.raws.left=n,t.raws.right="";else{var r=n.match(/^(\s*)([^]*\S)(\s*)$/);t.text=r[2],t.raws.left=r[1],t.raws.right=r[3]}}},{key:"createTokenizer",value:function(){this.tokenizer=La(this.input)}},{key:"decl",value:function(e,t){var n=new Na;this.init(n,e[0][2]);var r,i=e[e.length-1];for(";"===i[0]&&(this.semicolon=!0,e.pop()),n.source.end=this.getPosition(i[3]||i[2]||function(e){for(var t=e.length-1;t>=0;t--){var n=e[t],r=n[3]||n[2];if(r)return r}}(e)),n.source.end.offset++;"word"!==e[0][0];)1===e.length&&this.unknownWord(e),n.raws.before+=e.shift()[1];for(n.source.start=this.getPosition(e[0][2]),n.prop="";e.length;){var o=e[0][0];if(":"===o||"space"===o||"comment"===o)break;n.prop+=e.shift()[1]}for(n.raws.between="";e.length;){if(":"===(r=e.shift())[0]){n.raws.between+=r[1];break}"word"===r[0]&&/\w/.test(r[1])&&this.unknownWord([r]),n.raws.between+=r[1]}"_"!==n.prop[0]&&"*"!==n.prop[0]||(n.raws.before+=n.prop[0],n.prop=n.prop.slice(1));for(var a,s=[];e.length&&("space"===(a=e[0][0])||"comment"===a);)s.push(e.shift());this.precheckMissedSemicolon(e);for(var l=e.length-1;l>=0;l--){if("!important"===(r=e[l])[1].toLowerCase()){n.important=!0;var u=this.stringFrom(e,l);" !important"!==(u=this.spacesFromEnd(e)+u)&&(n.raws.important=u);break}if("important"===r[1].toLowerCase()){for(var c=e.slice(0),h="",d=l;d>0;d--){var f=c[d][0];if(0===h.trim().indexOf("!")&&"space"!==f)break;h=c.pop()[1]+h}0===h.trim().indexOf("!")&&(n.important=!0,n.raws.important=h,e=c)}if("space"!==r[0]&&"comment"!==r[0])break}var p=e.some(function(e){return"space"!==e[0]&&"comment"!==e[0]});p&&(n.raws.between+=s.map(function(e){return e[1]}).join(""),s=[]),this.raw(n,"value",s.concat(e),t),n.value.includes(":")&&!t&&this.checkMissedSemicolon(e)}},{key:"doubleColon",value:function(e){throw this.input.error("Double colon",{offset:e[2]},{offset:e[2]+e[1].length})}},{key:"emptyRule",value:function(e){var t=new za;this.init(t,e[2]),t.selector="",t.raws.between="",this.current=t}},{key:"end",value:function(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(e)}},{key:"endFile",value:function(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}},{key:"freeSemicolon",value:function(e){if(this.spaces+=e[1],this.current.nodes){var t=this.current.nodes[this.current.nodes.length-1];t&&"rule"===t.type&&!t.raws.ownSemicolon&&(t.raws.ownSemicolon=this.spaces,this.spaces="")}}},{key:"getPosition",value:function(e){var t=this.input.fromOffset(e);return{column:t.col,line:t.line,offset:e}}},{key:"init",value:function(e,t){this.current.push(e),e.source={input:this.input,start:this.getPosition(t)},e.raws.before=this.spaces,this.spaces="","comment"!==e.type&&(this.semicolon=!1)}},{key:"other",value:function(e){for(var t=!1,n=null,r=!1,i=null,o=[],a=e[1].startsWith("--"),s=[],l=e;l;){if(n=l[0],s.push(l),"("===n||"["===n)i||(i=l),o.push("("===n?")":"]");else if(a&&r&&"{"===n)i||(i=l),o.push("}");else if(0===o.length){if(";"===n){if(r)return void this.decl(s,a);break}if("{"===n)return void this.rule(s);if("}"===n){this.tokenizer.back(s.pop()),t=!0;break}":"===n&&(r=!0)}else n===o[o.length-1]&&(o.pop(),0===o.length&&(i=null));l=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(t=!0),o.length>0&&this.unclosedBracket(i),t&&r){if(!a)for(;s.length&&("space"===(l=s[s.length-1][0])||"comment"===l);)this.tokenizer.back(s.pop());this.decl(s,a)}else this.unknownWord(s)}},{key:"parse",value:function(){for(var e;!this.tokenizer.endOfFile();)switch((e=this.tokenizer.nextToken())[0]){case"space":this.spaces+=e[1];break;case";":this.freeSemicolon(e);break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.other(e)}this.endFile()}},{key:"precheckMissedSemicolon",value:function(){}},{key:"raw",value:function(e,t,n,r){for(var i,o,a,s,l=n.length,u="",c=!0,h=0;h<l;h+=1)"space"!==(o=(i=n[h])[0])||h!==l-1||r?"comment"===o?(s=n[h-1]?n[h-1][0]:"empty",a=n[h+1]?n[h+1][0]:"empty",Ua[s]||Ua[a]||","===u.slice(-1)?c=!1:u+=i[1]):u+=i[1]:c=!1;if(!c){var d=n.reduce(function(e,t){return e+t[1]},"");e.raws[t]={raw:d,value:u}}e[t]=u}},{key:"rule",value:function(e){e.pop();var t=new za;this.init(t,e[0][2]),t.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(t,"selector",e),this.current=t}},{key:"spacesAndCommentsFromEnd",value:function(e){for(var t,n="";e.length&&("space"===(t=e[e.length-1][0])||"comment"===t);)n=e.pop()[1]+n;return n}},{key:"spacesAndCommentsFromStart",value:function(e){for(var t,n="";e.length&&("space"===(t=e[0][0])||"comment"===t);)n+=e.shift()[1];return n}},{key:"spacesFromEnd",value:function(e){for(var t="";e.length&&"space"===e[e.length-1][0];)t=e.pop()[1]+t;return t}},{key:"stringFrom",value:function(e,t){for(var n="",r=t;r<e.length;r++)n+=e[r][1];return e.splice(t,e.length-t),n}},{key:"unclosedBlock",value:function(){var e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)}},{key:"unclosedBracket",value:function(e){throw this.input.error("Unclosed bracket",{offset:e[2]},{offset:e[2]+1})}},{key:"unexpectedClose",value:function(e){throw this.input.error("Unexpected }",{offset:e[2]},{offset:e[2]+1})}},{key:"unknownWord",value:function(e){throw this.input.error("Unknown word",{offset:e[0][2]},{offset:e[0][2]+e[0][1].length})}},{key:"unnamedAtrule",value:function(e,t){throw this.input.error("At-rule without name",{offset:t[2]},{offset:t[2]+t[1].length})}}]),Za=fo;function Ga(e,t){var n=new Za(e,t),r=new Ba(n);try{r.parse()}catch(e){throw"production"!==process.env.NODE_ENV&&"CssSyntaxError"===e.name&&t&&t.from&&(/\.scss$/i.test(t.from)?e.message+="\nYou tried to parse SCSS with the standard CSS parser; try again with the postcss-scss parser":/\.sass/i.test(t.from)?e.message+="\nYou tried to parse Sass with the standard CSS parser; try again with the postcss-sass parser":/\.less$/i.test(t.from)&&(e.message+="\nYou tried to parse Less with the standard CSS parser; try again with the postcss-less parser")),e}return r.root}var Va=Ga;Ga.default=Ga,ja.registerParse(Ga);var Wa=xi.isClean,Ya=xi.my,Ha=Co,Ka=Ti,qa=zo,Xa=Zo,Ja=Vo,$a=qo,Qa=Va,es=xa,ts={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},ns={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},rs={Once:!0,postcssPlugin:!0,prepare:!0};function is(e){return"object"===C(e)&&"function"==typeof e.then}function os(e){var t=!1,n=ts[e.type];return"decl"===e.type?t=e.prop.toLowerCase():"atrule"===e.type&&(t=e.name.toLowerCase()),t&&e.append?[n,n+"-"+t,0,n+"Exit",n+"Exit-"+t]:t?[n,n+"-"+t,n+"Exit",n+"Exit-"+t]:e.append?[n,0,n+"Exit"]:[n,n+"Exit"]}function as(e){return{eventIndex:0,events:"document"===e.type?["Document",0,"DocumentExit"]:"root"===e.type?["Root",0,"RootExit"]:os(e),iterator:0,node:e,visitorIndex:0,visitors:[]}}function ss(e){return e[Wa]=!1,e.nodes&&e.nodes.forEach(function(e){return ss(e)}),e}var ls,us={},cs=a(function e(t,n,r){var i,a=this;if(o(this,e),this.stringified=!1,this.processed=!1,"object"!==C(n)||null===n||"root"!==n.type&&"document"!==n.type)if(n instanceof e||n instanceof $a)i=ss(n.root),n.map&&(void 0===r.map&&(r.map={}),r.map.inline||(r.map.inline=!1),r.map.prev=n.map);else{var s=Qa;r.syntax&&(s=r.syntax.parse),r.parser&&(s=r.parser),s.parse&&(s=s.parse);try{i=s(n,r)}catch(e){this.processed=!0,this.error=e}i&&!i[Ya]&&qa.rebuild(i)}else i=ss(n);this.result=new $a(t,i,r),this.helpers=p(p({},us),{},{postcss:us,result:this.result}),this.plugins=this.processor.plugins.map(function(e){return"object"===C(e)&&e.prepare?p(p({},e),e.prepare(a.result)):e})},[{key:"async",value:function(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}},{key:"catch",value:function(e){return this.async().catch(e)}},{key:"finally",value:function(e){return this.async().then(e,e)}},{key:"getAsyncError",value:function(){throw new Error("Use process(css).then(cb) to work with async plugins")}},{key:"handleError",value:function(e,t){var n=this.result.lastPlugin;try{if(t&&t.addToError(e),this.error=e,"CssSyntaxError"!==e.name||e.plugin){if(n.postcssVersion&&"production"!==process.env.NODE_ENV){var r=n.postcssPlugin,i=n.postcssVersion,o=this.result.processor.version,a=i.split("."),s=o.split(".");(a[0]!==s[0]||parseInt(a[1])>parseInt(s[1]))&&console.error("Unknown error from PostCSS plugin. Your current PostCSS version is "+o+", but "+r+" uses "+i+". Perhaps this is the source of the error below.")}}else e.plugin=n.postcssPlugin,e.setMessage()}catch(e){console&&console.error&&console.error(e)}return e}},{key:"prepareVisitors",value:function(){var e=this;this.listeners={};var t,n=function(t,n,r){e.listeners[n]||(e.listeners[n]=[]),e.listeners[n].push([t,r])},r=s(this.plugins);try{for(r.s();!(t=r.n()).done;){var i=t.value;if("object"===C(i))for(var o in i){if(!ns[o]&&/^[A-Z]/.test(o))throw new Error("Unknown event ".concat(o," in ").concat(i.postcssPlugin,". Try to update PostCSS (").concat(this.processor.version," now)."));if(!rs[o])if("object"===C(i[o]))for(var a in i[o])n(i,"*"===a?o:o+"-"+a.toLowerCase(),i[o][a]);else"function"==typeof i[o]&&n(i,o,i[o])}}}catch(e){r.e(e)}finally{r.f()}this.hasListener=Object.keys(this.listeners).length>0}},{key:"runAsync",value:(ls=r(v().m(function e(){var t,n,r,i,o,a,l,u,c,h,d,f,p,m=this;return v().w(function(e){for(;;)switch(e.p=e.n){case 0:this.plugin=0,t=0;case 1:if(!(t<this.plugins.length)){e.n=6;break}if(n=this.plugins[t],!is(r=this.runOnRoot(n))){e.n=5;break}return e.p=2,e.n=3,r;case 3:e.n=5;break;case 4:throw e.p=4,d=e.v,this.handleError(d);case 5:t++,e.n=1;break;case 6:if(this.prepareVisitors(),!this.hasListener){e.n=21;break}i=this.result.root;case 7:if(i[Wa]){e.n=14;break}i[Wa]=!0,o=[as(i)];case 8:if(!(o.length>0)){e.n=13;break}if(!is(a=this.visitTick(o))){e.n=12;break}return e.p=9,e.n=10,a;case 10:e.n=12;break;case 11:throw e.p=11,f=e.v,l=o[o.length-1].node,this.handleError(f,l);case 12:e.n=8;break;case 13:e.n=7;break;case 14:if(!this.listeners.OnceExit){e.n=21;break}u=s(this.listeners.OnceExit),e.p=15,h=v().m(function e(){var t,n,r,o,a;return v().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t=b(c.value,2),n=t[0],r=t[1],m.result.lastPlugin=n,e.p=1,"document"!==i.type){e.n=3;break}return o=i.nodes.map(function(e){return r(e,m.helpers)}),e.n=2,Promise.all(o);case 2:e.n=4;break;case 3:return e.n=4,r(i,m.helpers);case 4:e.n=6;break;case 5:throw e.p=5,a=e.v,m.handleError(a);case 6:return e.a(2)}},e,null,[[1,5]])}),u.s();case 16:if((c=u.n()).done){e.n=18;break}return e.d(g(h()),17);case 17:e.n=16;break;case 18:e.n=20;break;case 19:e.p=19,p=e.v,u.e(p);case 20:return e.p=20,u.f(),e.f(20);case 21:return this.processed=!0,e.a(2,this.stringify())}},e,this,[[15,19,20,21],[9,11],[2,4]])})),function(){return ls.apply(this,arguments)})},{key:"runOnRoot",value:function(e){var t=this;this.result.lastPlugin=e;try{if("object"===C(e)&&e.Once){if("document"===this.result.root.type){var n=this.result.root.nodes.map(function(n){return e.Once(n,t.helpers)});return is(n[0])?Promise.all(n):n}return e.Once(this.result.root,this.helpers)}if("function"==typeof e)return e(this.result.root,this.result)}catch(e){throw this.handleError(e)}}},{key:"stringify",value:function(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();var e=this.result.opts,t=Ka;e.syntax&&(t=e.syntax.stringify),e.stringifier&&(t=e.stringifier),t.stringify&&(t=t.stringify);var n=new Ha(t,this.result.root,this.result.opts).generate();return this.result.css=n[0],this.result.map=n[1],this.result}},{key:"sync",value:function(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();var e,t=s(this.plugins);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(is(this.runOnRoot(n)))throw this.getAsyncError()}}catch(e){t.e(e)}finally{t.f()}if(this.prepareVisitors(),this.hasListener){for(var r=this.result.root;!r[Wa];)r[Wa]=!0,this.walkSync(r);if(this.listeners.OnceExit)if("document"===r.type){var i,o=s(r.nodes);try{for(o.s();!(i=o.n()).done;){var a=i.value;this.visitSync(this.listeners.OnceExit,a)}}catch(e){o.e(e)}finally{o.f()}}else this.visitSync(this.listeners.OnceExit,r)}return this.result}},{key:"then",value:function(e,t){return"production"!==process.env.NODE_ENV&&("from"in this.opts||Ja("Without `from` option PostCSS could generate wrong source map and will not find Browserslist config. Set it to CSS file path or to `undefined` to prevent this warning.")),this.async().then(e,t)}},{key:"toString",value:function(){return this.css}},{key:"visitSync",value:function(e,t){var n,r=s(e);try{for(r.s();!(n=r.n()).done;){var i=b(n.value,2),o=i[0],a=i[1];this.result.lastPlugin=o;var l=void 0;try{l=a(t,this.helpers)}catch(e){throw this.handleError(e,t.proxyOf)}if("root"!==t.type&&"document"!==t.type&&!t.parent)return!0;if(is(l))throw this.getAsyncError()}}catch(e){r.e(e)}finally{r.f()}}},{key:"visitTick",value:function(e){var t=e[e.length-1],n=t.node,r=t.visitors;if("root"===n.type||"document"===n.type||n.parent){if(r.length>0&&t.visitorIndex<r.length){var i=b(r[t.visitorIndex],2),o=i[0],a=i[1];t.visitorIndex+=1,t.visitorIndex===r.length&&(t.visitors=[],t.visitorIndex=0),this.result.lastPlugin=o;try{return a(n.toProxy(),this.helpers)}catch(e){throw this.handleError(e,n)}}if(0!==t.iterator){for(var s,l=t.iterator;s=n.nodes[n.indexes[l]];)if(n.indexes[l]+=1,!s[Wa])return s[Wa]=!0,void e.push(as(s));t.iterator=0,delete n.indexes[l]}for(var u=t.events;t.eventIndex<u.length;){var c=u[t.eventIndex];if(t.eventIndex+=1,0===c)return void(n.nodes&&n.nodes.length&&(n[Wa]=!0,t.iterator=n.getIterator()));if(this.listeners[c])return void(t.visitors=this.listeners[c])}e.pop()}else e.pop()}},{key:"walkSync",value:function(e){var t=this;e[Wa]=!0;var n,r=s(os(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0===i)e.nodes&&e.each(function(e){e[Wa]||t.walkSync(e)});else{var o=this.listeners[i];if(o&&this.visitSync(o,e.toProxy()))return}}}catch(e){r.e(e)}finally{r.f()}}},{key:"warnings",value:function(){return this.sync().warnings()}},{key:"content",get:function(){return this.stringify().content}},{key:"css",get:function(){return this.stringify().css}},{key:"map",get:function(){return this.stringify().map}},{key:"messages",get:function(){return this.sync().messages}},{key:"opts",get:function(){return this.result.opts}},{key:"processor",get:function(){return this.result.processor}},{key:"root",get:function(){return this.sync().root}},{key:Symbol.toStringTag,get:function(){return"LazyResult"}}]);cs.registerPostcss=function(e){us=e};var hs=cs;cs.default=cs,es.registerLazyResult(cs),Xa.registerLazyResult(cs);var ds=Co,fs=Ti,ps=Vo,ms=Va,vs=qo,ys=a(function e(t,n,r){var i;o(this,e),n=n.toString(),this.stringified=!1,this._processor=t,this._css=n,this._opts=r,this._map=void 0;var a=fs;this.result=new vs(this._processor,i,this._opts),this.result.css=n;var s=this;Object.defineProperty(this.result,"root",{get:function(){return s.root}});var l=new ds(a,i,this._opts,n);if(l.isMap()){var u=b(l.generate(),2),c=u[0],h=u[1];c&&(this.result.css=c),h&&(this.result.map=h)}else l.clearAnnotation(),this.result.css=l.css},[{key:"async",value:function(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}},{key:"catch",value:function(e){return this.async().catch(e)}},{key:"finally",value:function(e){return this.async().then(e,e)}},{key:"sync",value:function(){if(this.error)throw this.error;return this.result}},{key:"then",value:function(e,t){return"production"!==process.env.NODE_ENV&&("from"in this._opts||ps("Without `from` option PostCSS could generate wrong source map and will not find Browserslist config. Set it to CSS file path or to `undefined` to prevent this warning.")),this.async().then(e,t)}},{key:"toString",value:function(){return this._css}},{key:"warnings",value:function(){return[]}},{key:"content",get:function(){return this.result.css}},{key:"css",get:function(){return this.result.css}},{key:"map",get:function(){return this.result.map}},{key:"messages",get:function(){return[]}},{key:"opts",get:function(){return this.result.opts}},{key:"processor",get:function(){return this.result.processor}},{key:"root",get:function(){if(this._root)return this._root;var e,t=ms;try{e=t(this._css,this._opts)}catch(e){this.error=e}if(this.error)throw this.error;return this._root=e,e}},{key:Symbol.toStringTag,get:function(){return"NoWorkResult"}}]),gs=ys;ys.default=ys;var ws=gs,bs=hs,ks=Zo,Ss=xa,_s=a(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];o(this,e),this.version="8.4.38",this.plugins=this.normalize(t)},[{key:"normalize",value:function(e){var t,n=[],r=s(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(!0===i.postcss?i=i():i.postcss&&(i=i.postcss),"object"===C(i)&&Array.isArray(i.plugins))n=n.concat(i.plugins);else if("object"===C(i)&&i.postcssPlugin)n.push(i);else if("function"==typeof i)n.push(i);else{if("object"!==C(i)||!i.parse&&!i.stringify)throw new Error(i+" is not a PostCSS plugin");if("production"!==process.env.NODE_ENV)throw new Error("PostCSS syntaxes cannot be used as plugins. Instead, please use one of the syntax/parser/stringifier options as outlined in your PostCSS runner documentation.")}}}catch(e){r.e(e)}finally{r.f()}return n}},{key:"process",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.plugins.length||t.parser||t.stringifier||t.syntax?new bs(this,e,t):new ws(this,e,t)}},{key:"use",value:function(e){return this.plugins=this.plugins.concat(this.normalize([e])),this}}]),Cs=_s;_s.default=_s,Ss.registerProcessor(_s),ks.registerProcessor(_s);var Is=Zi,xs=Ji,Es=xo,Os=ka,As=fo,Rs=xa,Ms=Ta;function Ts(e,t){if(Array.isArray(e))return e.map(function(e){return Ts(e)});var n=e.inputs,r=m(e,M);if(n){t=[];var i,o=s(n);try{for(o.s();!(i=o.n()).done;){var a=p(p({},i.value),{},{__proto__:As.prototype});a.map&&(a.map=p(p({},a.map),{},{__proto__:xs.prototype})),t.push(a)}}catch(e){o.e(e)}finally{o.f()}}if(r.nodes&&(r.nodes=e.nodes.map(function(e){return Ts(e,t)})),r.source){var l=r.source,u=l.inputId,c=m(l,T);r.source=c,null!=u&&(r.source.input=t[u])}if("root"===r.type)return new Rs(r);if("decl"===r.type)return new Is(r);if("rule"===r.type)return new Ms(r);if("comment"===r.type)return new Es(r);if("atrule"===r.type)return new Os(r);throw new Error("Unknown node type: "+e.type)}var Ns=Ts;Ts.default=Ts;var Ls=Ii,Ds=Zi,Ps=hs,Fs=zo,zs=Cs,Us=Ti,js=Ns,Bs=Zo,Zs=Yo,Gs=xo,Vs=ka,Ws=qo,Ys=fo,Hs=Va,Ks=Oa,qs=Ta,Xs=xa,Js=ji;function $s(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 1===t.length&&Array.isArray(t[0])&&(t=t[0]),new zs(t)}$s.plugin=function(e,t){var n,r=!1;function i(){console&&console.warn&&!r&&(r=!0,console.warn(e+": postcss.plugin was deprecated. Migration guide:\nhttps://evilmartians.com/chronicles/postcss-8-plugin-migration"),process.env.LANG&&process.env.LANG.startsWith("cn")&&console.warn(e+": éé¢ postcss.plugin è¢«å¼ç¨. è¿ç§»æå:\nhttps://www.w3ctech.com/topic/2226"));var n=t.apply(void 0,arguments);return n.postcssPlugin=e,n.postcssVersion=(new zs).version,n}return Object.defineProperty(i,"postcss",{get:function(){return n||(n=i()),n}}),i.process=function(e,t,n){return $s([i(n)]).process(e,t)},i},$s.stringify=Us,$s.parse=Hs,$s.fromJSON=js,$s.list=Ks,$s.comment=function(e){return new Gs(e)},$s.atRule=function(e){return new Vs(e)},$s.decl=function(e){return new Ds(e)},$s.rule=function(e){return new qs(e)},$s.root=function(e){return new Xs(e)},$s.document=function(e){return new Bs(e)},$s.CssSyntaxError=Ls,$s.Declaration=Ds,$s.Container=Fs,$s.Processor=zs,$s.Document=Bs,$s.Comment=Gs,$s.Warning=Zs,$s.AtRule=Vs,$s.Result=Ws,$s.Input=Ys,$s.Rule=qs,$s.Root=Xs,$s.Node=Js,Ps.registerPostcss($s);var Qs=$s;$s.default=$s;var el=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}(Qs);el.stringify,el.fromJSON,el.plugin,el.parse,el.list,el.document,el.comment,el.atRule,el.rule,el.decl,el.root,el.CssSyntaxError,el.Declaration,el.Container,el.Processor,el.Document,el.Comment,el.Warning,el.AtRule,el.Result,el.Input,el.Rule,el.Root,el.Node;var tl=function(){function e(){o(this,e),vi(this,"parentElement",null),vi(this,"parentNode",null),vi(this,"ownerDocument"),vi(this,"firstChild",null),vi(this,"lastChild",null),vi(this,"previousSibling",null),vi(this,"nextSibling",null),vi(this,"ELEMENT_NODE",1),vi(this,"TEXT_NODE",3),vi(this,"nodeType"),vi(this,"nodeName"),vi(this,"RRNodeType")}return a(e,[{key:"childNodes",get:function(){for(var e=[],t=this.firstChild;t;)e.push(t),t=t.nextSibling;return e}},{key:"contains",value:function(t){if(!(t instanceof e))return!1;if(t.ownerDocument!==this.ownerDocument)return!1;if(t===this)return!0;for(;t.parentNode;){if(t.parentNode===this)return!0;t=t.parentNode}return!1}},{key:"appendChild",value:function(e){throw new Error("RRDomException: Failed to execute 'appendChild' on 'RRNode': This RRNode type does not support this method.")}},{key:"insertBefore",value:function(e,t){throw new Error("RRDomException: Failed to execute 'insertBefore' on 'RRNode': This RRNode type does not support this method.")}},{key:"removeChild",value:function(e){throw new Error("RRDomException: Failed to execute 'removeChild' on 'RRNode': This RRNode type does not support this method.")}},{key:"toString",value:function(){return"RRNode"}}])}(),nl={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},rl={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},il={};function ol(e){if(il[e])return il[e];var t=globalThis[e],n=t.prototype,r=e in nl?nl[e]:void 0,i=Boolean(r&&r.every(function(e){var t,r;return Boolean(null==(r=null==(t=Object.getOwnPropertyDescriptor(n,e))?void 0:t.get)?void 0:r.toString().includes("[native code]"))})),o=e in rl?rl[e]:void 0,a=Boolean(o&&o.every(function(e){var t;return"function"==typeof n[e]&&(null==(t=n[e])?void 0:t.toString().includes("[native code]"))}));if(i&&a&&!globalThis.Zone)return il[e]=t.prototype,t.prototype;try{var s=document.createElement("iframe");document.body.appendChild(s);var l=s.contentWindow;if(!l)return t.prototype;var u=l[e].prototype;return document.body.removeChild(s),u?il[e]=u:n}catch(e){return n}}var al={};function sl(e,t,n){var r,i="".concat(e,".").concat(String(n));if(al[i])return al[i].call(t);var o=ol(e),a=null==(r=Object.getOwnPropertyDescriptor(o,n))?void 0:r.get;return a?(al[i]=a,a.call(t)):t[n]}var ll={};function ul(e,t,n){var r="".concat(e,".").concat(String(n));if(ll[r])return ll[r].bind(t);var i=ol(e)[n];return"function"!=typeof i?t[n]:(ll[r]=i,i.bind(t))}function cl(){return ol("MutationObserver").constructor}var hl={childNodes:function(e){return sl("Node",e,"childNodes")},parentNode:function(e){return sl("Node",e,"parentNode")},parentElement:function(e){return sl("Node",e,"parentElement")},textContent:function(e){return sl("Node",e,"textContent")},contains:function(e,t){return ul("Node",e,"contains")(t)},getRootNode:function(e){return ul("Node",e,"getRootNode")()},host:function(e){return e&&"host"in e?sl("ShadowRoot",e,"host"):null},styleSheets:function(e){return e.styleSheets},shadowRoot:function(e){return e&&"shadowRoot"in e?sl("Element",e,"shadowRoot"):null},querySelector:function(e,t){return sl("Element",e,"querySelector")(t)},querySelectorAll:function(e,t){return sl("Element",e,"querySelectorAll")(t)},mutationObserver:cl};function dl(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document,r={capture:!0,passive:!0};return n.addEventListener(e,t,r),function(){return n.removeEventListener(e,t,r)}}var fl="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.",pl={map:{},getId:function(){return console.error(fl),-1},getNode:function(){return console.error(fl),null},removeNodeFromMap:function(){console.error(fl)},has:function(){return console.error(fl),!1},reset:function(){console.error(fl)}};function ml(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=null,i=0;return function(){for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];var l=Date.now();i||!1!==n.leading||(i=l);var u=t-(l-i),c=this;u<=0||u>t?(r&&(clearTimeout(r),r=null),i=l,e.apply(c,a)):r||!1===n.trailing||(r=setTimeout(function(){i=!1===n.leading?0:Date.now(),r=null,e.apply(c,a)},u))}}function vl(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:window,o=i.Object.getOwnPropertyDescriptor(e,t);return i.Object.defineProperty(e,t,r?n:{set:function(e){var t=this;setTimeout(function(){n.set.call(t,e)},0),o&&o.set&&o.set.call(this,e)}}),function(){return vl(e,t,o||{},!0)}}function yl(e,t,n){try{if(!(t in e))return function(){};var r=e[t],i=n(r);return"function"==typeof i&&(i.prototype=i.prototype||{},Object.defineProperties(i,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=i,function(){e[t]=r}}catch(e){return function(){}}}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(pl=new Proxy(pl,{get:function(e,t,n){return"map"===t&&console.error(fl),Reflect.get(e,t,n)}}));var gl=Date.now;function wl(e){var t,n,r,i,o=e.document;return{left:o.scrollingElement?o.scrollingElement.scrollLeft:void 0!==e.pageXOffset?e.pageXOffset:o.documentElement.scrollLeft||(null==o?void 0:o.body)&&(null==(t=hl.parentElement(o.body))?void 0:t.scrollLeft)||(null==(n=null==o?void 0:o.body)?void 0:n.scrollLeft)||0,top:o.scrollingElement?o.scrollingElement.scrollTop:void 0!==e.pageYOffset?e.pageYOffset:(null==o?void 0:o.documentElement.scrollTop)||(null==o?void 0:o.body)&&(null==(r=hl.parentElement(o.body))?void 0:r.scrollTop)||(null==(i=null==o?void 0:o.body)?void 0:i.scrollTop)||0}}function bl(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function kl(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function Sl(e){return e?e.nodeType===e.ELEMENT_NODE?e:hl.parentElement(e):null}function _l(e,t,n,r){if(!e)return!1;var i=Sl(e);if(!i)return!1;try{if("string"==typeof t){if(i.classList.contains(t))return!0;if(r&&null!==i.closest("."+t))return!0}else if(Ie(i,t,r))return!0}catch(e){}if(n){if(i.matches(n))return!0;if(r&&null!==i.closest(n))return!0}return!1}function Cl(e,t,n){return!("TITLE"!==e.tagName||!n.headTitleMutations)||-2===t.getId(e)}function Il(e,t){if(q(e))return!1;var n=t.getId(e);if(!t.has(n))return!0;var r=hl.parentNode(e);return(!r||r.nodeType!==e.DOCUMENT_NODE)&&(!r||Il(r,t))}function xl(e){return Boolean(e.changedTouches)}function El(e,t){return Boolean("IFRAME"===e.nodeName&&t.getMeta(e))}function Ol(e,t){return Boolean("LINK"===e.nodeName&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&"stylesheet"===e.getAttribute("rel")&&t.getMeta(e))}function Al(e){return!!e&&(e instanceof tl&&"shadowRoot"in e?Boolean(e.shadowRoot):Boolean(hl.shadowRoot(e)))}/[1-9][0-9]{12}/.test(Date.now().toString())||(gl=function(){return(new Date).getTime()});var Rl=a(function e(){o(this,e),D(this,"id",1),D(this,"styleIDMap",new WeakMap),D(this,"idStyleMap",new Map)},[{key:"getId",value:function(e){var t;return null!==(t=this.styleIDMap.get(e))&&void 0!==t?t:-1}},{key:"has",value:function(e){return this.styleIDMap.has(e)}},{key:"add",value:function(e,t){return this.has(e)?this.getId(e):(n=void 0===t?this.id++:t,this.styleIDMap.set(e,n),this.idStyleMap.set(n,e),n);var n}},{key:"getStyle",value:function(e){return this.idStyleMap.get(e)||null}},{key:"reset",value:function(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}},{key:"generateId",value:function(){return this.id++}}]);function Ml(e){var t,n=null;return"getRootNode"in e&&(null==(t=hl.getRootNode(e))?void 0:t.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&hl.host(hl.getRootNode(e))&&(n=hl.host(hl.getRootNode(e))),n}function Tl(e){var t=e.ownerDocument;if(!t)return!1;var n=function(e){for(var t,n=e;t=Ml(n);)n=t;return n}(e);return hl.contains(t,n)}function Nl(e){var t=e.ownerDocument;return!!t&&(hl.contains(t,e)||Tl(e))}var Ll,Dl,Pl,Fl,zl,Ul,jl=((Ll=jl||{})[Ll.DomContentLoaded=0]="DomContentLoaded",Ll[Ll.Load=1]="Load",Ll[Ll.FullSnapshot=2]="FullSnapshot",Ll[Ll.IncrementalSnapshot=3]="IncrementalSnapshot",Ll[Ll.Meta=4]="Meta",Ll[Ll.Custom=5]="Custom",Ll[Ll.Plugin=6]="Plugin",Ll),Bl=((Dl=Bl||{})[Dl.Mutation=0]="Mutation",Dl[Dl.MouseMove=1]="MouseMove",Dl[Dl.MouseInteraction=2]="MouseInteraction",Dl[Dl.Scroll=3]="Scroll",Dl[Dl.ViewportResize=4]="ViewportResize",Dl[Dl.Input=5]="Input",Dl[Dl.TouchMove=6]="TouchMove",Dl[Dl.MediaInteraction=7]="MediaInteraction",Dl[Dl.StyleSheetRule=8]="StyleSheetRule",Dl[Dl.CanvasMutation=9]="CanvasMutation",Dl[Dl.Font=10]="Font",Dl[Dl.Log=11]="Log",Dl[Dl.Drag=12]="Drag",Dl[Dl.StyleDeclaration=13]="StyleDeclaration",Dl[Dl.Selection=14]="Selection",Dl[Dl.AdoptedStyleSheet=15]="AdoptedStyleSheet",Dl[Dl.CustomElement=16]="CustomElement",Dl),Zl=((Pl=Zl||{})[Pl.MouseUp=0]="MouseUp",Pl[Pl.MouseDown=1]="MouseDown",Pl[Pl.Click=2]="Click",Pl[Pl.ContextMenu=3]="ContextMenu",Pl[Pl.DblClick=4]="DblClick",Pl[Pl.Focus=5]="Focus",Pl[Pl.Blur=6]="Blur",Pl[Pl.TouchStart=7]="TouchStart",Pl[Pl.TouchMove_Departed=8]="TouchMove_Departed",Pl[Pl.TouchEnd=9]="TouchEnd",Pl[Pl.TouchCancel=10]="TouchCancel",Pl),Gl=((Fl=Gl||{})[Fl.Mouse=0]="Mouse",Fl[Fl.Pen=1]="Pen",Fl[Fl.Touch=2]="Touch",Fl),Vl=((zl=Vl||{})[zl["2D"]=0]="2D",zl[zl.WebGL=1]="WebGL",zl[zl.WebGL2=2]="WebGL2",zl),Wl=((Ul=Wl||{})[Ul.Play=0]="Play",Ul[Ul.Pause=1]="Pause",Ul[Ul.Seeked=2]="Seeked",Ul[Ul.VolumeChange=3]="VolumeChange",Ul[Ul.RateChange=4]="RateChange",Ul),Yl=function(e){return e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e}(Yl||{});function Hl(e){return"__ln"in e}var Kl,ql=a(function e(){o(this,e),D(this,"length",0),D(this,"head",null),D(this,"tail",null)},[{key:"get",value:function(e){if(e>=this.length)throw new Error("Position outside of list range");for(var t=this.head,n=0;n<e;n++)t=(null==t?void 0:t.next)||null;return t}},{key:"addNode",value:function(e){var t={value:e,previous:null,next:null};if(e.__ln=t,e.previousSibling&&Hl(e.previousSibling)){var n=e.previousSibling.__ln.next;t.next=n,t.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=t,n&&(n.previous=t)}else if(e.nextSibling&&Hl(e.nextSibling)&&e.nextSibling.__ln.previous){var r=e.nextSibling.__ln.previous;t.previous=r,t.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=t,r&&(r.next=t)}else this.head&&(this.head.previous=t),t.next=this.head,this.head=t;null===t.next&&(this.tail=t),this.length++}},{key:"removeNode",value:function(e){var t=e.__ln;this.head&&(t.previous?(t.previous.next=t.next,t.next?t.next.previous=t.previous:this.tail=t.previous):(this.head=t.next,this.head?this.head.previous=null:this.tail=null),e.__ln&&delete e.__ln,this.length--)}}]),Xl=function(e,t){return"".concat(e,"@").concat(t)},Jl=a(function e(){var t=this;o(this,e),D(this,"frozen",!1),D(this,"locked",!1),D(this,"texts",[]),D(this,"attributes",[]),D(this,"attributeMap",new WeakMap),D(this,"removes",[]),D(this,"mapRemoves",[]),D(this,"movedMap",{}),D(this,"addedSet",new Set),D(this,"movedSet",new Set),D(this,"droppedSet",new Set),D(this,"removesSubTreeCache",new Set),D(this,"mutationCb"),D(this,"blockClass"),D(this,"blockSelector"),D(this,"maskTextClass"),D(this,"maskTextSelector"),D(this,"inlineStylesheet"),D(this,"maskInputOptions"),D(this,"maskTextFn"),D(this,"maskInputFn"),D(this,"keepIframeSrcFn"),D(this,"recordCanvas"),D(this,"inlineImages"),D(this,"slimDOMOptions"),D(this,"dataURLOptions"),D(this,"doc"),D(this,"mirror"),D(this,"iframeManager"),D(this,"stylesheetManager"),D(this,"shadowDomManager"),D(this,"canvasManager"),D(this,"processedNodeManager"),D(this,"unattachedDoc"),D(this,"processMutations",function(e){e.forEach(t.processMutation),t.emit()}),D(this,"emit",function(){if(!t.frozen&&!t.locked){for(var e=[],n=new Set,r=new ql,i=function(e){for(var n=e,r=-2;-2===r;)r=(n=n&&n.nextSibling)&&t.mirror.getId(n);return r},o=function(o){var a=hl.parentNode(o);if(a&&Nl(o)){var s=!1;if(o.nodeType===Node.TEXT_NODE){var l=a.tagName;if("TEXTAREA"===l)return;"STYLE"===l&&t.addedSet.has(a)&&(s=!0)}var u=q(a)?t.mirror.getId(Ml(o)):t.mirror.getId(a),c=i(o);if(-1===u||-1===c)return r.addNode(o);var h=Ae(o,{doc:t.doc,mirror:t.mirror,blockClass:t.blockClass,blockSelector:t.blockSelector,maskTextClass:t.maskTextClass,maskTextSelector:t.maskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:t.inlineStylesheet,maskInputOptions:t.maskInputOptions,maskTextFn:t.maskTextFn,maskInputFn:t.maskInputFn,slimDOMOptions:t.slimDOMOptions,dataURLOptions:t.dataURLOptions,recordCanvas:t.recordCanvas,inlineImages:t.inlineImages,onSerialize:function(e){El(e,t.mirror)&&t.iframeManager.addIframe(e),Ol(e,t.mirror)&&t.stylesheetManager.trackLinkElement(e),Al(o)&&t.shadowDomManager.addShadowRoot(hl.shadowRoot(o),t.doc)},onIframeLoad:function(e,n){t.iframeManager.attachIframe(e,n),t.shadowDomManager.observeAttachShadow(e)},onStylesheetLoad:function(e,n){t.stylesheetManager.attachLinkElement(e,n)},cssCaptured:s});h&&(e.push({parentId:u,nextId:c,node:h}),n.add(h.id))}};t.mapRemoves.length;)t.mirror.removeNodeFromMap(t.mapRemoves.shift());var a,l=s(t.movedSet);try{for(l.s();!(a=l.n()).done;){var u=a.value;Ql(t.removesSubTreeCache,u,t.mirror)&&!t.movedSet.has(hl.parentNode(u))||o(u)}}catch(e){l.e(e)}finally{l.f()}var c,h=s(t.addedSet);try{for(h.s();!(c=h.n()).done;){var d=c.value;eu(t.droppedSet,d)||Ql(t.removesSubTreeCache,d,t.mirror)?eu(t.movedSet,d)?o(d):t.droppedSet.add(d):o(d)}}catch(e){h.e(e)}finally{h.f()}for(var f=null;r.length;){var p=null;if(f){var m=t.mirror.getId(hl.parentNode(f.value)),v=i(f.value);-1!==m&&-1!==v&&(p=f)}if(!p)for(var y=r.tail;y;){var g=y;if(y=y.previous,g){var w=t.mirror.getId(hl.parentNode(g.value));if(-1===i(g.value))continue;if(-1!==w){p=g;break}var b=g.value,k=hl.parentNode(b);if(k&&k.nodeType===Node.DOCUMENT_FRAGMENT_NODE){var S=hl.host(k);if(-1!==t.mirror.getId(S)){p=g;break}}}}if(!p){for(;r.head;)r.removeNode(r.head.value);break}f=p.previous,r.removeNode(p.value),o(p.value)}var _={texts:t.texts.map(function(e){var n=e.node,r=hl.parentNode(n);return r&&"TEXTAREA"===r.tagName&&t.genTextAreaValueMutation(r),{id:t.mirror.getId(n),value:e.value}}).filter(function(e){return!n.has(e.id)}).filter(function(e){return t.mirror.has(e.id)}),attributes:t.attributes.map(function(e){var n=e.attributes;if("string"==typeof n.style){var r=JSON.stringify(e.styleDiff),i=JSON.stringify(e._unchangedStyles);r.length<n.style.length&&(r+i).split("var(").length===n.style.split("var(").length&&(n.style=e.styleDiff)}return{id:t.mirror.getId(e.node),attributes:n}}).filter(function(e){return!n.has(e.id)}).filter(function(e){return t.mirror.has(e.id)}),removes:t.removes,adds:e};(_.texts.length||_.attributes.length||_.removes.length||_.adds.length)&&(t.texts=[],t.attributes=[],t.attributeMap=new WeakMap,t.removes=[],t.addedSet=new Set,t.movedSet=new Set,t.droppedSet=new Set,t.removesSubTreeCache=new Set,t.movedMap={},t.mutationCb(_))}}),D(this,"genTextAreaValueMutation",function(e){var n=t.attributeMap.get(e);n||(n={node:e,attributes:{},styleDiff:{},_unchangedStyles:{}},t.attributes.push(n),t.attributeMap.set(e,n)),n.attributes.value=Array.from(hl.childNodes(e),function(e){return hl.textContent(e)||""}).join("")}),D(this,"processMutation",function(e){if(!Cl(e.target,t.mirror,t.slimDOMOptions))switch(e.type){case"characterData":var n=hl.textContent(e.target);_l(e.target,t.blockClass,t.blockSelector,!1)||n===e.oldValue||t.texts.push({value:xe(e.target,t.maskTextClass,t.maskTextSelector,!0)&&n?t.maskTextFn?t.maskTextFn(n,Sl(e.target)):n.replace(/[\S]/g,"*"):n,node:e.target});break;case"attributes":var r=e.target,i=e.attributeName,o=e.target.getAttribute(i);if("value"===i){var a=re(r);o=ee({element:r,maskInputOptions:t.maskInputOptions,tagName:r.tagName,type:a,value:o,maskInputFn:t.maskInputFn})}if(_l(e.target,t.blockClass,t.blockSelector,!1)||o===e.oldValue)return;var s=t.attributeMap.get(e.target);if("IFRAME"===r.tagName&&"src"===i&&!t.keepIframeSrcFn(o)){if(r.contentDocument)return;i="rr_src"}if(s||(s={node:e.target,attributes:{},styleDiff:{},_unchangedStyles:{}},t.attributes.push(s),t.attributeMap.set(e.target,s)),"type"===i&&"INPUT"===r.tagName&&"password"===(e.oldValue||"").toLowerCase()&&r.setAttribute("data-rr-is-password","true"),!Ce(r.tagName,i))if(s.attributes[i]=_e(t.doc,te(r.tagName),te(i),o),"style"===i){if(!t.unattachedDoc)try{t.unattachedDoc=document.implementation.createHTMLDocument()}catch(e){t.unattachedDoc=t.doc}var l=t.unattachedDoc.createElement("span");e.oldValue&&l.setAttribute("style",e.oldValue);for(var u=0,c=Array.from(r.style);u<c.length;u++){var h=c[u],d=r.style.getPropertyValue(h),f=r.style.getPropertyPriority(h);d!==l.style.getPropertyValue(h)||f!==l.style.getPropertyPriority(h)?s.styleDiff[h]=""===f?d:[d,f]:s._unchangedStyles[h]=[d,f]}for(var p=0,m=Array.from(l.style);p<m.length;p++){var v=m[p];""===r.style.getPropertyValue(v)&&(s.styleDiff[v]=!1)}}else"open"===i&&"DIALOG"===r.tagName&&(r.matches("dialog:modal")?s.attributes.rr_open_mode="modal":s.attributes.rr_open_mode="non-modal");break;case"childList":if(_l(e.target,t.blockClass,t.blockSelector,!0))return;if("TEXTAREA"===e.target.tagName)return void t.genTextAreaValueMutation(e.target);e.addedNodes.forEach(function(n){return t.genAdds(n,e.target)}),e.removedNodes.forEach(function(n){var r=t.mirror.getId(n),i=q(e.target)?t.mirror.getId(hl.host(e.target)):t.mirror.getId(e.target);_l(e.target,t.blockClass,t.blockSelector,!1)||Cl(n,t.mirror,t.slimDOMOptions)||!function(e,t){return-1!==t.getId(e)}(n,t.mirror)||(t.addedSet.has(n)?($l(t.addedSet,n),t.droppedSet.add(n)):t.addedSet.has(e.target)&&-1===r||Il(e.target,t.mirror)||(t.movedSet.has(n)&&t.movedMap[Xl(r,i)]?$l(t.movedSet,n):(t.removes.push({parentId:i,id:r,isShadow:!(!q(e.target)||!X(e.target))||void 0}),function(e,t){for(var n=[e];n.length;){var r=n.pop();t.has(r)||(t.add(r),hl.childNodes(r).forEach(function(e){return n.push(e)}))}}(n,t.removesSubTreeCache))),t.mapRemoves.push(n))})}}),D(this,"genAdds",function(e,n){if(!t.processedNodeManager.inOtherBuffer(e,t)&&!t.addedSet.has(e)&&!t.movedSet.has(e)){if(t.mirror.hasNode(e)){if(Cl(e,t.mirror,t.slimDOMOptions))return;t.movedSet.add(e);var r=null;n&&t.mirror.hasNode(n)&&(r=t.mirror.getId(n)),r&&-1!==r&&(t.movedMap[Xl(t.mirror.getId(e),r)]=!0)}else t.addedSet.add(e),t.droppedSet.delete(e);_l(e,t.blockClass,t.blockSelector,!1)||(hl.childNodes(e).forEach(function(e){return t.genAdds(e)}),Al(e)&&hl.childNodes(hl.shadowRoot(e)).forEach(function(n){t.processedNodeManager.add(n,t),t.genAdds(n,e)}))}})},[{key:"init",value:function(e){var t=this;["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(function(n){t[n]=e[n]})}},{key:"freeze",value:function(){this.frozen=!0,this.canvasManager.freeze()}},{key:"unfreeze",value:function(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}},{key:"isFrozen",value:function(){return this.frozen}},{key:"lock",value:function(){this.locked=!0,this.canvasManager.lock()}},{key:"unlock",value:function(){this.locked=!1,this.canvasManager.unlock(),this.emit()}},{key:"reset",value:function(){this.shadowDomManager.reset(),this.canvasManager.reset()}}]);function $l(e,t){e.delete(t),hl.childNodes(t).forEach(function(t){return $l(e,t)})}function Ql(e,t,n){return 0!==e.size&&function(e,t){var n=hl.parentNode(t);return!!n&&e.has(n)}(e,t)}function eu(e,t){return 0!==e.size&&tu(e,t)}function tu(e,t){var n=hl.parentNode(t);return!!n&&(!!e.has(n)||tu(e,n))}var nu=function(e){if(!Kl)return e;return function(){try{return e.apply(void 0,arguments)}catch(e){if(Kl&&!0===Kl(e))return;throw e}}},ru=[];function iu(e){try{if("composedPath"in e){var t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch(e){}return e&&e.target}function ou(e,t){var n=new Jl;ru.push(n),n.init(e);var r=new(cl())(nu(n.processMutations.bind(n)));return r.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),r}function au(e){var t=e.mouseInteractionCb,n=e.doc,r=e.mirror,i=e.blockClass,o=e.blockSelector,a=e.sampling;if(!1===a.mouseInteraction)return function(){};var s=!0===a.mouseInteraction||void 0===a.mouseInteraction?{}:a.mouseInteraction,l=[],u=null;return Object.keys(Zl).filter(function(e){return Number.isNaN(Number(e))&&!e.endsWith("_Departed")&&!1!==s[e]}).forEach(function(e){var a=te(e),s=function(e){return function(n){var a=iu(n);if(!_l(a,i,o,!0)){var s=null,l=e;if("pointerType"in n){switch(n.pointerType){case"mouse":s=Gl.Mouse;break;case"touch":s=Gl.Touch;break;case"pen":s=Gl.Pen}s===Gl.Touch?Zl[e]===Zl.MouseDown?l="TouchStart":Zl[e]===Zl.MouseUp&&(l="TouchEnd"):Gl.Pen}else xl(n)&&(s=Gl.Touch);null!==s?(u=s,(l.startsWith("Touch")&&s===Gl.Touch||l.startsWith("Mouse")&&s===Gl.Mouse)&&(s=null)):Zl[e]===Zl.Click&&(s=u,u=null);var c=xl(n)?n.changedTouches[0]:n;if(c){var h=r.getId(a),d=c.clientX,f=c.clientY;nu(t)(p({type:Zl[l],id:h,x:d,y:f},null!==s&&{pointerType:s}))}}}}(e);if(window.PointerEvent)switch(Zl[e]){case Zl.MouseDown:case Zl.MouseUp:a=a.replace("mouse","pointer");break;case Zl.TouchStart:case Zl.TouchEnd:return}l.push(dl(a,s,n))}),nu(function(){l.forEach(function(e){return e()})})}function su(e){var t=e.scrollCb,n=e.doc,r=e.mirror,i=e.blockClass,o=e.blockSelector,a=e.sampling;return dl("scroll",nu(ml(nu(function(e){var a=iu(e);if(a&&!_l(a,i,o,!0)){var s=r.getId(a);if(a===n&&n.defaultView){var l=wl(n.defaultView);t({id:s,x:l.left,y:l.top})}else t({id:s,x:a.scrollLeft,y:a.scrollTop})}}),a.scroll||100)),n)}var lu=["INPUT","TEXTAREA","SELECT"],uu=new WeakMap;function cu(e){return function(e,t){if(pu("CSSGroupingRule")&&e.parentRule instanceof CSSGroupingRule||pu("CSSMediaRule")&&e.parentRule instanceof CSSMediaRule||pu("CSSSupportsRule")&&e.parentRule instanceof CSSSupportsRule||pu("CSSConditionRule")&&e.parentRule instanceof CSSConditionRule){var n=Array.from(e.parentRule.cssRules).indexOf(e);t.unshift(n)}else if(e.parentStyleSheet){var r=Array.from(e.parentStyleSheet.cssRules).indexOf(e);t.unshift(r)}return t}(e,[])}function hu(e,t,n){var r,i;return e?(e.ownerNode?r=t.getId(e.ownerNode):i=n.getId(e),{styleId:i,id:r}):{}}function du(e,t){var n,r,i,o=e.mirror,a=e.stylesheetManager,s=null;s="#document"===t.nodeName?o.getId(t):o.getId(hl.host(t));var l="#document"===t.nodeName?null==(n=t.defaultView)?void 0:n.Document:null==(i=null==(r=t.ownerDocument)?void 0:r.defaultView)?void 0:i.ShadowRoot,u=(null==l?void 0:l.prototype)?Object.getOwnPropertyDescriptor(null==l?void 0:l.prototype,"adoptedStyleSheets"):void 0;return null!==s&&-1!==s&&l&&u?(Object.defineProperty(t,"adoptedStyleSheets",{configurable:u.configurable,enumerable:u.enumerable,get:function(){var e;return null==(e=u.get)?void 0:e.call(this)},set:function(e){var t,n=null==(t=u.set)?void 0:t.call(this,e);if(null!==s&&-1!==s)try{a.adoptStyleSheets(e,s)}catch(e){}return n}}),nu(function(){Object.defineProperty(t,"adoptedStyleSheets",{configurable:u.configurable,enumerable:u.enumerable,get:u.get,set:u.set})})):function(){}}function fu(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.doc.defaultView;if(!r)return function(){};!function(e,t){var n=e.mutationCb,r=e.mousemoveCb,i=e.mouseInteractionCb,o=e.scrollCb,a=e.viewportResizeCb,s=e.inputCb,l=e.mediaInteractionCb,u=e.styleSheetRuleCb,c=e.styleDeclarationCb,h=e.canvasMutationCb,d=e.fontCb,f=e.selectionCb,p=e.customElementCb;e.mutationCb=function(){t.mutation&&t.mutation.apply(t,arguments),n.apply(void 0,arguments)},e.mousemoveCb=function(){t.mousemove&&t.mousemove.apply(t,arguments),r.apply(void 0,arguments)},e.mouseInteractionCb=function(){t.mouseInteraction&&t.mouseInteraction.apply(t,arguments),i.apply(void 0,arguments)},e.scrollCb=function(){t.scroll&&t.scroll.apply(t,arguments),o.apply(void 0,arguments)},e.viewportResizeCb=function(){t.viewportResize&&t.viewportResize.apply(t,arguments),a.apply(void 0,arguments)},e.inputCb=function(){t.input&&t.input.apply(t,arguments),s.apply(void 0,arguments)},e.mediaInteractionCb=function(){t.mediaInteaction&&t.mediaInteaction.apply(t,arguments),l.apply(void 0,arguments)},e.styleSheetRuleCb=function(){t.styleSheetRule&&t.styleSheetRule.apply(t,arguments),u.apply(void 0,arguments)},e.styleDeclarationCb=function(){t.styleDeclaration&&t.styleDeclaration.apply(t,arguments),c.apply(void 0,arguments)},e.canvasMutationCb=function(){t.canvasMutation&&t.canvasMutation.apply(t,arguments),h.apply(void 0,arguments)},e.fontCb=function(){t.font&&t.font.apply(t,arguments),d.apply(void 0,arguments)},e.selectionCb=function(){t.selection&&t.selection.apply(t,arguments),f.apply(void 0,arguments)},e.customElementCb=function(){t.customElement&&t.customElement.apply(t,arguments),p.apply(void 0,arguments)}}(e,n),e.recordDOM&&(t=ou(e,e.doc));var i,o,a,l,u,c,h,d,f,m,v,y,g,w,k=function(e){var t=e.mousemoveCb,n=e.sampling,r=e.doc,i=e.mirror;if(!1===n.mousemove)return function(){};var o,a="number"==typeof n.mousemove?n.mousemove:50,s="number"==typeof n.mousemoveCallback?n.mousemoveCallback:500,l=[],u=ml(nu(function(e){var n=Date.now()-o;t(l.map(function(e){return e.timeOffset-=n,e}),e),l=[],o=null}),s),c=nu(ml(nu(function(e){var t=iu(e),n=xl(e)?e.changedTouches[0]:e,r=n.clientX,a=n.clientY;o||(o=gl()),l.push({x:r,y:a,id:i.getId(t),timeOffset:gl()-o}),u("undefined"!=typeof DragEvent&&e instanceof DragEvent?Bl.Drag:e instanceof MouseEvent?Bl.MouseMove:Bl.TouchMove)}),a,{trailing:!1})),h=[dl("mousemove",c,r),dl("touchmove",c,r),dl("drag",c,r)];return nu(function(){h.forEach(function(e){return e()})})}(e),_=au(e),C=su(e),I=(i={win:r},o=e.viewportResizeCb,a=i.win,l=-1,u=-1,dl("resize",nu(ml(nu(function(){var e=bl(),t=kl();l===e&&u===t||(o({width:Number(t),height:Number(e)}),l=e,u=t)}),200)),a)),x=function(e){var t=e.inputCb,n=e.doc,r=e.mirror,i=e.blockClass,o=e.blockSelector,a=e.ignoreClass,s=e.ignoreSelector,l=e.maskInputOptions,u=e.maskInputFn,c=e.sampling,h=e.userTriggeredOnInput;function d(e){var t=iu(e),r=e.isTrusted,c=t&&t.tagName;if(t&&"OPTION"===c&&(t=hl.parentElement(t)),t&&c&&!(lu.indexOf(c)<0)&&!_l(t,i,o,!0)&&!(t.classList.contains(a)||s&&t.matches(s))){var d=t.value,p=!1,m=re(t)||"";"radio"===m||"checkbox"===m?p=t.checked:(l[c.toLowerCase()]||l[m])&&(d=ee({element:t,maskInputOptions:l,tagName:c,type:m,value:d,maskInputFn:u})),f(t,h?{text:d,isChecked:p,userTriggered:r}:{text:d,isChecked:p});var v=t.name;"radio"===m&&v&&p&&n.querySelectorAll('input[type="radio"][name="'.concat(v,'"]')).forEach(function(e){if(e!==t){var n=e.value;f(e,h?{text:n,isChecked:!p,userTriggered:!1}:{text:n,isChecked:!p})}})}}function f(e,n){var i=uu.get(e);if(!i||i.text!==n.text||i.isChecked!==n.isChecked){uu.set(e,n);var o=r.getId(e);nu(t)(p(p({},n),{},{id:o}))}}var m=("last"===c.input?["change"]:["input","change"]).map(function(e){return dl(e,nu(d),n)}),v=n.defaultView;if(!v)return function(){m.forEach(function(e){return e()})};var y=v.Object.getOwnPropertyDescriptor(v.HTMLInputElement.prototype,"value"),g=[[v.HTMLInputElement.prototype,"value"],[v.HTMLInputElement.prototype,"checked"],[v.HTMLSelectElement.prototype,"value"],[v.HTMLTextAreaElement.prototype,"value"],[v.HTMLSelectElement.prototype,"selectedIndex"],[v.HTMLOptionElement.prototype,"selected"]];return y&&y.set&&m.push.apply(m,S(g.map(function(e){return vl(e[0],e[1],{set:function(){nu(d)({target:this,isTrusted:!1})}},!1,v)}))),nu(function(){m.forEach(function(e){return e()})})}(e),E=(h=(c=e).mediaInteractionCb,d=c.blockClass,f=c.blockSelector,m=c.mirror,v=c.sampling,y=c.doc,g=nu(function(e){return ml(nu(function(t){var n=iu(t);if(n&&!_l(n,d,f,!0)){var r=n.currentTime,i=n.volume,o=n.muted,a=n.playbackRate,s=n.loop;h({type:e,id:m.getId(n),currentTime:r,volume:i,muted:o,playbackRate:a,loop:s})}}),v.media||500)}),w=[dl("play",g(Wl.Play),y),dl("pause",g(Wl.Pause),y),dl("seeked",g(Wl.Seeked),y),dl("volumechange",g(Wl.VolumeChange),y),dl("ratechange",g(Wl.RateChange),y)],nu(function(){w.forEach(function(e){return e()})})),O=function(){},A=function(){},R=function(){},M=function(){};e.recordDOM&&(O=function(e,t){var n=e.styleSheetRuleCb,r=e.mirror,i=e.stylesheetManager,o=t.win;if(!o.CSSStyleSheet||!o.CSSStyleSheet.prototype)return function(){};var a=o.CSSStyleSheet.prototype.insertRule;o.CSSStyleSheet.prototype.insertRule=new Proxy(a,{apply:nu(function(e,t,o){var a=b(o,2),s=a[0],l=a[1],u=hu(t,r,i.styleMirror),c=u.id,h=u.styleId;return(c&&-1!==c||h&&-1!==h)&&n({id:c,styleId:h,adds:[{rule:s,index:l}]}),e.apply(t,o)})}),o.CSSStyleSheet.prototype.addRule=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.cssRules.length,r="".concat(e," { ").concat(t," }");return o.CSSStyleSheet.prototype.insertRule.apply(this,[r,n])};var s,l,u=o.CSSStyleSheet.prototype.deleteRule;o.CSSStyleSheet.prototype.deleteRule=new Proxy(u,{apply:nu(function(e,t,o){var a=b(o,1)[0],s=hu(t,r,i.styleMirror),l=s.id,u=s.styleId;return(l&&-1!==l||u&&-1!==u)&&n({id:l,styleId:u,removes:[{index:a}]}),e.apply(t,o)})}),o.CSSStyleSheet.prototype.removeRule=function(e){return o.CSSStyleSheet.prototype.deleteRule.apply(this,[e])},o.CSSStyleSheet.prototype.replace&&(s=o.CSSStyleSheet.prototype.replace,o.CSSStyleSheet.prototype.replace=new Proxy(s,{apply:nu(function(e,t,o){var a=b(o,1)[0],s=hu(t,r,i.styleMirror),l=s.id,u=s.styleId;return(l&&-1!==l||u&&-1!==u)&&n({id:l,styleId:u,replace:a}),e.apply(t,o)})})),o.CSSStyleSheet.prototype.replaceSync&&(l=o.CSSStyleSheet.prototype.replaceSync,o.CSSStyleSheet.prototype.replaceSync=new Proxy(l,{apply:nu(function(e,t,o){var a=b(o,1)[0],s=hu(t,r,i.styleMirror),l=s.id,u=s.styleId;return(l&&-1!==l||u&&-1!==u)&&n({id:l,styleId:u,replaceSync:a}),e.apply(t,o)})}));var c={};mu("CSSGroupingRule")?c.CSSGroupingRule=o.CSSGroupingRule:(mu("CSSMediaRule")&&(c.CSSMediaRule=o.CSSMediaRule),mu("CSSConditionRule")&&(c.CSSConditionRule=o.CSSConditionRule),mu("CSSSupportsRule")&&(c.CSSSupportsRule=o.CSSSupportsRule));var h={};return Object.entries(c).forEach(function(e){var t=b(e,2),o=t[0],a=t[1];h[o]={insertRule:a.prototype.insertRule,deleteRule:a.prototype.deleteRule},a.prototype.insertRule=new Proxy(h[o].insertRule,{apply:nu(function(e,t,o){var a=b(o,2),s=a[0],l=a[1],u=hu(t.parentStyleSheet,r,i.styleMirror),c=u.id,h=u.styleId;return(c&&-1!==c||h&&-1!==h)&&n({id:c,styleId:h,adds:[{rule:s,index:[].concat(S(cu(t)),[l||0])}]}),e.apply(t,o)})}),a.prototype.deleteRule=new Proxy(h[o].deleteRule,{apply:nu(function(e,t,o){var a=b(o,1)[0],s=hu(t.parentStyleSheet,r,i.styleMirror),l=s.id,u=s.styleId;return(l&&-1!==l||u&&-1!==u)&&n({id:l,styleId:u,removes:[{index:[].concat(S(cu(t)),[a])}]}),e.apply(t,o)})})}),nu(function(){o.CSSStyleSheet.prototype.insertRule=a,o.CSSStyleSheet.prototype.deleteRule=u,s&&(o.CSSStyleSheet.prototype.replace=s),l&&(o.CSSStyleSheet.prototype.replaceSync=l),Object.entries(c).forEach(function(e){var t=b(e,2),n=t[0],r=t[1];r.prototype.insertRule=h[n].insertRule,r.prototype.deleteRule=h[n].deleteRule})})}(e,{win:r}),A=du(e,e.doc),R=function(e,t){var n=e.styleDeclarationCb,r=e.mirror,i=e.ignoreCSSAttributes,o=e.stylesheetManager,a=t.win,s=a.CSSStyleDeclaration.prototype.setProperty;a.CSSStyleDeclaration.prototype.setProperty=new Proxy(s,{apply:nu(function(e,t,a){var l,u=b(a,3),c=u[0],h=u[1],d=u[2];if(i.has(c))return s.apply(t,[c,h,d]);var f=hu(null==(l=t.parentRule)?void 0:l.parentStyleSheet,r,o.styleMirror),p=f.id,m=f.styleId;return(p&&-1!==p||m&&-1!==m)&&n({id:p,styleId:m,set:{property:c,value:h,priority:d},index:cu(t.parentRule)}),e.apply(t,a)})});var l=a.CSSStyleDeclaration.prototype.removeProperty;return a.CSSStyleDeclaration.prototype.removeProperty=new Proxy(l,{apply:nu(function(e,t,a){var s,u=b(a,1)[0];if(i.has(u))return l.apply(t,[u]);var c=hu(null==(s=t.parentRule)?void 0:s.parentStyleSheet,r,o.styleMirror),h=c.id,d=c.styleId;return(h&&-1!==h||d&&-1!==d)&&n({id:h,styleId:d,remove:{property:u},index:cu(t.parentRule)}),e.apply(t,a)})}),nu(function(){a.CSSStyleDeclaration.prototype.setProperty=s,a.CSSStyleDeclaration.prototype.removeProperty=l})}(e,{win:r}),e.collectFonts&&(M=function(e){var t=e.fontCb,n=e.doc,r=n.defaultView;if(!r)return function(){};var i=[],o=new WeakMap,a=r.FontFace;r.FontFace=function(e,t,n){var r=new a(e,t,n);return o.set(r,{family:e,buffer:"string"!=typeof t,descriptors:n,fontSource:"string"==typeof t?t:JSON.stringify(Array.from(new Uint8Array(t)))}),r};var s=yl(n.fonts,"add",function(e){return function(n){return setTimeout(nu(function(){var e=o.get(n);e&&(t(e),o.delete(n))}),0),e.apply(this,[n])}});return i.push(function(){r.FontFace=a}),i.push(s),nu(function(){i.forEach(function(e){return e()})})}(e)));var T,N=function(e){var t=e.doc,n=e.mirror,r=e.blockClass,i=e.blockSelector,o=e.selectionCb,a=!0,s=nu(function(){var e=t.getSelection();if(!(!e||a&&(null==e?void 0:e.isCollapsed))){a=e.isCollapsed||!1;for(var s=[],l=e.rangeCount||0,u=0;u<l;u++){var c=e.getRangeAt(u),h=c.startContainer,d=c.startOffset,f=c.endContainer,p=c.endOffset;_l(h,r,i,!0)||_l(f,r,i,!0)||s.push({start:n.getId(h),startOffset:d,end:n.getId(f),endOffset:p})}o({ranges:s})}});return s(),dl("selectionchange",s)}(e),L=function(e){var t=e.doc,n=e.customElementCb,r=t.defaultView;return r&&r.customElements?yl(r.customElements,"define",function(e){return function(t,r,i){try{n({define:{name:t}})}catch(e){console.warn("Custom element callback failed for ".concat(t))}return e.apply(this,[t,r,i])}}):function(){}}(e),D=[],P=s(e.plugins);try{for(P.s();!(T=P.n()).done;){var F=T.value;D.push(F.observer(F.callback,r,F.options))}}catch(e){P.e(e)}finally{P.f()}return nu(function(){ru.forEach(function(e){return e.reset()}),null==t||t.disconnect(),k(),_(),C(),I(),x(),E(),O(),A(),R(),M(),N(),L(),D.forEach(function(e){return e()})})}function pu(e){return void 0!==window[e]}function mu(e){return Boolean(void 0!==window[e]&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}for(var vu=a(function e(t){o(this,e),D(this,"iframeIdToRemoteIdMap",new WeakMap),D(this,"iframeRemoteIdToIdMap",new WeakMap),this.generateIdFn=t},[{key:"getId",value:function(e,t,n,r){var i=n||this.getIdToRemoteIdMap(e),o=r||this.getRemoteIdToIdMap(e),a=i.get(t);return a||(a=this.generateIdFn(),i.set(t,a),o.set(a,t)),a}},{key:"getIds",value:function(e,t){var n=this,r=this.getIdToRemoteIdMap(e),i=this.getRemoteIdToIdMap(e);return t.map(function(t){return n.getId(e,t,r,i)})}},{key:"getRemoteId",value:function(e,t,n){var r=n||this.getRemoteIdToIdMap(e);if("number"!=typeof t)return t;var i=r.get(t);return i||-1}},{key:"getRemoteIds",value:function(e,t){var n=this,r=this.getRemoteIdToIdMap(e);return t.map(function(t){return n.getRemoteId(e,t,r)})}},{key:"reset",value:function(e){if(!e)return this.iframeIdToRemoteIdMap=new WeakMap,void(this.iframeRemoteIdToIdMap=new WeakMap);this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}},{key:"getIdToRemoteIdMap",value:function(e){var t=this.iframeIdToRemoteIdMap.get(e);return t||(t=new Map,this.iframeIdToRemoteIdMap.set(e,t)),t}},{key:"getRemoteIdToIdMap",value:function(e){var t=this.iframeRemoteIdToIdMap.get(e);return t||(t=new Map,this.iframeRemoteIdToIdMap.set(e,t)),t}}]),yu=a(function e(t){o(this,e),D(this,"iframes",new WeakMap),D(this,"crossOriginIframeMap",new WeakMap),D(this,"crossOriginIframeMirror",new vu(ve)),D(this,"crossOriginIframeStyleMirror"),D(this,"crossOriginIframeRootIdMap",new WeakMap),D(this,"mirror"),D(this,"mutationCb"),D(this,"wrappedEmit"),D(this,"loadListener"),D(this,"stylesheetManager"),D(this,"recordCrossOriginIframes"),this.mutationCb=t.mutationCb,this.wrappedEmit=t.wrappedEmit,this.stylesheetManager=t.stylesheetManager,this.recordCrossOriginIframes=t.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new vu(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=t.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))},[{key:"addIframe",value:function(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}},{key:"addLoadListener",value:function(e){this.loadListener=e}},{key:"attachIframe",value:function(e,t){var n,r;this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:t}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),this.recordCrossOriginIframes&&(null==(n=e.contentWindow)||n.addEventListener("message",this.handleMessage.bind(this))),null==(r=this.loadListener)||r.call(this,e),e.contentDocument&&e.contentDocument.adoptedStyleSheets&&e.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(e.contentDocument.adoptedStyleSheets,this.mirror.getId(e.contentDocument))}},{key:"handleMessage",value:function(e){var t=e;if("rrweb"===t.data.type&&t.origin===t.data.origin&&e.source){var n=this.crossOriginIframeMap.get(e.source);if(n){var r=this.transformCrossOriginEvent(n,t.data.event);r&&this.wrappedEmit(r,t.data.isCheckout)}}}},{key:"transformCrossOriginEvent",value:function(e,t){var n,r=this;switch(t.type){case jl.FullSnapshot:this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(t.data.node,e);var i=t.data.node.id;return this.crossOriginIframeRootIdMap.set(e,i),this.patchRootIdOnNode(t.data.node,i),{timestamp:t.timestamp,type:jl.IncrementalSnapshot,data:{source:Bl.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:t.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}};case jl.Meta:case jl.Load:case jl.DomContentLoaded:return!1;case jl.Plugin:return t;case jl.Custom:return this.replaceIds(t.data.payload,e,["id","parentId","previousId","nextId"]),t;case jl.IncrementalSnapshot:switch(t.data.source){case Bl.Mutation:return t.data.adds.forEach(function(t){r.replaceIds(t,e,["parentId","nextId","previousId"]),r.replaceIdOnNode(t.node,e);var n=r.crossOriginIframeRootIdMap.get(e);n&&r.patchRootIdOnNode(t.node,n)}),t.data.removes.forEach(function(t){r.replaceIds(t,e,["parentId","id"])}),t.data.attributes.forEach(function(t){r.replaceIds(t,e,["id"])}),t.data.texts.forEach(function(t){r.replaceIds(t,e,["id"])}),t;case Bl.Drag:case Bl.TouchMove:case Bl.MouseMove:return t.data.positions.forEach(function(t){r.replaceIds(t,e,["id"])}),t;case Bl.ViewportResize:return!1;case Bl.MediaInteraction:case Bl.MouseInteraction:case Bl.Scroll:case Bl.CanvasMutation:case Bl.Input:return this.replaceIds(t.data,e,["id"]),t;case Bl.StyleSheetRule:case Bl.StyleDeclaration:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleId"]),t;case Bl.Font:return t;case Bl.Selection:return t.data.ranges.forEach(function(t){r.replaceIds(t,e,["start","end"])}),t;case Bl.AdoptedStyleSheet:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleIds"]),null==(n=t.data.styles)||n.forEach(function(t){r.replaceStyleIds(t,e,["styleId"])}),t}}return!1}},{key:"replace",value:function(e,t,n,r){var i,o=s(r);try{for(o.s();!(i=o.n()).done;){var a=i.value;(Array.isArray(t[a])||"number"==typeof t[a])&&(Array.isArray(t[a])?t[a]=e.getIds(n,t[a]):t[a]=e.getId(n,t[a]))}}catch(e){o.e(e)}finally{o.f()}return t}},{key:"replaceIds",value:function(e,t,n){return this.replace(this.crossOriginIframeMirror,e,t,n)}},{key:"replaceStyleIds",value:function(e,t,n){return this.replace(this.crossOriginIframeStyleMirror,e,t,n)}},{key:"replaceIdOnNode",value:function(e,t){var n=this;this.replaceIds(e,t,["id","rootId"]),"childNodes"in e&&e.childNodes.forEach(function(e){n.replaceIdOnNode(e,t)})}},{key:"patchRootIdOnNode",value:function(e,t){var n=this;e.type===Yl.Document||e.rootId||(e.rootId=t),"childNodes"in e&&e.childNodes.forEach(function(e){n.patchRootIdOnNode(e,t)})}}]),gu=a(function e(t){o(this,e),D(this,"shadowDoms",new WeakSet),D(this,"mutationCb"),D(this,"scrollCb"),D(this,"bypassOptions"),D(this,"mirror"),D(this,"restoreHandlers",[]),this.mutationCb=t.mutationCb,this.scrollCb=t.scrollCb,this.bypassOptions=t.bypassOptions,this.mirror=t.mirror,this.init()},[{key:"init",value:function(){this.reset(),this.patchAttachShadow(Element,document)}},{key:"addShadowRoot",value:function(e,t){var n=this;if(X(e)&&!this.shadowDoms.has(e)){this.shadowDoms.add(e);var r=ou(p(p({},this.bypassOptions),{},{doc:t,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),e);this.restoreHandlers.push(function(){return r.disconnect()}),this.restoreHandlers.push(su(p(p({},this.bypassOptions),{},{scrollCb:this.scrollCb,doc:e,mirror:this.mirror}))),setTimeout(function(){e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&n.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,n.mirror.getId(hl.host(e))),n.restoreHandlers.push(du({mirror:n.mirror,stylesheetManager:n.bypassOptions.stylesheetManager},e))},0)}}},{key:"observeAttachShadow",value:function(e){e.contentWindow&&e.contentDocument&&this.patchAttachShadow(e.contentWindow.Element,e.contentDocument)}},{key:"patchAttachShadow",value:function(e,t){var n=this;this.restoreHandlers.push(yl(e.prototype,"attachShadow",function(e){return function(r){var i=e.call(this,r),o=hl.shadowRoot(this);return o&&Nl(this)&&n.addShadowRoot(o,t),i}}))}},{key:"reset",value:function(){this.restoreHandlers.forEach(function(e){try{e()}catch(e){}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}]),wu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bu="undefined"==typeof Uint8Array?[]:new Uint8Array(256),ku=0;ku<64;ku++)bu[wu.charCodeAt(ku)]=ku;var Su=new Map;var _u=function(e,t,n){if(e&&(xu(e,t)||"object"===C(e))){var r=function(e,t){var n=Su.get(e);return n||(n=new Map,Su.set(e,n)),n.has(t)||n.set(t,[]),n.get(t)}(n,e.constructor.name),i=r.indexOf(e);return-1===i&&(i=r.length,r.push(e)),i}};function Cu(e,t,n){if(e instanceof Array)return e.map(function(e){return Cu(e,t,n)});if(null===e)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray)return{rr_type:e.constructor.name,args:[Object.values(e)]};if(e instanceof ArrayBuffer)return{rr_type:e.constructor.name,base64:function(e){var t,n=new Uint8Array(e),r=n.length,i="";for(t=0;t<r;t+=3)i+=wu[n[t]>>2],i+=wu[(3&n[t])<<4|n[t+1]>>4],i+=wu[(15&n[t+1])<<2|n[t+2]>>6],i+=wu[63&n[t+2]];return r%3==2?i=i.substring(0,i.length-1)+"=":r%3==1&&(i=i.substring(0,i.length-2)+"=="),i}(e)};if(e instanceof DataView)return{rr_type:e.constructor.name,args:[Cu(e.buffer,t,n),e.byteOffset,e.byteLength]};if(e instanceof HTMLImageElement)return{rr_type:e.constructor.name,src:e.src};if(e instanceof HTMLCanvasElement){return{rr_type:"HTMLImageElement",src:e.toDataURL()}}return e instanceof ImageData?{rr_type:e.constructor.name,args:[Cu(e.data,t,n),e.width,e.height]}:xu(e,t)||"object"===C(e)?{rr_type:e.constructor.name,index:_u(e,t,n)}:e}var Iu=function(e,t,n){return e.map(function(e){return Cu(e,t,n)})},xu=function(e,t){var n=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(function(e){return"function"==typeof t[e]});return Boolean(n.find(function(n){return e instanceof t[n]}))};function Eu(e,t,n,r){var i=[];try{var o=yl(e.HTMLCanvasElement.prototype,"getContext",function(e){return function(i){for(var o=arguments.length,a=new Array(o>1?o-1:0),s=1;s<o;s++)a[s-1]=arguments[s];if(!_l(this,t,n,!0)){var l=function(e){return"experimental-webgl"===e?"webgl":e}(i);if("__context"in this||(this.__context=l),r&&["webgl","webgl2"].includes(l))if(a[0]&&"object"===C(a[0])){var u=a[0];u.preserveDrawingBuffer||(u.preserveDrawingBuffer=!0)}else a.splice(0,1,{preserveDrawingBuffer:!0})}return e.apply(this,[i].concat(a))}});i.push(o)}catch(e){console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return function(){i.forEach(function(e){return e()})}}function Ou(e,t,n,r,i,o){var a,l=[],u=s(Object.getOwnPropertyNames(e));try{var c=function(){var s=a.value;if(["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(s))return 0;try{if("function"!=typeof e[s])return 0;var u=yl(e,s,function(e){return function(){for(var a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];var c=e.apply(this,l);if(_u(c,o,this),"tagName"in this.canvas&&!_l(this.canvas,r,i,!0)){var h=Iu(l,o,this),d={type:t,property:s,args:h};n(this.canvas,d)}return c}});l.push(u)}catch(r){var c=vl(e,s,{set:function(e){n(this.canvas,{type:t,property:s,args:[e],setter:!0})}});l.push(c)}};for(u.s();!(a=u.n()).done;)c()}catch(e){u.e(e)}finally{u.f()}return l}var Au,Ru="KGZ1bmN0aW9uKCkgewogICJ1c2Ugc3RyaWN0IjsKICB2YXIgY2hhcnMgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyI7CiAgdmFyIGxvb2t1cCA9IHR5cGVvZiBVaW50OEFycmF5ID09PSAidW5kZWZpbmVkIiA/IFtdIDogbmV3IFVpbnQ4QXJyYXkoMjU2KTsKICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYXJzLmxlbmd0aDsgaSsrKSB7CiAgICBsb29rdXBbY2hhcnMuY2hhckNvZGVBdChpKV0gPSBpOwogIH0KICB2YXIgZW5jb2RlID0gZnVuY3Rpb24oYXJyYXlidWZmZXIpIHsKICAgIHZhciBieXRlcyA9IG5ldyBVaW50OEFycmF5KGFycmF5YnVmZmVyKSwgaTIsIGxlbiA9IGJ5dGVzLmxlbmd0aCwgYmFzZTY0ID0gIiI7CiAgICBmb3IgKGkyID0gMDsgaTIgPCBsZW47IGkyICs9IDMpIHsKICAgICAgYmFzZTY0ICs9IGNoYXJzW2J5dGVzW2kyXSA+PiAyXTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMl0gJiAzKSA8PCA0IHwgYnl0ZXNbaTIgKyAxXSA+PiA0XTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMiArIDFdICYgMTUpIDw8IDIgfCBieXRlc1tpMiArIDJdID4+IDZdOwogICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaTIgKyAyXSAmIDYzXTsKICAgIH0KICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgIj0iOwogICAgfSBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgIj09IjsKICAgIH0KICAgIHJldHVybiBiYXNlNjQ7CiAgfTsKICBjb25zdCBsYXN0QmxvYk1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7CiAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKICBhc3luYyBmdW5jdGlvbiBnZXRUcmFuc3BhcmVudEJsb2JGb3Iod2lkdGgsIGhlaWdodCwgZGF0YVVSTE9wdGlvbnMpIHsKICAgIGNvbnN0IGlkID0gYCR7d2lkdGh9LSR7aGVpZ2h0fWA7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBpZiAodHJhbnNwYXJlbnRCbG9iTWFwLmhhcyhpZCkpIHJldHVybiB0cmFuc3BhcmVudEJsb2JNYXAuZ2V0KGlkKTsKICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsKICAgICAgb2Zmc2NyZWVuLmdldENvbnRleHQoIjJkIik7CiAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCBvZmZzY3JlZW4uY29udmVydFRvQmxvYihkYXRhVVJMT3B0aW9ucyk7CiAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0gYXdhaXQgYmxvYi5hcnJheUJ1ZmZlcigpOwogICAgICBjb25zdCBiYXNlNjQgPSBlbmNvZGUoYXJyYXlCdWZmZXIpOwogICAgICB0cmFuc3BhcmVudEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICByZXR1cm4gYmFzZTY0OwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuICIiOwogICAgfQogIH0KICBjb25zdCB3b3JrZXIgPSBzZWxmOwogIHdvcmtlci5vbm1lc3NhZ2UgPSBhc3luYyBmdW5jdGlvbihlKSB7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBjb25zdCB7IGlkLCBiaXRtYXAsIHdpZHRoLCBoZWlnaHQsIGRhdGFVUkxPcHRpb25zIH0gPSBlLmRhdGE7CiAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKAogICAgICAgIHdpZHRoLAogICAgICAgIGhlaWdodCwKICAgICAgICBkYXRhVVJMT3B0aW9ucwogICAgICApOwogICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOwogICAgICBjb25zdCBjdHggPSBvZmZzY3JlZW4uZ2V0Q29udGV4dCgiMmQiKTsKICAgICAgY3R4LmRyYXdJbWFnZShiaXRtYXAsIDAsIDApOwogICAgICBiaXRtYXAuY2xvc2UoKTsKICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IG9mZnNjcmVlbi5jb252ZXJ0VG9CbG9iKGRhdGFVUkxPcHRpb25zKTsKICAgICAgY29uc3QgdHlwZSA9IGJsb2IudHlwZTsKICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCBibG9iLmFycmF5QnVmZmVyKCk7CiAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7CiAgICAgIGlmICghbGFzdEJsb2JNYXAuaGFzKGlkKSAmJiBhd2FpdCB0cmFuc3BhcmVudEJhc2U2NCA9PT0gYmFzZTY0KSB7CiAgICAgICAgbGFzdEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICAgIHJldHVybiB3b3JrZXIucG9zdE1lc3NhZ2UoeyBpZCB9KTsKICAgICAgfQogICAgICBpZiAobGFzdEJsb2JNYXAuZ2V0KGlkKSA9PT0gYmFzZTY0KSByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQgfSk7CiAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7CiAgICAgICAgaWQsCiAgICAgICAgdHlwZSwKICAgICAgICBiYXNlNjQsCiAgICAgICAgd2lkdGgsCiAgICAgICAgaGVpZ2h0CiAgICAgIH0pOwogICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCB9KTsKICAgIH0KICB9Owp9KSgpOwovLyMgc291cmNlTWFwcGluZ1VSTD1pbWFnZS1iaXRtYXAtZGF0YS11cmwtd29ya2VyLUlKcEM3Z19iLmpzLm1hcAo=",Mu="undefined"!=typeof window&&window.Blob&&new Blob([(Au=Ru,Uint8Array.from(atob(Au),function(e){return e.charCodeAt(0)}))],{type:"text/javascript;charset=utf-8"});function Tu(e){var t;try{if(!(t=Mu&&(window.URL||window.webkitURL).createObjectURL(Mu)))throw"";var n=new Worker(t,{name:null==e?void 0:e.name});return n.addEventListener("error",function(){(window.URL||window.webkitURL).revokeObjectURL(t)}),n}catch(t){return new Worker("data:text/javascript;base64,"+Ru,{name:null==e?void 0:e.name})}finally{t&&(window.URL||window.webkitURL).revokeObjectURL(t)}}var Nu,Lu,Du,Pu=a(function e(t){var n=this;o(this,e),D(this,"pendingCanvasMutations",new Map),D(this,"rafStamps",{latestId:0,invokeId:null}),D(this,"mirror"),D(this,"mutationCb"),D(this,"resetObservers"),D(this,"frozen",!1),D(this,"locked",!1),D(this,"processMutation",function(e,t){!(n.rafStamps.invokeId&&n.rafStamps.latestId!==n.rafStamps.invokeId)&&n.rafStamps.invokeId||(n.rafStamps.invokeId=n.rafStamps.latestId),n.pendingCanvasMutations.has(e)||n.pendingCanvasMutations.set(e,[]),n.pendingCanvasMutations.get(e).push(t)});var r=t.sampling,i=void 0===r?"all":r,a=t.win,s=t.blockClass,l=t.blockSelector,u=t.recordCanvas,c=t.dataURLOptions;this.mutationCb=t.mutationCb,this.mirror=t.mirror,u&&"all"===i&&this.initCanvasMutationObserver(a,s,l),u&&"number"==typeof i&&this.initCanvasFPSObserver(i,a,s,l,{dataURLOptions:c})},[{key:"reset",value:function(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}},{key:"freeze",value:function(){this.frozen=!0}},{key:"unfreeze",value:function(){this.frozen=!1}},{key:"lock",value:function(){this.locked=!0}},{key:"unlock",value:function(){this.locked=!1}},{key:"initCanvasFPSObserver",value:function(e,t,n,i,o){var a=this,s=Eu(t,n,i,!0),l=new Map,u=new Tu;u.onmessage=function(e){var t=e.data.id;if(l.set(t,!1),"base64"in e.data){var n=e.data,r=n.base64,i=n.type,o=n.width,s=n.height;a.mutationCb({id:t,type:Vl["2D"],commands:[{property:"clearRect",args:[0,0,o,s]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:r}],type:i}]},0,0]}]})}};var c,h=1e3/e,d=0,f=function(e){var s,p;d&&e-d<h||(d=e,(p=[],t.document.querySelectorAll("canvas").forEach(function(e){_l(e,n,i,!0)||p.push(e)}),p).forEach((s=r(v().m(function e(t){var n,r,i,s;return v().w(function(e){for(;;)switch(e.n){case 0:if(r=a.mirror.getId(t),!l.get(r)){e.n=1;break}return e.a(2);case 1:if(0!==t.width&&0!==t.height){e.n=2;break}return e.a(2);case 2:return l.set(r,!0),["webgl","webgl2"].includes(t.__context)&&(i=t.getContext(t.__context),!1===(null==(n=null==i?void 0:i.getContextAttributes())?void 0:n.preserveDrawingBuffer)&&i.clear(i.COLOR_BUFFER_BIT)),e.n=3,createImageBitmap(t);case 3:s=e.v,u.postMessage({id:r,bitmap:s,width:t.width,height:t.height,dataURLOptions:o.dataURLOptions},[s]);case 4:return e.a(2)}},e)})),function(e){return s.apply(this,arguments)}))),c=requestAnimationFrame(f)};c=requestAnimationFrame(f),this.resetObservers=function(){s(),cancelAnimationFrame(c)}}},{key:"initCanvasMutationObserver",value:function(e,t,n){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();var r=Eu(e,t,n,!1),i=function(e,t,n,r){var i,o=[],a=s(Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype));try{var l=function(){var a=i.value;try{if("function"!=typeof t.CanvasRenderingContext2D.prototype[a])return 1;var s=yl(t.CanvasRenderingContext2D.prototype,a,function(i){return function(){for(var o=this,s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];return _l(this.canvas,n,r,!0)||setTimeout(function(){var n=Iu(l,t,o);e(o.canvas,{type:Vl["2D"],property:a,args:n})},0),i.apply(this,l)}});o.push(s)}catch(n){var l=vl(t.CanvasRenderingContext2D.prototype,a,{set:function(t){e(this.canvas,{type:Vl["2D"],property:a,args:[t],setter:!0})}});o.push(l)}};for(a.s();!(i=a.n()).done;)l()}catch(e){a.e(e)}finally{a.f()}return function(){o.forEach(function(e){return e()})}}(this.processMutation.bind(this),e,t,n),o=function(e,t,n,r){var i=[];return i.push.apply(i,S(Ou(t.WebGLRenderingContext.prototype,Vl.WebGL,e,n,r,t))),void 0!==t.WebGL2RenderingContext&&i.push.apply(i,S(Ou(t.WebGL2RenderingContext.prototype,Vl.WebGL2,e,n,r,t))),function(){i.forEach(function(e){return e()})}}(this.processMutation.bind(this),e,t,n);this.resetObservers=function(){r(),i(),o()}}},{key:"startPendingCanvasMutationFlusher",value:function(){var e=this;requestAnimationFrame(function(){return e.flushPendingCanvasMutations()})}},{key:"startRAFTimestamping",value:function(){var e=this,t=function(n){e.rafStamps.latestId=n,requestAnimationFrame(t)};requestAnimationFrame(t)}},{key:"flushPendingCanvasMutations",value:function(){var e=this;this.pendingCanvasMutations.forEach(function(t,n){var r=e.mirror.getId(n);e.flushPendingCanvasMutationFor(n,r)}),requestAnimationFrame(function(){return e.flushPendingCanvasMutations()})}},{key:"flushPendingCanvasMutationFor",value:function(e,t){if(!this.frozen&&!this.locked){var n=this.pendingCanvasMutations.get(e);if(n&&-1!==t){var r=n.map(function(e){return e.type,m(e,N)}),i=n[0].type;this.mutationCb({id:t,type:i,commands:r}),this.pendingCanvasMutations.delete(e)}}}}]),Fu=a(function e(t){o(this,e),D(this,"trackedLinkElements",new WeakSet),D(this,"mutationCb"),D(this,"adoptedStyleSheetCb"),D(this,"styleMirror",new Rl),this.mutationCb=t.mutationCb,this.adoptedStyleSheetCb=t.adoptedStyleSheetCb},[{key:"attachLinkElement",value:function(e,t){"_cssText"in t.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:t.id,attributes:t.attributes}]}),this.trackLinkElement(e)}},{key:"trackLinkElement",value:function(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}},{key:"adoptStyleSheets",value:function(e,t){var n=this;if(0!==e.length){var r,i={id:t,styleIds:[]},o=[],a=s(e);try{var l=function(){var e,t=r.value;n.styleMirror.has(t)?e=n.styleMirror.getId(t):(e=n.styleMirror.add(t),o.push({styleId:e,rules:Array.from(t.rules||CSSRule,function(e,n){return{rule:$(e,t.href),index:n}})})),i.styleIds.push(e)};for(a.s();!(r=a.n()).done;)l()}catch(e){a.e(e)}finally{a.f()}o.length>0&&(i.styles=o),this.adoptedStyleSheetCb(i)}}},{key:"reset",value:function(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}},{key:"trackStylesheetInLinkElement",value:function(e){}}]),zu=a(function e(){o(this,e),D(this,"nodeMap",new WeakMap),D(this,"active",!1)},[{key:"inOtherBuffer",value:function(e,t){var n=this.nodeMap.get(e);return n&&Array.from(n).some(function(e){return e!==t})}},{key:"add",value:function(e,t){var n=this;this.active||(this.active=!0,requestAnimationFrame(function(){n.nodeMap=new WeakMap,n.active=!1})),this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(t))}},{key:"destroy",value:function(){}}]),Uu=!1;try{if(2!==Array.from([1],function(e){return 2*e})[0]){var ju=document.createElement("iframe");document.body.appendChild(ju),Array.from=(null==(E=ju.contentWindow)?void 0:E.Array.from)||Array.from,document.body.removeChild(ju)}}catch(e){console.debug("Unable to override Array.from",e)}var Bu,Zu,Gu=new Q;function Vu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.emit,n=e.checkoutEveryNms,r=e.checkoutEveryNth,i=e.blockClass,o=void 0===i?"rr-block":i,a=e.blockSelector,l=void 0===a?null:a,u=e.ignoreClass,c=void 0===u?"rr-ignore":u,h=e.ignoreSelector,d=void 0===h?null:h,f=e.maskTextClass,m=void 0===f?"rr-mask":f,v=e.maskTextSelector,y=void 0===v?null:v,g=e.inlineStylesheet,w=void 0===g||g,b=e.maskAllInputs,k=e.maskInputOptions,S=e.slimDOMOptions,_=e.maskInputFn,C=e.maskTextFn,I=e.hooks,x=e.packFn,E=e.sampling,O=void 0===E?{}:E,A=e.dataURLOptions,R=void 0===A?{}:A,M=e.mousemoveWait,T=e.recordDOM,N=void 0===T||T,L=e.recordCanvas,D=void 0!==L&&L,P=e.recordCrossOriginIframes,F=void 0!==P&&P,z=e.recordAfter,U=void 0===z?"DOMContentLoaded"===e.recordAfter?e.recordAfter:"load":z,j=e.userTriggeredOnInput,B=void 0!==j&&j,Z=e.collectFonts,G=void 0!==Z&&Z,V=e.inlineImages,W=void 0!==V&&V,Y=e.plugins,H=e.keepIframeSrcFn,K=void 0===H?function(){return!1}:H,q=e.ignoreCSSAttributes,X=void 0===q?new Set([]):q,J=e.errorHandler;Kl=J;var $=!F||window.parent===window,ee=!1;if(!$)try{window.parent.document&&(ee=!1)}catch(e){ee=!0}if($&&!t)throw new Error("emit function is required");if(!$&&!ee)return function(){};void 0!==M&&void 0===O.mousemove&&(O.mousemove=M),Gu.reset();var te,ne=!0===b?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:void 0!==k?k:{password:!0},re=!0===S||"all"===S?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===S,headMetaDescKeywords:"all"===S,headTitleMutations:"all"===S}:S||{};!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach)}();var ie=0,oe=function(e){var t,n=s(Y||[]);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.eventProcessor&&(e=r.eventProcessor(e))}}catch(e){n.e(e)}finally{n.f()}return x&&!ee&&(e=x(e)),e};Nu=function(e,i){var o,a=e;if(a.timestamp=gl(),!(null==(o=ru[0])?void 0:o.isFrozen())||a.type===jl.FullSnapshot||a.type===jl.IncrementalSnapshot&&a.data.source===Bl.Mutation||ru.forEach(function(e){return e.unfreeze()}),$)null==t||t(oe(a),i);else if(ee){var s={type:"rrweb",event:oe(a),origin:window.location.origin,isCheckout:i};window.parent.postMessage(s,"*")}if(a.type===jl.FullSnapshot)te=a,ie=0;else if(a.type===jl.IncrementalSnapshot){if(a.data.source===Bl.Mutation&&a.data.isAttachIframe)return;ie++;var l=r&&ie>=r,u=n&&a.timestamp-te.timestamp>n;(l||u)&&Lu(!0)}};var ae,se=function(e){Nu({type:jl.IncrementalSnapshot,data:p({source:Bl.Mutation},e)})},le=function(e){return Nu({type:jl.IncrementalSnapshot,data:p({source:Bl.Scroll},e)})},ue=function(e){return Nu({type:jl.IncrementalSnapshot,data:p({source:Bl.CanvasMutation},e)})},ce=new Fu({mutationCb:se,adoptedStyleSheetCb:function(e){return Nu({type:jl.IncrementalSnapshot,data:p({source:Bl.AdoptedStyleSheet},e)})}}),he=new yu({mirror:Gu,mutationCb:se,stylesheetManager:ce,recordCrossOriginIframes:F,wrappedEmit:Nu}),de=s(Y||[]);try{for(de.s();!(ae=de.n()).done;){var fe=ae.value;fe.getMirror&&fe.getMirror({nodeMirror:Gu,crossOriginIframeMirror:he.crossOriginIframeMirror,crossOriginIframeStyleMirror:he.crossOriginIframeStyleMirror})}}catch(e){de.e(e)}finally{de.f()}var pe=new zu;Du=new Pu({recordCanvas:D,mutationCb:ue,win:window,blockClass:o,blockSelector:l,mirror:Gu,sampling:O.canvas,dataURLOptions:R});var me=new gu({mutationCb:se,scrollCb:le,bypassOptions:{blockClass:o,blockSelector:l,maskTextClass:m,maskTextSelector:y,inlineStylesheet:w,maskInputOptions:ne,dataURLOptions:R,maskTextFn:C,maskInputFn:_,recordCanvas:D,inlineImages:W,sampling:O,slimDOMOptions:re,iframeManager:he,stylesheetManager:ce,canvasManager:Du,keepIframeSrcFn:K,processedNodeManager:pe},mirror:Gu});Lu=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(N){Nu({type:jl.Meta,data:{href:window.location.href,width:kl(),height:bl()}},e),ce.reset(),me.init(),ru.forEach(function(e){return e.lock()});var t=function(e,t){var n=t||{},r=n.mirror,i=void 0===r?new Q:r,o=n.blockClass,a=void 0===o?"rr-block":o,s=n.blockSelector,l=void 0===s?null:s,u=n.maskTextClass,c=void 0===u?"rr-mask":u,h=n.maskTextSelector,d=void 0===h?null:h,f=n.inlineStylesheet,p=void 0===f||f,m=n.inlineImages,v=void 0!==m&&m,y=n.recordCanvas,g=void 0!==y&&y,w=n.maskAllInputs,b=void 0!==w&&w,k=n.maskTextFn,S=n.maskInputFn,_=n.slimDOM,C=void 0!==_&&_,I=n.dataURLOptions,x=n.preserveWhiteSpace,E=n.onSerialize,O=n.onIframeLoad,A=n.iframeLoadTimeout,R=n.onStylesheetLoad,M=n.stylesheetLoadTimeout,T=n.keepIframeSrcFn;return Ae(e,{doc:e,mirror:i,blockClass:a,blockSelector:l,maskTextClass:c,maskTextSelector:d,skipChild:!1,inlineStylesheet:p,maskInputOptions:!0===b?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:!1===b?{password:!0}:b,maskTextFn:k,maskInputFn:S,slimDOMOptions:!0===C||"all"===C?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===C,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===C?{}:C,dataURLOptions:I,inlineImages:v,recordCanvas:g,preserveWhiteSpace:x,onSerialize:E,onIframeLoad:O,iframeLoadTimeout:A,onStylesheetLoad:R,stylesheetLoadTimeout:M,keepIframeSrcFn:void 0===T?function(){return!1}:T,newlyAddedElement:!1})}(document,{mirror:Gu,blockClass:o,blockSelector:l,maskTextClass:m,maskTextSelector:y,inlineStylesheet:w,maskAllInputs:ne,maskTextFn:C,maskInputFn:_,slimDOM:re,dataURLOptions:R,recordCanvas:D,inlineImages:W,onSerialize:function(e){El(e,Gu)&&he.addIframe(e),Ol(e,Gu)&&ce.trackLinkElement(e),Al(e)&&me.addShadowRoot(hl.shadowRoot(e),document)},onIframeLoad:function(e,t){he.attachIframe(e,t),me.observeAttachShadow(e)},onStylesheetLoad:function(e,t){ce.attachLinkElement(e,t)},keepIframeSrcFn:K});if(!t)return console.warn("Failed to snapshot the document");Nu({type:jl.FullSnapshot,data:{node:t,initialOffset:wl(window)}},e),ru.forEach(function(e){return e.unlock()}),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&ce.adoptStyleSheets(document.adoptedStyleSheets,Gu.getId(document))}};try{var ve=[],ye=function(e){var t;return nu(fu)({mutationCb:se,mousemoveCb:function(e,t){return Nu({type:jl.IncrementalSnapshot,data:{source:t,positions:e}})},mouseInteractionCb:function(e){return Nu({type:jl.IncrementalSnapshot,data:p({source:Bl.MouseInteraction},e)})},scrollCb:le,viewportResizeCb:function(e){return Nu({type:jl.IncrementalSnapshot,data:p({source:Bl.ViewportResize},e)})},inputCb:function(e){return Nu({type:jl.IncrementalSnapshot,data:p({source:Bl.Input},e)})},mediaInteractionCb:function(e){return Nu({type:jl.IncrementalSnapshot,data:p({source:Bl.MediaInteraction},e)})},styleSheetRuleCb:function(e){return Nu({type:jl.IncrementalSnapshot,data:p({source:Bl.StyleSheetRule},e)})},styleDeclarationCb:function(e){return Nu({type:jl.IncrementalSnapshot,data:p({source:Bl.StyleDeclaration},e)})},canvasMutationCb:ue,fontCb:function(e){return Nu({type:jl.IncrementalSnapshot,data:p({source:Bl.Font},e)})},selectionCb:function(e){Nu({type:jl.IncrementalSnapshot,data:p({source:Bl.Selection},e)})},customElementCb:function(e){Nu({type:jl.IncrementalSnapshot,data:p({source:Bl.CustomElement},e)})},blockClass:o,ignoreClass:c,ignoreSelector:d,maskTextClass:m,maskTextSelector:y,maskInputOptions:ne,inlineStylesheet:w,sampling:O,recordDOM:N,recordCanvas:D,inlineImages:W,userTriggeredOnInput:B,collectFonts:G,doc:e,maskInputFn:_,maskTextFn:C,keepIframeSrcFn:K,blockSelector:l,slimDOMOptions:re,dataURLOptions:R,mirror:Gu,iframeManager:he,stylesheetManager:ce,shadowDomManager:me,processedNodeManager:pe,canvasManager:Du,ignoreCSSAttributes:X,plugins:(null==(t=null==Y?void 0:Y.filter(function(e){return e.observer}))?void 0:t.map(function(e){return{observer:e.observer,options:e.options,callback:function(t){return Nu({type:jl.Plugin,data:{plugin:e.name,payload:t}})}}}))||[]},I)};he.addLoadListener(function(e){try{ve.push(ye(e.contentDocument))}catch(e){console.warn(e)}});var ge=function(){Lu(),ve.push(ye(document)),Uu=!0};return"interactive"===document.readyState||"complete"===document.readyState?ge():(ve.push(dl("DOMContentLoaded",function(){Nu({type:jl.DomContentLoaded,data:{}}),"DOMContentLoaded"===U&&ge()})),ve.push(dl("load",function(){Nu({type:jl.Load,data:{}}),"load"===U&&ge()},window))),function(){ve.forEach(function(e){return e()}),pe.destroy(),Uu=!1,Kl=void 0}}catch(e){console.warn(e)}}Vu.addCustomEvent=function(e,t){if(!Uu)throw new Error("please add custom event after start recording");Nu({type:jl.Custom,data:{tag:e,payload:t}})},Vu.freezePage=function(){ru.forEach(function(e){return e.freeze()})},Vu.takeFullSnapshot=function(e){if(!Uu)throw new Error("please take full snapshot after start recording");Lu(e)},Vu.mirror=Gu,(Zu=Bu||(Bu={}))[Zu.NotStarted=0]="NotStarted",Zu[Zu.Running=1]="Running",Zu[Zu.Stopped=2]="Stopped";var Wu,Yu;"function"==typeof AbortController&&(Yu=new AbortController);var Hu,Ku=null===(Wu=Yu)||void 0===Wu?void 0:Wu.signal,qu=function(){return Ku};!function(e){var t;e.REMOTE_CONFIG_STORAGE_KEY="ConvivaRemoteConfig",e.SESSION_RECORDING_STARTED="ConvivaSessionRecordingStarted",(t=e.SAMPLING_MODES||(e.SAMPLING_MODES={})).NONE="NONE",t.RCFG="RCFG",e.SAMPLING_MODE_STORAGE_KEY="ConvivaSamplingMode"}(Hu||(Hu={}));var Xu=function(){var e="function"==typeof BigInt;function t(e){var t=e.split(".").map(Number);if(4!==t.length||t.some(function(e){return isNaN(e)}))throw new Error("clientId must be in format 'a.b.c.d' with each part being a number");return t}function n(e){for(var t=1+(0|(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0))|0,n=0;n<4;n++)t=Math.imul(-1640531535,t)+(0|e[n])|0;return 0|t}function r(r){if(e)try{var i=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:BigInt(0),n=BigInt(79),r=BigInt(1)+t,i=0;i<4;i++)r=n*r+BigInt(e[i]);return Number(BigInt.asIntN(32,r))}(t(r));return(i+Math.pow(2,31))/(Math.pow(2,32)-1)}catch(e){return 0}else try{return(n(t(r))>>>0)/4294967295}catch(e){return 0}}function i(e){return 1-r(e)}return{clientIdHash:n,sampleRate:r,minimumSampleRateForInclusion:i,shouldInclude:function(e,t){return e/100>=i(t)}}}();function Ju(){var e=localStorage.getItem("Conviva.sdkConfig"),t={};if(e)try{t=JSON.parse(e)}catch(e){}return t}function $u(){var e=null;try{if(window.localStorage){var t=localStorage.getItem(Hu.REMOTE_CONFIG_STORAGE_KEY);t&&(e=JSON.parse(t).sessionReplayConfiguration)}}catch(e){}return e}function Qu(e,t){if(e===t)return!0;if(Number.isNaN(e)&&Number.isNaN(t))return!0;if("object"!==C(e)||null===e||"object"!==C(t)||null===t)return!1;if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();var n=Object.keys(e),r=Object.keys(t);return n.length===r.length&&n.every(function(n){return r.includes(n)&&Qu(e[n],t[n])})}var ec,tc="ConvivaSessionReplayFlush";function nc(){if("undefined"==typeof window)return!1;try{return window.top===window.self}catch(e){return!1}}var rc=!1,ic=null,oc=null;function ac(e){try{var t;if("undefined"==typeof window)return;if((null===(t=window.__CONVIVA_SESSION_REPLAY__)||void 0===t||!t.inited)&&(window.__CONVIVA_SESSION_REPLAY__={inited:!0},ec=e,nc())){var n;if(rc="true"===(null===(n=localStorage)||void 0===n?void 0:n.getItem(Hu.SESSION_RECORDING_STARTED)))lc($u());null!==(r=window)&&void 0!==r&&r.addEventListener&&window.addEventListener("RemoteConfigUpdateApplied",function(){try{var e;if(function(){try{if("undefined"!=typeof window&&void 0!==window.localStorage){var e,t=JSON.parse(localStorage.getItem(Hu.REMOTE_CONFIG_STORAGE_KEY)||"{}");return t?void 0===t.catRcLastUpdatedTs||0===t.catRcLastUpdatedTs?Hu.SAMPLING_MODES.RCFG:null!==(e=localStorage.getItem(Hu.SAMPLING_MODE_STORAGE_KEY))&&void 0!==e?e:Hu.SAMPLING_MODES.RCFG:Hu.SAMPLING_MODES.RCFG}return Hu.SAMPLING_MODES.RCFG}catch(e){return Hu.SAMPLING_MODES.RCFG}}()!==Hu.SAMPLING_MODES.RCFG)return rc&&(null===(e=localStorage)||void 0===e||e.setItem(Hu.SESSION_RECORDING_STARTED,"false"),sc(!0)),void(oc&&(oc=null));var t=$u();if(null!==oc&&Qu(oc,t))return;if(oc=t,!nc())return;var n,r,i=!!t&&function(e){var t=!1,n=!1;try{if(t=(null==e?void 0:e.enabled)||!1)try{var r,i=Ju(),o=(null==e||null===(r=e.sampling)||void 0===r?void 0:r.pct)||0;n=0!==o&&(100===o||Xu.shouldInclude(o,i.clId))}catch(e){}}catch(e){}return t&&n}(t);t&&i?(ic&&sc(!1),rc||(rc=!0,null===(n=localStorage)||void 0===n||n.setItem(Hu.SESSION_RECORDING_STARTED,"true"),lc(t))):rc&&(null===(r=localStorage)||void 0===r||r.setItem(Hu.SESSION_RECORDING_STARTED,"false"),sc(!0))}catch(e){}},{signal:qu()})}}catch(e){}var r}function sc(e){var t;null===(t=ic)||void 0===t||t.stopRecording(e),rc=!1,ic=null}function lc(e){nc()&&(ic=new uc(ec,e)).initiateRecording()}var uc=function(){return a(function e(t,n){var r,i;o(this,e),this.detectionInterval=null,this._messageHandlers={},this._broadcastChannel=null,this._lastFlushSignalTimestamp=0,this.trackerConfiguration=t,this.sessionReplayConfig=n;var a=new Blob(["/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */\n!(function (t, e) {\n  'object' == typeof exports && 'undefined' != typeof module\n    ? e(exports)\n    : 'function' == typeof define && define.amd\n    ? define(['exports'], e)\n    : e(((t = 'undefined' != typeof globalThis ? globalThis : t || self).pako = {}));\n})(this, function (t) {\n  'use strict';\n  function e(t) {\n    let e = t.length;\n    for (; --e >= 0; ) t[e] = 0;\n  }\n  const a = 256,\n    i = 286,\n    n = 30,\n    s = 15,\n    r = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0]),\n    o = new Uint8Array([\n      0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13,\n    ]),\n    l = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 3, 7]),\n    h = new Uint8Array([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]),\n    d = new Array(576);\n  e(d);\n  const _ = new Array(60);\n  e(_);\n  const f = new Array(512);\n  e(f);\n  const c = new Array(256);\n  e(c);\n  const u = new Array(29);\n  e(u);\n  const w = new Array(n);\n  function m(t, e, a, i, n) {\n    (this.static_tree = t),\n      (this.extra_bits = e),\n      (this.extra_base = a),\n      (this.elems = i),\n      (this.max_length = n),\n      (this.has_stree = t && t.length);\n  }\n  let b, g, p;\n  function k(t, e) {\n    (this.dyn_tree = t), (this.max_code = 0), (this.stat_desc = e);\n  }\n  e(w);\n  const v = (t) => (t < 256 ? f[t] : f[256 + (t >>> 7)]),\n    y = (t, e) => {\n      (t.pending_buf[t.pending++] = 255 & e), (t.pending_buf[t.pending++] = (e >>> 8) & 255);\n    },\n    x = (t, e, a) => {\n      t.bi_valid > 16 - a\n        ? ((t.bi_buf |= (e << t.bi_valid) & 65535),\n          y(t, t.bi_buf),\n          (t.bi_buf = e >> (16 - t.bi_valid)),\n          (t.bi_valid += a - 16))\n        : ((t.bi_buf |= (e << t.bi_valid) & 65535), (t.bi_valid += a));\n    },\n    z = (t, e, a) => {\n      x(t, a[2 * e], a[2 * e + 1]);\n    },\n    A = (t, e) => {\n      let a = 0;\n      do {\n        (a |= 1 & t), (t >>>= 1), (a <<= 1);\n      } while (--e > 0);\n      return a >>> 1;\n    },\n    E = (t, e, a) => {\n      const i = new Array(16);\n      let n,\n        r,\n        o = 0;\n      for (n = 1; n <= s; n++) (o = (o + a[n - 1]) << 1), (i[n] = o);\n      for (r = 0; r <= e; r++) {\n        let e = t[2 * r + 1];\n        0 !== e && (t[2 * r] = A(i[e]++, e));\n      }\n    },\n    R = (t) => {\n      let e;\n      for (e = 0; e < i; e++) t.dyn_ltree[2 * e] = 0;\n      for (e = 0; e < n; e++) t.dyn_dtree[2 * e] = 0;\n      for (e = 0; e < 19; e++) t.bl_tree[2 * e] = 0;\n      (t.dyn_ltree[512] = 1), (t.opt_len = t.static_len = 0), (t.sym_next = t.matches = 0);\n    },\n    Z = (t) => {\n      t.bi_valid > 8 ? y(t, t.bi_buf) : t.bi_valid > 0 && (t.pending_buf[t.pending++] = t.bi_buf),\n        (t.bi_buf = 0),\n        (t.bi_valid = 0);\n    },\n    U = (t, e, a, i) => {\n      const n = 2 * e,\n        s = 2 * a;\n      return t[n] < t[s] || (t[n] === t[s] && i[e] <= i[a]);\n    },\n    S = (t, e, a) => {\n      const i = t.heap[a];\n      let n = a << 1;\n      for (\n        ;\n        n <= t.heap_len &&\n        (n < t.heap_len && U(e, t.heap[n + 1], t.heap[n], t.depth) && n++, !U(e, i, t.heap[n], t.depth));\n\n      )\n        (t.heap[a] = t.heap[n]), (a = n), (n <<= 1);\n      t.heap[a] = i;\n    },\n    D = (t, e, i) => {\n      let n,\n        s,\n        l,\n        h,\n        d = 0;\n      if (0 !== t.sym_next)\n        do {\n          (n = 255 & t.pending_buf[t.sym_buf + d++]),\n            (n += (255 & t.pending_buf[t.sym_buf + d++]) << 8),\n            (s = t.pending_buf[t.sym_buf + d++]),\n            0 === n\n              ? z(t, s, e)\n              : ((l = c[s]),\n                z(t, l + a + 1, e),\n                (h = r[l]),\n                0 !== h && ((s -= u[l]), x(t, s, h)),\n                n--,\n                (l = v(n)),\n                z(t, l, i),\n                (h = o[l]),\n                0 !== h && ((n -= w[l]), x(t, n, h)));\n        } while (d < t.sym_next);\n      z(t, 256, e);\n    },\n    T = (t, e) => {\n      const a = e.dyn_tree,\n        i = e.stat_desc.static_tree,\n        n = e.stat_desc.has_stree,\n        r = e.stat_desc.elems;\n      let o,\n        l,\n        h,\n        d = -1;\n      for (t.heap_len = 0, t.heap_max = 573, o = 0; o < r; o++)\n        0 !== a[2 * o] ? ((t.heap[++t.heap_len] = d = o), (t.depth[o] = 0)) : (a[2 * o + 1] = 0);\n      for (; t.heap_len < 2; )\n        (h = t.heap[++t.heap_len] = d < 2 ? ++d : 0),\n          (a[2 * h] = 1),\n          (t.depth[h] = 0),\n          t.opt_len--,\n          n && (t.static_len -= i[2 * h + 1]);\n      for (e.max_code = d, o = t.heap_len >> 1; o >= 1; o--) S(t, a, o);\n      h = r;\n      do {\n        (o = t.heap[1]),\n          (t.heap[1] = t.heap[t.heap_len--]),\n          S(t, a, 1),\n          (l = t.heap[1]),\n          (t.heap[--t.heap_max] = o),\n          (t.heap[--t.heap_max] = l),\n          (a[2 * h] = a[2 * o] + a[2 * l]),\n          (t.depth[h] = (t.depth[o] >= t.depth[l] ? t.depth[o] : t.depth[l]) + 1),\n          (a[2 * o + 1] = a[2 * l + 1] = h),\n          (t.heap[1] = h++),\n          S(t, a, 1);\n      } while (t.heap_len >= 2);\n      (t.heap[--t.heap_max] = t.heap[1]),\n        ((t, e) => {\n          const a = e.dyn_tree,\n            i = e.max_code,\n            n = e.stat_desc.static_tree,\n            r = e.stat_desc.has_stree,\n            o = e.stat_desc.extra_bits,\n            l = e.stat_desc.extra_base,\n            h = e.stat_desc.max_length;\n          let d,\n            _,\n            f,\n            c,\n            u,\n            w,\n            m = 0;\n          for (c = 0; c <= s; c++) t.bl_count[c] = 0;\n          for (a[2 * t.heap[t.heap_max] + 1] = 0, d = t.heap_max + 1; d < 573; d++)\n            (_ = t.heap[d]),\n              (c = a[2 * a[2 * _ + 1] + 1] + 1),\n              c > h && ((c = h), m++),\n              (a[2 * _ + 1] = c),\n              _ > i ||\n                (t.bl_count[c]++,\n                (u = 0),\n                _ >= l && (u = o[_ - l]),\n                (w = a[2 * _]),\n                (t.opt_len += w * (c + u)),\n                r && (t.static_len += w * (n[2 * _ + 1] + u)));\n          if (0 !== m) {\n            do {\n              for (c = h - 1; 0 === t.bl_count[c]; ) c--;\n              t.bl_count[c]--, (t.bl_count[c + 1] += 2), t.bl_count[h]--, (m -= 2);\n            } while (m > 0);\n            for (c = h; 0 !== c; c--)\n              for (_ = t.bl_count[c]; 0 !== _; )\n                (f = t.heap[--d]),\n                  f > i ||\n                    (a[2 * f + 1] !== c && ((t.opt_len += (c - a[2 * f + 1]) * a[2 * f]), (a[2 * f + 1] = c)), _--);\n          }\n        })(t, e),\n        E(a, d, t.bl_count);\n    },\n    O = (t, e, a) => {\n      let i,\n        n,\n        s = -1,\n        r = e[1],\n        o = 0,\n        l = 7,\n        h = 4;\n      for (0 === r && ((l = 138), (h = 3)), e[2 * (a + 1) + 1] = 65535, i = 0; i <= a; i++)\n        (n = r),\n          (r = e[2 * (i + 1) + 1]),\n          (++o < l && n === r) ||\n            (o < h\n              ? (t.bl_tree[2 * n] += o)\n              : 0 !== n\n              ? (n !== s && t.bl_tree[2 * n]++, t.bl_tree[32]++)\n              : o <= 10\n              ? t.bl_tree[34]++\n              : t.bl_tree[36]++,\n            (o = 0),\n            (s = n),\n            0 === r ? ((l = 138), (h = 3)) : n === r ? ((l = 6), (h = 3)) : ((l = 7), (h = 4)));\n    },\n    I = (t, e, a) => {\n      let i,\n        n,\n        s = -1,\n        r = e[1],\n        o = 0,\n        l = 7,\n        h = 4;\n      for (0 === r && ((l = 138), (h = 3)), i = 0; i <= a; i++)\n        if (((n = r), (r = e[2 * (i + 1) + 1]), !(++o < l && n === r))) {\n          if (o < h)\n            do {\n              z(t, n, t.bl_tree);\n            } while (0 != --o);\n          else\n            0 !== n\n              ? (n !== s && (z(t, n, t.bl_tree), o--), z(t, 16, t.bl_tree), x(t, o - 3, 2))\n              : o <= 10\n              ? (z(t, 17, t.bl_tree), x(t, o - 3, 3))\n              : (z(t, 18, t.bl_tree), x(t, o - 11, 7));\n          (o = 0), (s = n), 0 === r ? ((l = 138), (h = 3)) : n === r ? ((l = 6), (h = 3)) : ((l = 7), (h = 4));\n        }\n    };\n  let F = !1;\n  const L = (t, e, a, i) => {\n    x(t, 0 + (i ? 1 : 0), 3),\n      Z(t),\n      y(t, a),\n      y(t, ~a),\n      a && t.pending_buf.set(t.window.subarray(e, e + a), t.pending),\n      (t.pending += a);\n  };\n  var N = (t, e, i, n) => {\n      let s,\n        r,\n        o = 0;\n      t.level > 0\n        ? (2 === t.strm.data_type &&\n            (t.strm.data_type = ((t) => {\n              let e,\n                i = 4093624447;\n              for (e = 0; e <= 31; e++, i >>>= 1) if (1 & i && 0 !== t.dyn_ltree[2 * e]) return 0;\n              if (0 !== t.dyn_ltree[18] || 0 !== t.dyn_ltree[20] || 0 !== t.dyn_ltree[26]) return 1;\n              for (e = 32; e < a; e++) if (0 !== t.dyn_ltree[2 * e]) return 1;\n              return 0;\n            })(t)),\n          T(t, t.l_desc),\n          T(t, t.d_desc),\n          (o = ((t) => {\n            let e;\n            for (\n              O(t, t.dyn_ltree, t.l_desc.max_code), O(t, t.dyn_dtree, t.d_desc.max_code), T(t, t.bl_desc), e = 18;\n              e >= 3 && 0 === t.bl_tree[2 * h[e] + 1];\n              e--\n            );\n            return (t.opt_len += 3 * (e + 1) + 5 + 5 + 4), e;\n          })(t)),\n          (s = (t.opt_len + 3 + 7) >>> 3),\n          (r = (t.static_len + 3 + 7) >>> 3),\n          r <= s && (s = r))\n        : (s = r = i + 5),\n        i + 4 <= s && -1 !== e\n          ? L(t, e, i, n)\n          : 4 === t.strategy || r === s\n          ? (x(t, 2 + (n ? 1 : 0), 3), D(t, d, _))\n          : (x(t, 4 + (n ? 1 : 0), 3),\n            ((t, e, a, i) => {\n              let n;\n              for (x(t, e - 257, 5), x(t, a - 1, 5), x(t, i - 4, 4), n = 0; n < i; n++)\n                x(t, t.bl_tree[2 * h[n] + 1], 3);\n              I(t, t.dyn_ltree, e - 1), I(t, t.dyn_dtree, a - 1);\n            })(t, t.l_desc.max_code + 1, t.d_desc.max_code + 1, o + 1),\n            D(t, t.dyn_ltree, t.dyn_dtree)),\n        R(t),\n        n && Z(t);\n    },\n    B = {\n      _tr_init: (t) => {\n        F ||\n          ((() => {\n            let t, e, a, h, k;\n            const v = new Array(16);\n            for (a = 0, h = 0; h < 28; h++) for (u[h] = a, t = 0; t < 1 << r[h]; t++) c[a++] = h;\n            for (c[a - 1] = h, k = 0, h = 0; h < 16; h++) for (w[h] = k, t = 0; t < 1 << o[h]; t++) f[k++] = h;\n            for (k >>= 7; h < n; h++) for (w[h] = k << 7, t = 0; t < 1 << (o[h] - 7); t++) f[256 + k++] = h;\n            for (e = 0; e <= s; e++) v[e] = 0;\n            for (t = 0; t <= 143; ) (d[2 * t + 1] = 8), t++, v[8]++;\n            for (; t <= 255; ) (d[2 * t + 1] = 9), t++, v[9]++;\n            for (; t <= 279; ) (d[2 * t + 1] = 7), t++, v[7]++;\n            for (; t <= 287; ) (d[2 * t + 1] = 8), t++, v[8]++;\n            for (E(d, 287, v), t = 0; t < n; t++) (_[2 * t + 1] = 5), (_[2 * t] = A(t, 5));\n            (b = new m(d, r, 257, i, s)), (g = new m(_, o, 0, n, s)), (p = new m(new Array(0), l, 0, 19, 7));\n          })(),\n          (F = !0)),\n          (t.l_desc = new k(t.dyn_ltree, b)),\n          (t.d_desc = new k(t.dyn_dtree, g)),\n          (t.bl_desc = new k(t.bl_tree, p)),\n          (t.bi_buf = 0),\n          (t.bi_valid = 0),\n          R(t);\n      },\n      _tr_stored_block: L,\n      _tr_flush_block: N,\n      _tr_tally: (t, e, i) => (\n        (t.pending_buf[t.sym_buf + t.sym_next++] = e),\n        (t.pending_buf[t.sym_buf + t.sym_next++] = e >> 8),\n        (t.pending_buf[t.sym_buf + t.sym_next++] = i),\n        0 === e ? t.dyn_ltree[2 * i]++ : (t.matches++, e--, t.dyn_ltree[2 * (c[i] + a + 1)]++, t.dyn_dtree[2 * v(e)]++),\n        t.sym_next === t.sym_end\n      ),\n      _tr_align: (t) => {\n        x(t, 2, 3),\n          z(t, 256, d),\n          ((t) => {\n            16 === t.bi_valid\n              ? (y(t, t.bi_buf), (t.bi_buf = 0), (t.bi_valid = 0))\n              : t.bi_valid >= 8 && ((t.pending_buf[t.pending++] = 255 & t.bi_buf), (t.bi_buf >>= 8), (t.bi_valid -= 8));\n          })(t);\n      },\n    };\n  var C = (t, e, a, i) => {\n    let n = (65535 & t) | 0,\n      s = ((t >>> 16) & 65535) | 0,\n      r = 0;\n    for (; 0 !== a; ) {\n      (r = a > 2e3 ? 2e3 : a), (a -= r);\n      do {\n        (n = (n + e[i++]) | 0), (s = (s + n) | 0);\n      } while (--r);\n      (n %= 65521), (s %= 65521);\n    }\n    return n | (s << 16) | 0;\n  };\n  const M = new Uint32Array(\n    (() => {\n      let t,\n        e = [];\n      for (var a = 0; a < 256; a++) {\n        t = a;\n        for (var i = 0; i < 8; i++) t = 1 & t ? 3988292384 ^ (t >>> 1) : t >>> 1;\n        e[a] = t;\n      }\n      return e;\n    })()\n  );\n  var H = (t, e, a, i) => {\n      const n = M,\n        s = i + a;\n      t ^= -1;\n      for (let a = i; a < s; a++) t = (t >>> 8) ^ n[255 & (t ^ e[a])];\n      return -1 ^ t;\n    },\n    j = {\n      2: 'need dictionary',\n      1: 'stream end',\n      0: '',\n      '-1': 'file error',\n      '-2': 'stream error',\n      '-3': 'data error',\n      '-4': 'insufficient memory',\n      '-5': 'buffer error',\n      '-6': 'incompatible version',\n    },\n    K = {\n      Z_NO_FLUSH: 0,\n      Z_PARTIAL_FLUSH: 1,\n      Z_SYNC_FLUSH: 2,\n      Z_FULL_FLUSH: 3,\n      Z_FINISH: 4,\n      Z_BLOCK: 5,\n      Z_TREES: 6,\n      Z_OK: 0,\n      Z_STREAM_END: 1,\n      Z_NEED_DICT: 2,\n      Z_ERRNO: -1,\n      Z_STREAM_ERROR: -2,\n      Z_DATA_ERROR: -3,\n      Z_MEM_ERROR: -4,\n      Z_BUF_ERROR: -5,\n      Z_NO_COMPRESSION: 0,\n      Z_BEST_SPEED: 1,\n      Z_BEST_COMPRESSION: 9,\n      Z_DEFAULT_COMPRESSION: -1,\n      Z_FILTERED: 1,\n      Z_HUFFMAN_ONLY: 2,\n      Z_RLE: 3,\n      Z_FIXED: 4,\n      Z_DEFAULT_STRATEGY: 0,\n      Z_BINARY: 0,\n      Z_TEXT: 1,\n      Z_UNKNOWN: 2,\n      Z_DEFLATED: 8,\n    };\n  const { _tr_init: P, _tr_stored_block: Y, _tr_flush_block: G, _tr_tally: X, _tr_align: W } = B,\n    {\n      Z_NO_FLUSH: q,\n      Z_PARTIAL_FLUSH: J,\n      Z_FULL_FLUSH: Q,\n      Z_FINISH: V,\n      Z_BLOCK: $,\n      Z_OK: tt,\n      Z_STREAM_END: et,\n      Z_STREAM_ERROR: at,\n      Z_DATA_ERROR: it,\n      Z_BUF_ERROR: nt,\n      Z_DEFAULT_COMPRESSION: st,\n      Z_FILTERED: rt,\n      Z_HUFFMAN_ONLY: ot,\n      Z_RLE: lt,\n      Z_FIXED: ht,\n      Z_DEFAULT_STRATEGY: dt,\n      Z_UNKNOWN: _t,\n      Z_DEFLATED: ft,\n    } = K,\n    ct = 258,\n    ut = 262,\n    wt = 42,\n    mt = 113,\n    bt = 666,\n    gt = (t, e) => ((t.msg = j[e]), e),\n    pt = (t) => 2 * t - (t > 4 ? 9 : 0),\n    kt = (t) => {\n      let e = t.length;\n      for (; --e >= 0; ) t[e] = 0;\n    },\n    vt = (t) => {\n      let e,\n        a,\n        i,\n        n = t.w_size;\n      (e = t.hash_size), (i = e);\n      do {\n        (a = t.head[--i]), (t.head[i] = a >= n ? a - n : 0);\n      } while (--e);\n      (e = n), (i = e);\n      do {\n        (a = t.prev[--i]), (t.prev[i] = a >= n ? a - n : 0);\n      } while (--e);\n    };\n  let yt = (t, e, a) => ((e << t.hash_shift) ^ a) & t.hash_mask;\n  const xt = (t) => {\n      const e = t.state;\n      let a = e.pending;\n      a > t.avail_out && (a = t.avail_out),\n        0 !== a &&\n          (t.output.set(e.pending_buf.subarray(e.pending_out, e.pending_out + a), t.next_out),\n          (t.next_out += a),\n          (e.pending_out += a),\n          (t.total_out += a),\n          (t.avail_out -= a),\n          (e.pending -= a),\n          0 === e.pending && (e.pending_out = 0));\n    },\n    zt = (t, e) => {\n      G(t, t.block_start >= 0 ? t.block_start : -1, t.strstart - t.block_start, e),\n        (t.block_start = t.strstart),\n        xt(t.strm);\n    },\n    At = (t, e) => {\n      t.pending_buf[t.pending++] = e;\n    },\n    Et = (t, e) => {\n      (t.pending_buf[t.pending++] = (e >>> 8) & 255), (t.pending_buf[t.pending++] = 255 & e);\n    },\n    Rt = (t, e, a, i) => {\n      let n = t.avail_in;\n      return (\n        n > i && (n = i),\n        0 === n\n          ? 0\n          : ((t.avail_in -= n),\n            e.set(t.input.subarray(t.next_in, t.next_in + n), a),\n            1 === t.state.wrap\n              ? (t.adler = C(t.adler, e, n, a))\n              : 2 === t.state.wrap && (t.adler = H(t.adler, e, n, a)),\n            (t.next_in += n),\n            (t.total_in += n),\n            n)\n      );\n    },\n    Zt = (t, e) => {\n      let a,\n        i,\n        n = t.max_chain_length,\n        s = t.strstart,\n        r = t.prev_length,\n        o = t.nice_match;\n      const l = t.strstart > t.w_size - ut ? t.strstart - (t.w_size - ut) : 0,\n        h = t.window,\n        d = t.w_mask,\n        _ = t.prev,\n        f = t.strstart + ct;\n      let c = h[s + r - 1],\n        u = h[s + r];\n      t.prev_length >= t.good_match && (n >>= 2), o > t.lookahead && (o = t.lookahead);\n      do {\n        if (((a = e), h[a + r] === u && h[a + r - 1] === c && h[a] === h[s] && h[++a] === h[s + 1])) {\n          (s += 2), a++;\n          do {} while (\n            h[++s] === h[++a] &&\n            h[++s] === h[++a] &&\n            h[++s] === h[++a] &&\n            h[++s] === h[++a] &&\n            h[++s] === h[++a] &&\n            h[++s] === h[++a] &&\n            h[++s] === h[++a] &&\n            h[++s] === h[++a] &&\n            s < f\n          );\n          if (((i = ct - (f - s)), (s = f - ct), i > r)) {\n            if (((t.match_start = e), (r = i), i >= o)) break;\n            (c = h[s + r - 1]), (u = h[s + r]);\n          }\n        }\n      } while ((e = _[e & d]) > l && 0 != --n);\n      return r <= t.lookahead ? r : t.lookahead;\n    },\n    Ut = (t) => {\n      const e = t.w_size;\n      let a, i, n;\n      do {\n        if (\n          ((i = t.window_size - t.lookahead - t.strstart),\n          t.strstart >= e + (e - ut) &&\n            (t.window.set(t.window.subarray(e, e + e - i), 0),\n            (t.match_start -= e),\n            (t.strstart -= e),\n            (t.block_start -= e),\n            t.insert > t.strstart && (t.insert = t.strstart),\n            vt(t),\n            (i += e)),\n          0 === t.strm.avail_in)\n        )\n          break;\n        if (((a = Rt(t.strm, t.window, t.strstart + t.lookahead, i)), (t.lookahead += a), t.lookahead + t.insert >= 3))\n          for (\n            n = t.strstart - t.insert, t.ins_h = t.window[n], t.ins_h = yt(t, t.ins_h, t.window[n + 1]);\n            t.insert &&\n            ((t.ins_h = yt(t, t.ins_h, t.window[n + 3 - 1])),\n            (t.prev[n & t.w_mask] = t.head[t.ins_h]),\n            (t.head[t.ins_h] = n),\n            n++,\n            t.insert--,\n            !(t.lookahead + t.insert < 3));\n\n          );\n      } while (t.lookahead < ut && 0 !== t.strm.avail_in);\n    },\n    St = (t, e) => {\n      let a,\n        i,\n        n,\n        s = t.pending_buf_size - 5 > t.w_size ? t.w_size : t.pending_buf_size - 5,\n        r = 0,\n        o = t.strm.avail_in;\n      do {\n        if (((a = 65535), (n = (t.bi_valid + 42) >> 3), t.strm.avail_out < n)) break;\n        if (\n          ((n = t.strm.avail_out - n),\n          (i = t.strstart - t.block_start),\n          a > i + t.strm.avail_in && (a = i + t.strm.avail_in),\n          a > n && (a = n),\n          a < s && ((0 === a && e !== V) || e === q || a !== i + t.strm.avail_in))\n        )\n          break;\n        (r = e === V && a === i + t.strm.avail_in ? 1 : 0),\n          Y(t, 0, 0, r),\n          (t.pending_buf[t.pending - 4] = a),\n          (t.pending_buf[t.pending - 3] = a >> 8),\n          (t.pending_buf[t.pending - 2] = ~a),\n          (t.pending_buf[t.pending - 1] = ~a >> 8),\n          xt(t.strm),\n          i &&\n            (i > a && (i = a),\n            t.strm.output.set(t.window.subarray(t.block_start, t.block_start + i), t.strm.next_out),\n            (t.strm.next_out += i),\n            (t.strm.avail_out -= i),\n            (t.strm.total_out += i),\n            (t.block_start += i),\n            (a -= i)),\n          a &&\n            (Rt(t.strm, t.strm.output, t.strm.next_out, a),\n            (t.strm.next_out += a),\n            (t.strm.avail_out -= a),\n            (t.strm.total_out += a));\n      } while (0 === r);\n      return (\n        (o -= t.strm.avail_in),\n        o &&\n          (o >= t.w_size\n            ? ((t.matches = 2),\n              t.window.set(t.strm.input.subarray(t.strm.next_in - t.w_size, t.strm.next_in), 0),\n              (t.strstart = t.w_size),\n              (t.insert = t.strstart))\n            : (t.window_size - t.strstart <= o &&\n                ((t.strstart -= t.w_size),\n                t.window.set(t.window.subarray(t.w_size, t.w_size + t.strstart), 0),\n                t.matches < 2 && t.matches++,\n                t.insert > t.strstart && (t.insert = t.strstart)),\n              t.window.set(t.strm.input.subarray(t.strm.next_in - o, t.strm.next_in), t.strstart),\n              (t.strstart += o),\n              (t.insert += o > t.w_size - t.insert ? t.w_size - t.insert : o)),\n          (t.block_start = t.strstart)),\n        t.high_water < t.strstart && (t.high_water = t.strstart),\n        r\n          ? 4\n          : e !== q && e !== V && 0 === t.strm.avail_in && t.strstart === t.block_start\n          ? 2\n          : ((n = t.window_size - t.strstart),\n            t.strm.avail_in > n &&\n              t.block_start >= t.w_size &&\n              ((t.block_start -= t.w_size),\n              (t.strstart -= t.w_size),\n              t.window.set(t.window.subarray(t.w_size, t.w_size + t.strstart), 0),\n              t.matches < 2 && t.matches++,\n              (n += t.w_size),\n              t.insert > t.strstart && (t.insert = t.strstart)),\n            n > t.strm.avail_in && (n = t.strm.avail_in),\n            n &&\n              (Rt(t.strm, t.window, t.strstart, n),\n              (t.strstart += n),\n              (t.insert += n > t.w_size - t.insert ? t.w_size - t.insert : n)),\n            t.high_water < t.strstart && (t.high_water = t.strstart),\n            (n = (t.bi_valid + 42) >> 3),\n            (n = t.pending_buf_size - n > 65535 ? 65535 : t.pending_buf_size - n),\n            (s = n > t.w_size ? t.w_size : n),\n            (i = t.strstart - t.block_start),\n            (i >= s || ((i || e === V) && e !== q && 0 === t.strm.avail_in && i <= n)) &&\n              ((a = i > n ? n : i),\n              (r = e === V && 0 === t.strm.avail_in && a === i ? 1 : 0),\n              Y(t, t.block_start, a, r),\n              (t.block_start += a),\n              xt(t.strm)),\n            r ? 3 : 1)\n      );\n    },\n    Dt = (t, e) => {\n      let a, i;\n      for (;;) {\n        if (t.lookahead < ut) {\n          if ((Ut(t), t.lookahead < ut && e === q)) return 1;\n          if (0 === t.lookahead) break;\n        }\n        if (\n          ((a = 0),\n          t.lookahead >= 3 &&\n            ((t.ins_h = yt(t, t.ins_h, t.window[t.strstart + 3 - 1])),\n            (a = t.prev[t.strstart & t.w_mask] = t.head[t.ins_h]),\n            (t.head[t.ins_h] = t.strstart)),\n          0 !== a && t.strstart - a <= t.w_size - ut && (t.match_length = Zt(t, a)),\n          t.match_length >= 3)\n        )\n          if (\n            ((i = X(t, t.strstart - t.match_start, t.match_length - 3)),\n            (t.lookahead -= t.match_length),\n            t.match_length <= t.max_lazy_match && t.lookahead >= 3)\n          ) {\n            t.match_length--;\n            do {\n              t.strstart++,\n                (t.ins_h = yt(t, t.ins_h, t.window[t.strstart + 3 - 1])),\n                (a = t.prev[t.strstart & t.w_mask] = t.head[t.ins_h]),\n                (t.head[t.ins_h] = t.strstart);\n            } while (0 != --t.match_length);\n            t.strstart++;\n          } else\n            (t.strstart += t.match_length),\n              (t.match_length = 0),\n              (t.ins_h = t.window[t.strstart]),\n              (t.ins_h = yt(t, t.ins_h, t.window[t.strstart + 1]));\n        else (i = X(t, 0, t.window[t.strstart])), t.lookahead--, t.strstart++;\n        if (i && (zt(t, !1), 0 === t.strm.avail_out)) return 1;\n      }\n      return (\n        (t.insert = t.strstart < 2 ? t.strstart : 2),\n        e === V\n          ? (zt(t, !0), 0 === t.strm.avail_out ? 3 : 4)\n          : t.sym_next && (zt(t, !1), 0 === t.strm.avail_out)\n          ? 1\n          : 2\n      );\n    },\n    Tt = (t, e) => {\n      let a, i, n;\n      for (;;) {\n        if (t.lookahead < ut) {\n          if ((Ut(t), t.lookahead < ut && e === q)) return 1;\n          if (0 === t.lookahead) break;\n        }\n        if (\n          ((a = 0),\n          t.lookahead >= 3 &&\n            ((t.ins_h = yt(t, t.ins_h, t.window[t.strstart + 3 - 1])),\n            (a = t.prev[t.strstart & t.w_mask] = t.head[t.ins_h]),\n            (t.head[t.ins_h] = t.strstart)),\n          (t.prev_length = t.match_length),\n          (t.prev_match = t.match_start),\n          (t.match_length = 2),\n          0 !== a &&\n            t.prev_length < t.max_lazy_match &&\n            t.strstart - a <= t.w_size - ut &&\n            ((t.match_length = Zt(t, a)),\n            t.match_length <= 5 &&\n              (t.strategy === rt || (3 === t.match_length && t.strstart - t.match_start > 4096)) &&\n              (t.match_length = 2)),\n          t.prev_length >= 3 && t.match_length <= t.prev_length)\n        ) {\n          (n = t.strstart + t.lookahead - 3),\n            (i = X(t, t.strstart - 1 - t.prev_match, t.prev_length - 3)),\n            (t.lookahead -= t.prev_length - 1),\n            (t.prev_length -= 2);\n          do {\n            ++t.strstart <= n &&\n              ((t.ins_h = yt(t, t.ins_h, t.window[t.strstart + 3 - 1])),\n              (a = t.prev[t.strstart & t.w_mask] = t.head[t.ins_h]),\n              (t.head[t.ins_h] = t.strstart));\n          } while (0 != --t.prev_length);\n          if (((t.match_available = 0), (t.match_length = 2), t.strstart++, i && (zt(t, !1), 0 === t.strm.avail_out)))\n            return 1;\n        } else if (t.match_available) {\n          if (\n            ((i = X(t, 0, t.window[t.strstart - 1])),\n            i && zt(t, !1),\n            t.strstart++,\n            t.lookahead--,\n            0 === t.strm.avail_out)\n          )\n            return 1;\n        } else (t.match_available = 1), t.strstart++, t.lookahead--;\n      }\n      return (\n        t.match_available && ((i = X(t, 0, t.window[t.strstart - 1])), (t.match_available = 0)),\n        (t.insert = t.strstart < 2 ? t.strstart : 2),\n        e === V\n          ? (zt(t, !0), 0 === t.strm.avail_out ? 3 : 4)\n          : t.sym_next && (zt(t, !1), 0 === t.strm.avail_out)\n          ? 1\n          : 2\n      );\n    };\n  function Ot(t, e, a, i, n) {\n    (this.good_length = t), (this.max_lazy = e), (this.nice_length = a), (this.max_chain = i), (this.func = n);\n  }\n  const It = [\n    new Ot(0, 0, 0, 0, St),\n    new Ot(4, 4, 8, 4, Dt),\n    new Ot(4, 5, 16, 8, Dt),\n    new Ot(4, 6, 32, 32, Dt),\n    new Ot(4, 4, 16, 16, Tt),\n    new Ot(8, 16, 32, 32, Tt),\n    new Ot(8, 16, 128, 128, Tt),\n    new Ot(8, 32, 128, 256, Tt),\n    new Ot(32, 128, 258, 1024, Tt),\n    new Ot(32, 258, 258, 4096, Tt),\n  ];\n  function Ft() {\n    (this.strm = null),\n      (this.status = 0),\n      (this.pending_buf = null),\n      (this.pending_buf_size = 0),\n      (this.pending_out = 0),\n      (this.pending = 0),\n      (this.wrap = 0),\n      (this.gzhead = null),\n      (this.gzindex = 0),\n      (this.method = ft),\n      (this.last_flush = -1),\n      (this.w_size = 0),\n      (this.w_bits = 0),\n      (this.w_mask = 0),\n      (this.window = null),\n      (this.window_size = 0),\n      (this.prev = null),\n      (this.head = null),\n      (this.ins_h = 0),\n      (this.hash_size = 0),\n      (this.hash_bits = 0),\n      (this.hash_mask = 0),\n      (this.hash_shift = 0),\n      (this.block_start = 0),\n      (this.match_length = 0),\n      (this.prev_match = 0),\n      (this.match_available = 0),\n      (this.strstart = 0),\n      (this.match_start = 0),\n      (this.lookahead = 0),\n      (this.prev_length = 0),\n      (this.max_chain_length = 0),\n      (this.max_lazy_match = 0),\n      (this.level = 0),\n      (this.strategy = 0),\n      (this.good_match = 0),\n      (this.nice_match = 0),\n      (this.dyn_ltree = new Uint16Array(1146)),\n      (this.dyn_dtree = new Uint16Array(122)),\n      (this.bl_tree = new Uint16Array(78)),\n      kt(this.dyn_ltree),\n      kt(this.dyn_dtree),\n      kt(this.bl_tree),\n      (this.l_desc = null),\n      (this.d_desc = null),\n      (this.bl_desc = null),\n      (this.bl_count = new Uint16Array(16)),\n      (this.heap = new Uint16Array(573)),\n      kt(this.heap),\n      (this.heap_len = 0),\n      (this.heap_max = 0),\n      (this.depth = new Uint16Array(573)),\n      kt(this.depth),\n      (this.sym_buf = 0),\n      (this.lit_bufsize = 0),\n      (this.sym_next = 0),\n      (this.sym_end = 0),\n      (this.opt_len = 0),\n      (this.static_len = 0),\n      (this.matches = 0),\n      (this.insert = 0),\n      (this.bi_buf = 0),\n      (this.bi_valid = 0);\n  }\n  const Lt = (t) => {\n      if (!t) return 1;\n      const e = t.state;\n      return !e ||\n        e.strm !== t ||\n        (e.status !== wt &&\n          57 !== e.status &&\n          69 !== e.status &&\n          73 !== e.status &&\n          91 !== e.status &&\n          103 !== e.status &&\n          e.status !== mt &&\n          e.status !== bt)\n        ? 1\n        : 0;\n    },\n    Nt = (t) => {\n      if (Lt(t)) return gt(t, at);\n      (t.total_in = t.total_out = 0), (t.data_type = _t);\n      const e = t.state;\n      return (\n        (e.pending = 0),\n        (e.pending_out = 0),\n        e.wrap < 0 && (e.wrap = -e.wrap),\n        (e.status = 2 === e.wrap ? 57 : e.wrap ? wt : mt),\n        (t.adler = 2 === e.wrap ? 0 : 1),\n        (e.last_flush = -2),\n        P(e),\n        tt\n      );\n    },\n    Bt = (t) => {\n      const e = Nt(t);\n      var a;\n      return (\n        e === tt &&\n          (((a = t.state).window_size = 2 * a.w_size),\n          kt(a.head),\n          (a.max_lazy_match = It[a.level].max_lazy),\n          (a.good_match = It[a.level].good_length),\n          (a.nice_match = It[a.level].nice_length),\n          (a.max_chain_length = It[a.level].max_chain),\n          (a.strstart = 0),\n          (a.block_start = 0),\n          (a.lookahead = 0),\n          (a.insert = 0),\n          (a.match_length = a.prev_length = 2),\n          (a.match_available = 0),\n          (a.ins_h = 0)),\n        e\n      );\n    },\n    Ct = (t, e, a, i, n, s) => {\n      if (!t) return at;\n      let r = 1;\n      if (\n        (e === st && (e = 6),\n        i < 0 ? ((r = 0), (i = -i)) : i > 15 && ((r = 2), (i -= 16)),\n        n < 1 || n > 9 || a !== ft || i < 8 || i > 15 || e < 0 || e > 9 || s < 0 || s > ht || (8 === i && 1 !== r))\n      )\n        return gt(t, at);\n      8 === i && (i = 9);\n      const o = new Ft();\n      return (\n        (t.state = o),\n        (o.strm = t),\n        (o.status = wt),\n        (o.wrap = r),\n        (o.gzhead = null),\n        (o.w_bits = i),\n        (o.w_size = 1 << o.w_bits),\n        (o.w_mask = o.w_size - 1),\n        (o.hash_bits = n + 7),\n        (o.hash_size = 1 << o.hash_bits),\n        (o.hash_mask = o.hash_size - 1),\n        (o.hash_shift = ~~((o.hash_bits + 3 - 1) / 3)),\n        (o.window = new Uint8Array(2 * o.w_size)),\n        (o.head = new Uint16Array(o.hash_size)),\n        (o.prev = new Uint16Array(o.w_size)),\n        (o.lit_bufsize = 1 << (n + 6)),\n        (o.pending_buf_size = 4 * o.lit_bufsize),\n        (o.pending_buf = new Uint8Array(o.pending_buf_size)),\n        (o.sym_buf = o.lit_bufsize),\n        (o.sym_end = 3 * (o.lit_bufsize - 1)),\n        (o.level = e),\n        (o.strategy = s),\n        (o.method = a),\n        Bt(t)\n      );\n    };\n  var Mt = {\n    deflateInit: (t, e) => Ct(t, e, ft, 15, 8, dt),\n    deflateInit2: Ct,\n    deflateReset: Bt,\n    deflateResetKeep: Nt,\n    deflateSetHeader: (t, e) => (Lt(t) || 2 !== t.state.wrap ? at : ((t.state.gzhead = e), tt)),\n    deflate: (t, e) => {\n      if (Lt(t) || e > $ || e < 0) return t ? gt(t, at) : at;\n      const a = t.state;\n      if (!t.output || (0 !== t.avail_in && !t.input) || (a.status === bt && e !== V))\n        return gt(t, 0 === t.avail_out ? nt : at);\n      const i = a.last_flush;\n      if (((a.last_flush = e), 0 !== a.pending)) {\n        if ((xt(t), 0 === t.avail_out)) return (a.last_flush = -1), tt;\n      } else if (0 === t.avail_in && pt(e) <= pt(i) && e !== V) return gt(t, nt);\n      if (a.status === bt && 0 !== t.avail_in) return gt(t, nt);\n      if ((a.status === wt && 0 === a.wrap && (a.status = mt), a.status === wt)) {\n        let e = (ft + ((a.w_bits - 8) << 4)) << 8,\n          i = -1;\n        if (\n          ((i = a.strategy >= ot || a.level < 2 ? 0 : a.level < 6 ? 1 : 6 === a.level ? 2 : 3),\n          (e |= i << 6),\n          0 !== a.strstart && (e |= 32),\n          (e += 31 - (e % 31)),\n          Et(a, e),\n          0 !== a.strstart && (Et(a, t.adler >>> 16), Et(a, 65535 & t.adler)),\n          (t.adler = 1),\n          (a.status = mt),\n          xt(t),\n          0 !== a.pending)\n        )\n          return (a.last_flush = -1), tt;\n      }\n      if (57 === a.status)\n        if (((t.adler = 0), At(a, 31), At(a, 139), At(a, 8), a.gzhead))\n          At(\n            a,\n            (a.gzhead.text ? 1 : 0) +\n              (a.gzhead.hcrc ? 2 : 0) +\n              (a.gzhead.extra ? 4 : 0) +\n              (a.gzhead.name ? 8 : 0) +\n              (a.gzhead.comment ? 16 : 0)\n          ),\n            At(a, 255 & a.gzhead.time),\n            At(a, (a.gzhead.time >> 8) & 255),\n            At(a, (a.gzhead.time >> 16) & 255),\n            At(a, (a.gzhead.time >> 24) & 255),\n            At(a, 9 === a.level ? 2 : a.strategy >= ot || a.level < 2 ? 4 : 0),\n            At(a, 255 & a.gzhead.os),\n            a.gzhead.extra &&\n              a.gzhead.extra.length &&\n              (At(a, 255 & a.gzhead.extra.length), At(a, (a.gzhead.extra.length >> 8) & 255)),\n            a.gzhead.hcrc && (t.adler = H(t.adler, a.pending_buf, a.pending, 0)),\n            (a.gzindex = 0),\n            (a.status = 69);\n        else if (\n          (At(a, 0),\n          At(a, 0),\n          At(a, 0),\n          At(a, 0),\n          At(a, 0),\n          At(a, 9 === a.level ? 2 : a.strategy >= ot || a.level < 2 ? 4 : 0),\n          At(a, 3),\n          (a.status = mt),\n          xt(t),\n          0 !== a.pending)\n        )\n          return (a.last_flush = -1), tt;\n      if (69 === a.status) {\n        if (a.gzhead.extra) {\n          let e = a.pending,\n            i = (65535 & a.gzhead.extra.length) - a.gzindex;\n          for (; a.pending + i > a.pending_buf_size; ) {\n            let n = a.pending_buf_size - a.pending;\n            if (\n              (a.pending_buf.set(a.gzhead.extra.subarray(a.gzindex, a.gzindex + n), a.pending),\n              (a.pending = a.pending_buf_size),\n              a.gzhead.hcrc && a.pending > e && (t.adler = H(t.adler, a.pending_buf, a.pending - e, e)),\n              (a.gzindex += n),\n              xt(t),\n              0 !== a.pending)\n            )\n              return (a.last_flush = -1), tt;\n            (e = 0), (i -= n);\n          }\n          let n = new Uint8Array(a.gzhead.extra);\n          a.pending_buf.set(n.subarray(a.gzindex, a.gzindex + i), a.pending),\n            (a.pending += i),\n            a.gzhead.hcrc && a.pending > e && (t.adler = H(t.adler, a.pending_buf, a.pending - e, e)),\n            (a.gzindex = 0);\n        }\n        a.status = 73;\n      }\n      if (73 === a.status) {\n        if (a.gzhead.name) {\n          let e,\n            i = a.pending;\n          do {\n            if (a.pending === a.pending_buf_size) {\n              if (\n                (a.gzhead.hcrc && a.pending > i && (t.adler = H(t.adler, a.pending_buf, a.pending - i, i)),\n                xt(t),\n                0 !== a.pending)\n              )\n                return (a.last_flush = -1), tt;\n              i = 0;\n            }\n            (e = a.gzindex < a.gzhead.name.length ? 255 & a.gzhead.name.charCodeAt(a.gzindex++) : 0), At(a, e);\n          } while (0 !== e);\n          a.gzhead.hcrc && a.pending > i && (t.adler = H(t.adler, a.pending_buf, a.pending - i, i)), (a.gzindex = 0);\n        }\n        a.status = 91;\n      }\n      if (91 === a.status) {\n        if (a.gzhead.comment) {\n          let e,\n            i = a.pending;\n          do {\n            if (a.pending === a.pending_buf_size) {\n              if (\n                (a.gzhead.hcrc && a.pending > i && (t.adler = H(t.adler, a.pending_buf, a.pending - i, i)),\n                xt(t),\n                0 !== a.pending)\n              )\n                return (a.last_flush = -1), tt;\n              i = 0;\n            }\n            (e = a.gzindex < a.gzhead.comment.length ? 255 & a.gzhead.comment.charCodeAt(a.gzindex++) : 0), At(a, e);\n          } while (0 !== e);\n          a.gzhead.hcrc && a.pending > i && (t.adler = H(t.adler, a.pending_buf, a.pending - i, i));\n        }\n        a.status = 103;\n      }\n      if (103 === a.status) {\n        if (a.gzhead.hcrc) {\n          if (a.pending + 2 > a.pending_buf_size && (xt(t), 0 !== a.pending)) return (a.last_flush = -1), tt;\n          At(a, 255 & t.adler), At(a, (t.adler >> 8) & 255), (t.adler = 0);\n        }\n        if (((a.status = mt), xt(t), 0 !== a.pending)) return (a.last_flush = -1), tt;\n      }\n      if (0 !== t.avail_in || 0 !== a.lookahead || (e !== q && a.status !== bt)) {\n        let i =\n          0 === a.level\n            ? St(a, e)\n            : a.strategy === ot\n            ? ((t, e) => {\n                let a;\n                for (;;) {\n                  if (0 === t.lookahead && (Ut(t), 0 === t.lookahead)) {\n                    if (e === q) return 1;\n                    break;\n                  }\n                  if (\n                    ((t.match_length = 0),\n                    (a = X(t, 0, t.window[t.strstart])),\n                    t.lookahead--,\n                    t.strstart++,\n                    a && (zt(t, !1), 0 === t.strm.avail_out))\n                  )\n                    return 1;\n                }\n                return (\n                  (t.insert = 0),\n                  e === V\n                    ? (zt(t, !0), 0 === t.strm.avail_out ? 3 : 4)\n                    : t.sym_next && (zt(t, !1), 0 === t.strm.avail_out)\n                    ? 1\n                    : 2\n                );\n              })(a, e)\n            : a.strategy === lt\n            ? ((t, e) => {\n                let a, i, n, s;\n                const r = t.window;\n                for (;;) {\n                  if (t.lookahead <= ct) {\n                    if ((Ut(t), t.lookahead <= ct && e === q)) return 1;\n                    if (0 === t.lookahead) break;\n                  }\n                  if (\n                    ((t.match_length = 0),\n                    t.lookahead >= 3 &&\n                      t.strstart > 0 &&\n                      ((n = t.strstart - 1), (i = r[n]), i === r[++n] && i === r[++n] && i === r[++n]))\n                  ) {\n                    s = t.strstart + ct;\n                    do {} while (\n                      i === r[++n] &&\n                      i === r[++n] &&\n                      i === r[++n] &&\n                      i === r[++n] &&\n                      i === r[++n] &&\n                      i === r[++n] &&\n                      i === r[++n] &&\n                      i === r[++n] &&\n                      n < s\n                    );\n                    (t.match_length = ct - (s - n)), t.match_length > t.lookahead && (t.match_length = t.lookahead);\n                  }\n                  if (\n                    (t.match_length >= 3\n                      ? ((a = X(t, 1, t.match_length - 3)),\n                        (t.lookahead -= t.match_length),\n                        (t.strstart += t.match_length),\n                        (t.match_length = 0))\n                      : ((a = X(t, 0, t.window[t.strstart])), t.lookahead--, t.strstart++),\n                    a && (zt(t, !1), 0 === t.strm.avail_out))\n                  )\n                    return 1;\n                }\n                return (\n                  (t.insert = 0),\n                  e === V\n                    ? (zt(t, !0), 0 === t.strm.avail_out ? 3 : 4)\n                    : t.sym_next && (zt(t, !1), 0 === t.strm.avail_out)\n                    ? 1\n                    : 2\n                );\n              })(a, e)\n            : It[a.level].func(a, e);\n        if (((3 !== i && 4 !== i) || (a.status = bt), 1 === i || 3 === i))\n          return 0 === t.avail_out && (a.last_flush = -1), tt;\n        if (\n          2 === i &&\n          (e === J\n            ? W(a)\n            : e !== $ &&\n              (Y(a, 0, 0, !1),\n              e === Q && (kt(a.head), 0 === a.lookahead && ((a.strstart = 0), (a.block_start = 0), (a.insert = 0)))),\n          xt(t),\n          0 === t.avail_out)\n        )\n          return (a.last_flush = -1), tt;\n      }\n      return e !== V\n        ? tt\n        : a.wrap <= 0\n        ? et\n        : (2 === a.wrap\n            ? (At(a, 255 & t.adler),\n              At(a, (t.adler >> 8) & 255),\n              At(a, (t.adler >> 16) & 255),\n              At(a, (t.adler >> 24) & 255),\n              At(a, 255 & t.total_in),\n              At(a, (t.total_in >> 8) & 255),\n              At(a, (t.total_in >> 16) & 255),\n              At(a, (t.total_in >> 24) & 255))\n            : (Et(a, t.adler >>> 16), Et(a, 65535 & t.adler)),\n          xt(t),\n          a.wrap > 0 && (a.wrap = -a.wrap),\n          0 !== a.pending ? tt : et);\n    },\n    deflateEnd: (t) => {\n      if (Lt(t)) return at;\n      const e = t.state.status;\n      return (t.state = null), e === mt ? gt(t, it) : tt;\n    },\n    deflateSetDictionary: (t, e) => {\n      let a = e.length;\n      if (Lt(t)) return at;\n      const i = t.state,\n        n = i.wrap;\n      if (2 === n || (1 === n && i.status !== wt) || i.lookahead) return at;\n      if ((1 === n && (t.adler = C(t.adler, e, a, 0)), (i.wrap = 0), a >= i.w_size)) {\n        0 === n && (kt(i.head), (i.strstart = 0), (i.block_start = 0), (i.insert = 0));\n        let t = new Uint8Array(i.w_size);\n        t.set(e.subarray(a - i.w_size, a), 0), (e = t), (a = i.w_size);\n      }\n      const s = t.avail_in,\n        r = t.next_in,\n        o = t.input;\n      for (t.avail_in = a, t.next_in = 0, t.input = e, Ut(i); i.lookahead >= 3; ) {\n        let t = i.strstart,\n          e = i.lookahead - 2;\n        do {\n          (i.ins_h = yt(i, i.ins_h, i.window[t + 3 - 1])),\n            (i.prev[t & i.w_mask] = i.head[i.ins_h]),\n            (i.head[i.ins_h] = t),\n            t++;\n        } while (--e);\n        (i.strstart = t), (i.lookahead = 2), Ut(i);\n      }\n      return (\n        (i.strstart += i.lookahead),\n        (i.block_start = i.strstart),\n        (i.insert = i.lookahead),\n        (i.lookahead = 0),\n        (i.match_length = i.prev_length = 2),\n        (i.match_available = 0),\n        (t.next_in = r),\n        (t.input = o),\n        (t.avail_in = s),\n        (i.wrap = n),\n        tt\n      );\n    },\n    deflateInfo: 'pako deflate (from Nodeca project)',\n  };\n  const Ht = (t, e) => Object.prototype.hasOwnProperty.call(t, e);\n  var jt = function (t) {\n      const e = Array.prototype.slice.call(arguments, 1);\n      for (; e.length; ) {\n        const a = e.shift();\n        if (a) {\n          if ('object' != typeof a) throw new TypeError(a + 'must be non-object');\n          for (const e in a) Ht(a, e) && (t[e] = a[e]);\n        }\n      }\n      return t;\n    },\n    Kt = (t) => {\n      let e = 0;\n      for (let a = 0, i = t.length; a < i; a++) e += t[a].length;\n      const a = new Uint8Array(e);\n      for (let e = 0, i = 0, n = t.length; e < n; e++) {\n        let n = t[e];\n        a.set(n, i), (i += n.length);\n      }\n      return a;\n    };\n  let Pt = !0;\n  try {\n    String.fromCharCode.apply(null, new Uint8Array(1));\n  } catch (t) {\n    Pt = !1;\n  }\n  const Yt = new Uint8Array(256);\n  for (let t = 0; t < 256; t++) Yt[t] = t >= 252 ? 6 : t >= 248 ? 5 : t >= 240 ? 4 : t >= 224 ? 3 : t >= 192 ? 2 : 1;\n  Yt[254] = Yt[254] = 1;\n  var Gt = (t) => {\n      if ('function' == typeof TextEncoder && TextEncoder.prototype.encode) return new TextEncoder().encode(t);\n      let e,\n        a,\n        i,\n        n,\n        s,\n        r = t.length,\n        o = 0;\n      for (n = 0; n < r; n++)\n        (a = t.charCodeAt(n)),\n          55296 == (64512 & a) &&\n            n + 1 < r &&\n            ((i = t.charCodeAt(n + 1)), 56320 == (64512 & i) && ((a = 65536 + ((a - 55296) << 10) + (i - 56320)), n++)),\n          (o += a < 128 ? 1 : a < 2048 ? 2 : a < 65536 ? 3 : 4);\n      for (e = new Uint8Array(o), s = 0, n = 0; s < o; n++)\n        (a = t.charCodeAt(n)),\n          55296 == (64512 & a) &&\n            n + 1 < r &&\n            ((i = t.charCodeAt(n + 1)), 56320 == (64512 & i) && ((a = 65536 + ((a - 55296) << 10) + (i - 56320)), n++)),\n          a < 128\n            ? (e[s++] = a)\n            : a < 2048\n            ? ((e[s++] = 192 | (a >>> 6)), (e[s++] = 128 | (63 & a)))\n            : a < 65536\n            ? ((e[s++] = 224 | (a >>> 12)), (e[s++] = 128 | ((a >>> 6) & 63)), (e[s++] = 128 | (63 & a)))\n            : ((e[s++] = 240 | (a >>> 18)),\n              (e[s++] = 128 | ((a >>> 12) & 63)),\n              (e[s++] = 128 | ((a >>> 6) & 63)),\n              (e[s++] = 128 | (63 & a)));\n      return e;\n    },\n    Xt = (t, e) => {\n      const a = e || t.length;\n      if ('function' == typeof TextDecoder && TextDecoder.prototype.decode)\n        return new TextDecoder().decode(t.subarray(0, e));\n      let i, n;\n      const s = new Array(2 * a);\n      for (n = 0, i = 0; i < a; ) {\n        let e = t[i++];\n        if (e < 128) {\n          s[n++] = e;\n          continue;\n        }\n        let r = Yt[e];\n        if (r > 4) (s[n++] = 65533), (i += r - 1);\n        else {\n          for (e &= 2 === r ? 31 : 3 === r ? 15 : 7; r > 1 && i < a; ) (e = (e << 6) | (63 & t[i++])), r--;\n          r > 1\n            ? (s[n++] = 65533)\n            : e < 65536\n            ? (s[n++] = e)\n            : ((e -= 65536), (s[n++] = 55296 | ((e >> 10) & 1023)), (s[n++] = 56320 | (1023 & e)));\n        }\n      }\n      return ((t, e) => {\n        if (e < 65534 && t.subarray && Pt)\n          return String.fromCharCode.apply(null, t.length === e ? t : t.subarray(0, e));\n        let a = '';\n        for (let i = 0; i < e; i++) a += String.fromCharCode(t[i]);\n        return a;\n      })(s, n);\n    },\n    Wt = (t, e) => {\n      (e = e || t.length) > t.length && (e = t.length);\n      let a = e - 1;\n      for (; a >= 0 && 128 == (192 & t[a]); ) a--;\n      return a < 0 || 0 === a ? e : a + Yt[t[a]] > e ? a : e;\n    };\n  var qt = function () {\n    (this.input = null),\n      (this.next_in = 0),\n      (this.avail_in = 0),\n      (this.total_in = 0),\n      (this.output = null),\n      (this.next_out = 0),\n      (this.avail_out = 0),\n      (this.total_out = 0),\n      (this.msg = ''),\n      (this.state = null),\n      (this.data_type = 2),\n      (this.adler = 0);\n  };\n  const Jt = Object.prototype.toString,\n    {\n      Z_NO_FLUSH: Qt,\n      Z_SYNC_FLUSH: Vt,\n      Z_FULL_FLUSH: $t,\n      Z_FINISH: te,\n      Z_OK: ee,\n      Z_STREAM_END: ae,\n      Z_DEFAULT_COMPRESSION: ie,\n      Z_DEFAULT_STRATEGY: ne,\n      Z_DEFLATED: se,\n    } = K;\n  function re(t) {\n    this.options = jt({ level: ie, method: se, chunkSize: 16384, windowBits: 15, memLevel: 8, strategy: ne }, t || {});\n    let e = this.options;\n    e.raw && e.windowBits > 0\n      ? (e.windowBits = -e.windowBits)\n      : e.gzip && e.windowBits > 0 && e.windowBits < 16 && (e.windowBits += 16),\n      (this.err = 0),\n      (this.msg = ''),\n      (this.ended = !1),\n      (this.chunks = []),\n      (this.strm = new qt()),\n      (this.strm.avail_out = 0);\n    let a = Mt.deflateInit2(this.strm, e.level, e.method, e.windowBits, e.memLevel, e.strategy);\n    if (a !== ee) throw new Error(j[a]);\n    if ((e.header && Mt.deflateSetHeader(this.strm, e.header), e.dictionary)) {\n      let t;\n      if (\n        ((t =\n          'string' == typeof e.dictionary\n            ? Gt(e.dictionary)\n            : '[object ArrayBuffer]' === Jt.call(e.dictionary)\n            ? new Uint8Array(e.dictionary)\n            : e.dictionary),\n        (a = Mt.deflateSetDictionary(this.strm, t)),\n        a !== ee)\n      )\n        throw new Error(j[a]);\n      this._dict_set = !0;\n    }\n  }\n  function oe(t, e) {\n    const a = new re(e);\n    if ((a.push(t, !0), a.err)) throw a.msg || j[a.err];\n    return a.result;\n  }\n  (re.prototype.push = function (t, e) {\n    const a = this.strm,\n      i = this.options.chunkSize;\n    let n, s;\n    if (this.ended) return !1;\n    for (\n      s = e === ~~e ? e : !0 === e ? te : Qt,\n        'string' == typeof t\n          ? (a.input = Gt(t))\n          : '[object ArrayBuffer]' === Jt.call(t)\n          ? (a.input = new Uint8Array(t))\n          : (a.input = t),\n        a.next_in = 0,\n        a.avail_in = a.input.length;\n      ;\n\n    )\n      if (\n        (0 === a.avail_out && ((a.output = new Uint8Array(i)), (a.next_out = 0), (a.avail_out = i)),\n        (s === Vt || s === $t) && a.avail_out <= 6)\n      )\n        this.onData(a.output.subarray(0, a.next_out)), (a.avail_out = 0);\n      else {\n        if (((n = Mt.deflate(a, s)), n === ae))\n          return (\n            a.next_out > 0 && this.onData(a.output.subarray(0, a.next_out)),\n            (n = Mt.deflateEnd(this.strm)),\n            this.onEnd(n),\n            (this.ended = !0),\n            n === ee\n          );\n        if (0 !== a.avail_out) {\n          if (s > 0 && a.next_out > 0) this.onData(a.output.subarray(0, a.next_out)), (a.avail_out = 0);\n          else if (0 === a.avail_in) break;\n        } else this.onData(a.output);\n      }\n    return !0;\n  }),\n    (re.prototype.onData = function (t) {\n      this.chunks.push(t);\n    }),\n    (re.prototype.onEnd = function (t) {\n      t === ee && (this.result = Kt(this.chunks)), (this.chunks = []), (this.err = t), (this.msg = this.strm.msg);\n    });\n  var le = {\n    Deflate: re,\n    deflate: oe,\n    deflateRaw: function (t, e) {\n      return ((e = e || {}).raw = !0), oe(t, e);\n    },\n    gzip: function (t, e) {\n      return ((e = e || {}).gzip = !0), oe(t, e);\n    },\n    constants: K,\n  };\n  const he = 16209;\n  var de = function (t, e) {\n    let a, i, n, s, r, o, l, h, d, _, f, c, u, w, m, b, g, p, k, v, y, x, z, A;\n    const E = t.state;\n    (a = t.next_in),\n      (z = t.input),\n      (i = a + (t.avail_in - 5)),\n      (n = t.next_out),\n      (A = t.output),\n      (s = n - (e - t.avail_out)),\n      (r = n + (t.avail_out - 257)),\n      (o = E.dmax),\n      (l = E.wsize),\n      (h = E.whave),\n      (d = E.wnext),\n      (_ = E.window),\n      (f = E.hold),\n      (c = E.bits),\n      (u = E.lencode),\n      (w = E.distcode),\n      (m = (1 << E.lenbits) - 1),\n      (b = (1 << E.distbits) - 1);\n    t: do {\n      c < 15 && ((f += z[a++] << c), (c += 8), (f += z[a++] << c), (c += 8)), (g = u[f & m]);\n      e: for (;;) {\n        if (((p = g >>> 24), (f >>>= p), (c -= p), (p = (g >>> 16) & 255), 0 === p)) A[n++] = 65535 & g;\n        else {\n          if (!(16 & p)) {\n            if (0 == (64 & p)) {\n              g = u[(65535 & g) + (f & ((1 << p) - 1))];\n              continue e;\n            }\n            if (32 & p) {\n              E.mode = 16191;\n              break t;\n            }\n            (t.msg = 'invalid literal/length code'), (E.mode = he);\n            break t;\n          }\n          (k = 65535 & g),\n            (p &= 15),\n            p && (c < p && ((f += z[a++] << c), (c += 8)), (k += f & ((1 << p) - 1)), (f >>>= p), (c -= p)),\n            c < 15 && ((f += z[a++] << c), (c += 8), (f += z[a++] << c), (c += 8)),\n            (g = w[f & b]);\n          a: for (;;) {\n            if (((p = g >>> 24), (f >>>= p), (c -= p), (p = (g >>> 16) & 255), !(16 & p))) {\n              if (0 == (64 & p)) {\n                g = w[(65535 & g) + (f & ((1 << p) - 1))];\n                continue a;\n              }\n              (t.msg = 'invalid distance code'), (E.mode = he);\n              break t;\n            }\n            if (\n              ((v = 65535 & g),\n              (p &= 15),\n              c < p && ((f += z[a++] << c), (c += 8), c < p && ((f += z[a++] << c), (c += 8))),\n              (v += f & ((1 << p) - 1)),\n              v > o)\n            ) {\n              (t.msg = 'invalid distance too far back'), (E.mode = he);\n              break t;\n            }\n            if (((f >>>= p), (c -= p), (p = n - s), v > p)) {\n              if (((p = v - p), p > h && E.sane)) {\n                (t.msg = 'invalid distance too far back'), (E.mode = he);\n                break t;\n              }\n              if (((y = 0), (x = _), 0 === d)) {\n                if (((y += l - p), p < k)) {\n                  k -= p;\n                  do {\n                    A[n++] = _[y++];\n                  } while (--p);\n                  (y = n - v), (x = A);\n                }\n              } else if (d < p) {\n                if (((y += l + d - p), (p -= d), p < k)) {\n                  k -= p;\n                  do {\n                    A[n++] = _[y++];\n                  } while (--p);\n                  if (((y = 0), d < k)) {\n                    (p = d), (k -= p);\n                    do {\n                      A[n++] = _[y++];\n                    } while (--p);\n                    (y = n - v), (x = A);\n                  }\n                }\n              } else if (((y += d - p), p < k)) {\n                k -= p;\n                do {\n                  A[n++] = _[y++];\n                } while (--p);\n                (y = n - v), (x = A);\n              }\n              for (; k > 2; ) (A[n++] = x[y++]), (A[n++] = x[y++]), (A[n++] = x[y++]), (k -= 3);\n              k && ((A[n++] = x[y++]), k > 1 && (A[n++] = x[y++]));\n            } else {\n              y = n - v;\n              do {\n                (A[n++] = A[y++]), (A[n++] = A[y++]), (A[n++] = A[y++]), (k -= 3);\n              } while (k > 2);\n              k && ((A[n++] = A[y++]), k > 1 && (A[n++] = A[y++]));\n            }\n            break;\n          }\n        }\n        break;\n      }\n    } while (a < i && n < r);\n    (k = c >> 3),\n      (a -= k),\n      (c -= k << 3),\n      (f &= (1 << c) - 1),\n      (t.next_in = a),\n      (t.next_out = n),\n      (t.avail_in = a < i ? i - a + 5 : 5 - (a - i)),\n      (t.avail_out = n < r ? r - n + 257 : 257 - (n - r)),\n      (E.hold = f),\n      (E.bits = c);\n  };\n  const _e = 15,\n    fe = new Uint16Array([\n      3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31, 35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258,\n      0, 0,\n    ]),\n    ce = new Uint8Array([\n      16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 18, 18, 18, 18, 19, 19, 19, 19, 20, 20, 20, 20, 21, 21, 21, 21,\n      16, 72, 78,\n    ]),\n    ue = new Uint16Array([\n      1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193, 257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145,\n      8193, 12289, 16385, 24577, 0, 0,\n    ]),\n    we = new Uint8Array([\n      16, 16, 16, 16, 17, 17, 18, 18, 19, 19, 20, 20, 21, 21, 22, 22, 23, 23, 24, 24, 25, 25, 26, 26, 27, 27, 28, 28,\n      29, 29, 64, 64,\n    ]);\n  var me = (t, e, a, i, n, s, r, o) => {\n    const l = o.bits;\n    let h,\n      d,\n      _,\n      f,\n      c,\n      u,\n      w = 0,\n      m = 0,\n      b = 0,\n      g = 0,\n      p = 0,\n      k = 0,\n      v = 0,\n      y = 0,\n      x = 0,\n      z = 0,\n      A = null;\n    const E = new Uint16Array(16),\n      R = new Uint16Array(16);\n    let Z,\n      U,\n      S,\n      D = null;\n    for (w = 0; w <= _e; w++) E[w] = 0;\n    for (m = 0; m < i; m++) E[e[a + m]]++;\n    for (p = l, g = _e; g >= 1 && 0 === E[g]; g--);\n    if ((p > g && (p = g), 0 === g)) return (n[s++] = 20971520), (n[s++] = 20971520), (o.bits = 1), 0;\n    for (b = 1; b < g && 0 === E[b]; b++);\n    for (p < b && (p = b), y = 1, w = 1; w <= _e; w++) if (((y <<= 1), (y -= E[w]), y < 0)) return -1;\n    if (y > 0 && (0 === t || 1 !== g)) return -1;\n    for (R[1] = 0, w = 1; w < _e; w++) R[w + 1] = R[w] + E[w];\n    for (m = 0; m < i; m++) 0 !== e[a + m] && (r[R[e[a + m]]++] = m);\n    if (\n      (0 === t ? ((A = D = r), (u = 20)) : 1 === t ? ((A = fe), (D = ce), (u = 257)) : ((A = ue), (D = we), (u = 0)),\n      (z = 0),\n      (m = 0),\n      (w = b),\n      (c = s),\n      (k = p),\n      (v = 0),\n      (_ = -1),\n      (x = 1 << p),\n      (f = x - 1),\n      (1 === t && x > 852) || (2 === t && x > 592))\n    )\n      return 1;\n    for (;;) {\n      (Z = w - v),\n        r[m] + 1 < u ? ((U = 0), (S = r[m])) : r[m] >= u ? ((U = D[r[m] - u]), (S = A[r[m] - u])) : ((U = 96), (S = 0)),\n        (h = 1 << (w - v)),\n        (d = 1 << k),\n        (b = d);\n      do {\n        (d -= h), (n[c + (z >> v) + d] = (Z << 24) | (U << 16) | S | 0);\n      } while (0 !== d);\n      for (h = 1 << (w - 1); z & h; ) h >>= 1;\n      if ((0 !== h ? ((z &= h - 1), (z += h)) : (z = 0), m++, 0 == --E[w])) {\n        if (w === g) break;\n        w = e[a + r[m]];\n      }\n      if (w > p && (z & f) !== _) {\n        for (0 === v && (v = p), c += b, k = w - v, y = 1 << k; k + v < g && ((y -= E[k + v]), !(y <= 0)); )\n          k++, (y <<= 1);\n        if (((x += 1 << k), (1 === t && x > 852) || (2 === t && x > 592))) return 1;\n        (_ = z & f), (n[_] = (p << 24) | (k << 16) | (c - s) | 0);\n      }\n    }\n    return 0 !== z && (n[c + z] = ((w - v) << 24) | (64 << 16) | 0), (o.bits = p), 0;\n  };\n  const {\n      Z_FINISH: be,\n      Z_BLOCK: ge,\n      Z_TREES: pe,\n      Z_OK: ke,\n      Z_STREAM_END: ve,\n      Z_NEED_DICT: ye,\n      Z_STREAM_ERROR: xe,\n      Z_DATA_ERROR: ze,\n      Z_MEM_ERROR: Ae,\n      Z_BUF_ERROR: Ee,\n      Z_DEFLATED: Re,\n    } = K,\n    Ze = 16180,\n    Ue = 16190,\n    Se = 16191,\n    De = 16192,\n    Te = 16194,\n    Oe = 16199,\n    Ie = 16200,\n    Fe = 16206,\n    Le = 16209,\n    Ne = (t) => ((t >>> 24) & 255) + ((t >>> 8) & 65280) + ((65280 & t) << 8) + ((255 & t) << 24);\n  function Be() {\n    (this.strm = null),\n      (this.mode = 0),\n      (this.last = !1),\n      (this.wrap = 0),\n      (this.havedict = !1),\n      (this.flags = 0),\n      (this.dmax = 0),\n      (this.check = 0),\n      (this.total = 0),\n      (this.head = null),\n      (this.wbits = 0),\n      (this.wsize = 0),\n      (this.whave = 0),\n      (this.wnext = 0),\n      (this.window = null),\n      (this.hold = 0),\n      (this.bits = 0),\n      (this.length = 0),\n      (this.offset = 0),\n      (this.extra = 0),\n      (this.lencode = null),\n      (this.distcode = null),\n      (this.lenbits = 0),\n      (this.distbits = 0),\n      (this.ncode = 0),\n      (this.nlen = 0),\n      (this.ndist = 0),\n      (this.have = 0),\n      (this.next = null),\n      (this.lens = new Uint16Array(320)),\n      (this.work = new Uint16Array(288)),\n      (this.lendyn = null),\n      (this.distdyn = null),\n      (this.sane = 0),\n      (this.back = 0),\n      (this.was = 0);\n  }\n  const Ce = (t) => {\n      if (!t) return 1;\n      const e = t.state;\n      return !e || e.strm !== t || e.mode < Ze || e.mode > 16211 ? 1 : 0;\n    },\n    Me = (t) => {\n      if (Ce(t)) return xe;\n      const e = t.state;\n      return (\n        (t.total_in = t.total_out = e.total = 0),\n        (t.msg = ''),\n        e.wrap && (t.adler = 1 & e.wrap),\n        (e.mode = Ze),\n        (e.last = 0),\n        (e.havedict = 0),\n        (e.flags = -1),\n        (e.dmax = 32768),\n        (e.head = null),\n        (e.hold = 0),\n        (e.bits = 0),\n        (e.lencode = e.lendyn = new Int32Array(852)),\n        (e.distcode = e.distdyn = new Int32Array(592)),\n        (e.sane = 1),\n        (e.back = -1),\n        ke\n      );\n    },\n    He = (t) => {\n      if (Ce(t)) return xe;\n      const e = t.state;\n      return (e.wsize = 0), (e.whave = 0), (e.wnext = 0), Me(t);\n    },\n    je = (t, e) => {\n      let a;\n      if (Ce(t)) return xe;\n      const i = t.state;\n      return (\n        e < 0 ? ((a = 0), (e = -e)) : ((a = 5 + (e >> 4)), e < 48 && (e &= 15)),\n        e && (e < 8 || e > 15)\n          ? xe\n          : (null !== i.window && i.wbits !== e && (i.window = null), (i.wrap = a), (i.wbits = e), He(t))\n      );\n    },\n    Ke = (t, e) => {\n      if (!t) return xe;\n      const a = new Be();\n      (t.state = a), (a.strm = t), (a.window = null), (a.mode = Ze);\n      const i = je(t, e);\n      return i !== ke && (t.state = null), i;\n    };\n  let Pe,\n    Ye,\n    Ge = !0;\n  const Xe = (t) => {\n      if (Ge) {\n        (Pe = new Int32Array(512)), (Ye = new Int32Array(32));\n        let e = 0;\n        for (; e < 144; ) t.lens[e++] = 8;\n        for (; e < 256; ) t.lens[e++] = 9;\n        for (; e < 280; ) t.lens[e++] = 7;\n        for (; e < 288; ) t.lens[e++] = 8;\n        for (me(1, t.lens, 0, 288, Pe, 0, t.work, { bits: 9 }), e = 0; e < 32; ) t.lens[e++] = 5;\n        me(2, t.lens, 0, 32, Ye, 0, t.work, { bits: 5 }), (Ge = !1);\n      }\n      (t.lencode = Pe), (t.lenbits = 9), (t.distcode = Ye), (t.distbits = 5);\n    },\n    We = (t, e, a, i) => {\n      let n;\n      const s = t.state;\n      return (\n        null === s.window &&\n          ((s.wsize = 1 << s.wbits), (s.wnext = 0), (s.whave = 0), (s.window = new Uint8Array(s.wsize))),\n        i >= s.wsize\n          ? (s.window.set(e.subarray(a - s.wsize, a), 0), (s.wnext = 0), (s.whave = s.wsize))\n          : ((n = s.wsize - s.wnext),\n            n > i && (n = i),\n            s.window.set(e.subarray(a - i, a - i + n), s.wnext),\n            (i -= n)\n              ? (s.window.set(e.subarray(a - i, a), 0), (s.wnext = i), (s.whave = s.wsize))\n              : ((s.wnext += n), s.wnext === s.wsize && (s.wnext = 0), s.whave < s.wsize && (s.whave += n))),\n        0\n      );\n    };\n  var qe = {\n    inflateReset: He,\n    inflateReset2: je,\n    inflateResetKeep: Me,\n    inflateInit: (t) => Ke(t, 15),\n    inflateInit2: Ke,\n    inflate: (t, e) => {\n      let a,\n        i,\n        n,\n        s,\n        r,\n        o,\n        l,\n        h,\n        d,\n        _,\n        f,\n        c,\n        u,\n        w,\n        m,\n        b,\n        g,\n        p,\n        k,\n        v,\n        y,\n        x,\n        z = 0;\n      const A = new Uint8Array(4);\n      let E, R;\n      const Z = new Uint8Array([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]);\n      if (Ce(t) || !t.output || (!t.input && 0 !== t.avail_in)) return xe;\n      (a = t.state),\n        a.mode === Se && (a.mode = De),\n        (r = t.next_out),\n        (n = t.output),\n        (l = t.avail_out),\n        (s = t.next_in),\n        (i = t.input),\n        (o = t.avail_in),\n        (h = a.hold),\n        (d = a.bits),\n        (_ = o),\n        (f = l),\n        (x = ke);\n      t: for (;;)\n        switch (a.mode) {\n          case Ze:\n            if (0 === a.wrap) {\n              a.mode = De;\n              break;\n            }\n            for (; d < 16; ) {\n              if (0 === o) break t;\n              o--, (h += i[s++] << d), (d += 8);\n            }\n            if (2 & a.wrap && 35615 === h) {\n              0 === a.wbits && (a.wbits = 15),\n                (a.check = 0),\n                (A[0] = 255 & h),\n                (A[1] = (h >>> 8) & 255),\n                (a.check = H(a.check, A, 2, 0)),\n                (h = 0),\n                (d = 0),\n                (a.mode = 16181);\n              break;\n            }\n            if ((a.head && (a.head.done = !1), !(1 & a.wrap) || (((255 & h) << 8) + (h >> 8)) % 31)) {\n              (t.msg = 'incorrect header check'), (a.mode = Le);\n              break;\n            }\n            if ((15 & h) !== Re) {\n              (t.msg = 'unknown compression method'), (a.mode = Le);\n              break;\n            }\n            if (((h >>>= 4), (d -= 4), (y = 8 + (15 & h)), 0 === a.wbits && (a.wbits = y), y > 15 || y > a.wbits)) {\n              (t.msg = 'invalid window size'), (a.mode = Le);\n              break;\n            }\n            (a.dmax = 1 << a.wbits),\n              (a.flags = 0),\n              (t.adler = a.check = 1),\n              (a.mode = 512 & h ? 16189 : Se),\n              (h = 0),\n              (d = 0);\n            break;\n          case 16181:\n            for (; d < 16; ) {\n              if (0 === o) break t;\n              o--, (h += i[s++] << d), (d += 8);\n            }\n            if (((a.flags = h), (255 & a.flags) !== Re)) {\n              (t.msg = 'unknown compression method'), (a.mode = Le);\n              break;\n            }\n            if (57344 & a.flags) {\n              (t.msg = 'unknown header flags set'), (a.mode = Le);\n              break;\n            }\n            a.head && (a.head.text = (h >> 8) & 1),\n              512 & a.flags &&\n                4 & a.wrap &&\n                ((A[0] = 255 & h), (A[1] = (h >>> 8) & 255), (a.check = H(a.check, A, 2, 0))),\n              (h = 0),\n              (d = 0),\n              (a.mode = 16182);\n          case 16182:\n            for (; d < 32; ) {\n              if (0 === o) break t;\n              o--, (h += i[s++] << d), (d += 8);\n            }\n            a.head && (a.head.time = h),\n              512 & a.flags &&\n                4 & a.wrap &&\n                ((A[0] = 255 & h),\n                (A[1] = (h >>> 8) & 255),\n                (A[2] = (h >>> 16) & 255),\n                (A[3] = (h >>> 24) & 255),\n                (a.check = H(a.check, A, 4, 0))),\n              (h = 0),\n              (d = 0),\n              (a.mode = 16183);\n          case 16183:\n            for (; d < 16; ) {\n              if (0 === o) break t;\n              o--, (h += i[s++] << d), (d += 8);\n            }\n            a.head && ((a.head.xflags = 255 & h), (a.head.os = h >> 8)),\n              512 & a.flags &&\n                4 & a.wrap &&\n                ((A[0] = 255 & h), (A[1] = (h >>> 8) & 255), (a.check = H(a.check, A, 2, 0))),\n              (h = 0),\n              (d = 0),\n              (a.mode = 16184);\n          case 16184:\n            if (1024 & a.flags) {\n              for (; d < 16; ) {\n                if (0 === o) break t;\n                o--, (h += i[s++] << d), (d += 8);\n              }\n              (a.length = h),\n                a.head && (a.head.extra_len = h),\n                512 & a.flags &&\n                  4 & a.wrap &&\n                  ((A[0] = 255 & h), (A[1] = (h >>> 8) & 255), (a.check = H(a.check, A, 2, 0))),\n                (h = 0),\n                (d = 0);\n            } else a.head && (a.head.extra = null);\n            a.mode = 16185;\n          case 16185:\n            if (\n              1024 & a.flags &&\n              ((c = a.length),\n              c > o && (c = o),\n              c &&\n                (a.head &&\n                  ((y = a.head.extra_len - a.length),\n                  a.head.extra || (a.head.extra = new Uint8Array(a.head.extra_len)),\n                  a.head.extra.set(i.subarray(s, s + c), y)),\n                512 & a.flags && 4 & a.wrap && (a.check = H(a.check, i, c, s)),\n                (o -= c),\n                (s += c),\n                (a.length -= c)),\n              a.length)\n            )\n              break t;\n            (a.length = 0), (a.mode = 16186);\n          case 16186:\n            if (2048 & a.flags) {\n              if (0 === o) break t;\n              c = 0;\n              do {\n                (y = i[s + c++]), a.head && y && a.length < 65536 && (a.head.name += String.fromCharCode(y));\n              } while (y && c < o);\n              if ((512 & a.flags && 4 & a.wrap && (a.check = H(a.check, i, c, s)), (o -= c), (s += c), y)) break t;\n            } else a.head && (a.head.name = null);\n            (a.length = 0), (a.mode = 16187);\n          case 16187:\n            if (4096 & a.flags) {\n              if (0 === o) break t;\n              c = 0;\n              do {\n                (y = i[s + c++]), a.head && y && a.length < 65536 && (a.head.comment += String.fromCharCode(y));\n              } while (y && c < o);\n              if ((512 & a.flags && 4 & a.wrap && (a.check = H(a.check, i, c, s)), (o -= c), (s += c), y)) break t;\n            } else a.head && (a.head.comment = null);\n            a.mode = 16188;\n          case 16188:\n            if (512 & a.flags) {\n              for (; d < 16; ) {\n                if (0 === o) break t;\n                o--, (h += i[s++] << d), (d += 8);\n              }\n              if (4 & a.wrap && h !== (65535 & a.check)) {\n                (t.msg = 'header crc mismatch'), (a.mode = Le);\n                break;\n              }\n              (h = 0), (d = 0);\n            }\n            a.head && ((a.head.hcrc = (a.flags >> 9) & 1), (a.head.done = !0)), (t.adler = a.check = 0), (a.mode = Se);\n            break;\n          case 16189:\n            for (; d < 32; ) {\n              if (0 === o) break t;\n              o--, (h += i[s++] << d), (d += 8);\n            }\n            (t.adler = a.check = Ne(h)), (h = 0), (d = 0), (a.mode = Ue);\n          case Ue:\n            if (0 === a.havedict)\n              return (\n                (t.next_out = r), (t.avail_out = l), (t.next_in = s), (t.avail_in = o), (a.hold = h), (a.bits = d), ye\n              );\n            (t.adler = a.check = 1), (a.mode = Se);\n          case Se:\n            if (e === ge || e === pe) break t;\n          case De:\n            if (a.last) {\n              (h >>>= 7 & d), (d -= 7 & d), (a.mode = Fe);\n              break;\n            }\n            for (; d < 3; ) {\n              if (0 === o) break t;\n              o--, (h += i[s++] << d), (d += 8);\n            }\n            switch (((a.last = 1 & h), (h >>>= 1), (d -= 1), 3 & h)) {\n              case 0:\n                a.mode = 16193;\n                break;\n              case 1:\n                if ((Xe(a), (a.mode = Oe), e === pe)) {\n                  (h >>>= 2), (d -= 2);\n                  break t;\n                }\n                break;\n              case 2:\n                a.mode = 16196;\n                break;\n              case 3:\n                (t.msg = 'invalid block type'), (a.mode = Le);\n            }\n            (h >>>= 2), (d -= 2);\n            break;\n          case 16193:\n            for (h >>>= 7 & d, d -= 7 & d; d < 32; ) {\n              if (0 === o) break t;\n              o--, (h += i[s++] << d), (d += 8);\n            }\n            if ((65535 & h) != ((h >>> 16) ^ 65535)) {\n              (t.msg = 'invalid stored block lengths'), (a.mode = Le);\n              break;\n            }\n            if (((a.length = 65535 & h), (h = 0), (d = 0), (a.mode = Te), e === pe)) break t;\n          case Te:\n            a.mode = 16195;\n          case 16195:\n            if (((c = a.length), c)) {\n              if ((c > o && (c = o), c > l && (c = l), 0 === c)) break t;\n              n.set(i.subarray(s, s + c), r), (o -= c), (s += c), (l -= c), (r += c), (a.length -= c);\n              break;\n            }\n            a.mode = Se;\n            break;\n          case 16196:\n            for (; d < 14; ) {\n              if (0 === o) break t;\n              o--, (h += i[s++] << d), (d += 8);\n            }\n            if (\n              ((a.nlen = 257 + (31 & h)),\n              (h >>>= 5),\n              (d -= 5),\n              (a.ndist = 1 + (31 & h)),\n              (h >>>= 5),\n              (d -= 5),\n              (a.ncode = 4 + (15 & h)),\n              (h >>>= 4),\n              (d -= 4),\n              a.nlen > 286 || a.ndist > 30)\n            ) {\n              (t.msg = 'too many length or distance symbols'), (a.mode = Le);\n              break;\n            }\n            (a.have = 0), (a.mode = 16197);\n          case 16197:\n            for (; a.have < a.ncode; ) {\n              for (; d < 3; ) {\n                if (0 === o) break t;\n                o--, (h += i[s++] << d), (d += 8);\n              }\n              (a.lens[Z[a.have++]] = 7 & h), (h >>>= 3), (d -= 3);\n            }\n            for (; a.have < 19; ) a.lens[Z[a.have++]] = 0;\n            if (\n              ((a.lencode = a.lendyn),\n              (a.lenbits = 7),\n              (E = { bits: a.lenbits }),\n              (x = me(0, a.lens, 0, 19, a.lencode, 0, a.work, E)),\n              (a.lenbits = E.bits),\n              x)\n            ) {\n              (t.msg = 'invalid code lengths set'), (a.mode = Le);\n              break;\n            }\n            (a.have = 0), (a.mode = 16198);\n          case 16198:\n            for (; a.have < a.nlen + a.ndist; ) {\n              for (\n                ;\n                (z = a.lencode[h & ((1 << a.lenbits) - 1)]),\n                  (m = z >>> 24),\n                  (b = (z >>> 16) & 255),\n                  (g = 65535 & z),\n                  !(m <= d);\n\n              ) {\n                if (0 === o) break t;\n                o--, (h += i[s++] << d), (d += 8);\n              }\n              if (g < 16) (h >>>= m), (d -= m), (a.lens[a.have++] = g);\n              else {\n                if (16 === g) {\n                  for (R = m + 2; d < R; ) {\n                    if (0 === o) break t;\n                    o--, (h += i[s++] << d), (d += 8);\n                  }\n                  if (((h >>>= m), (d -= m), 0 === a.have)) {\n                    (t.msg = 'invalid bit length repeat'), (a.mode = Le);\n                    break;\n                  }\n                  (y = a.lens[a.have - 1]), (c = 3 + (3 & h)), (h >>>= 2), (d -= 2);\n                } else if (17 === g) {\n                  for (R = m + 3; d < R; ) {\n                    if (0 === o) break t;\n                    o--, (h += i[s++] << d), (d += 8);\n                  }\n                  (h >>>= m), (d -= m), (y = 0), (c = 3 + (7 & h)), (h >>>= 3), (d -= 3);\n                } else {\n                  for (R = m + 7; d < R; ) {\n                    if (0 === o) break t;\n                    o--, (h += i[s++] << d), (d += 8);\n                  }\n                  (h >>>= m), (d -= m), (y = 0), (c = 11 + (127 & h)), (h >>>= 7), (d -= 7);\n                }\n                if (a.have + c > a.nlen + a.ndist) {\n                  (t.msg = 'invalid bit length repeat'), (a.mode = Le);\n                  break;\n                }\n                for (; c--; ) a.lens[a.have++] = y;\n              }\n            }\n            if (a.mode === Le) break;\n            if (0 === a.lens[256]) {\n              (t.msg = 'invalid code -- missing end-of-block'), (a.mode = Le);\n              break;\n            }\n            if (\n              ((a.lenbits = 9),\n              (E = { bits: a.lenbits }),\n              (x = me(1, a.lens, 0, a.nlen, a.lencode, 0, a.work, E)),\n              (a.lenbits = E.bits),\n              x)\n            ) {\n              (t.msg = 'invalid literal/lengths set'), (a.mode = Le);\n              break;\n            }\n            if (\n              ((a.distbits = 6),\n              (a.distcode = a.distdyn),\n              (E = { bits: a.distbits }),\n              (x = me(2, a.lens, a.nlen, a.ndist, a.distcode, 0, a.work, E)),\n              (a.distbits = E.bits),\n              x)\n            ) {\n              (t.msg = 'invalid distances set'), (a.mode = Le);\n              break;\n            }\n            if (((a.mode = Oe), e === pe)) break t;\n          case Oe:\n            a.mode = Ie;\n          case Ie:\n            if (o >= 6 && l >= 258) {\n              (t.next_out = r),\n                (t.avail_out = l),\n                (t.next_in = s),\n                (t.avail_in = o),\n                (a.hold = h),\n                (a.bits = d),\n                de(t, f),\n                (r = t.next_out),\n                (n = t.output),\n                (l = t.avail_out),\n                (s = t.next_in),\n                (i = t.input),\n                (o = t.avail_in),\n                (h = a.hold),\n                (d = a.bits),\n                a.mode === Se && (a.back = -1);\n              break;\n            }\n            for (\n              a.back = 0;\n              (z = a.lencode[h & ((1 << a.lenbits) - 1)]),\n                (m = z >>> 24),\n                (b = (z >>> 16) & 255),\n                (g = 65535 & z),\n                !(m <= d);\n\n            ) {\n              if (0 === o) break t;\n              o--, (h += i[s++] << d), (d += 8);\n            }\n            if (b && 0 == (240 & b)) {\n              for (\n                p = m, k = b, v = g;\n                (z = a.lencode[v + ((h & ((1 << (p + k)) - 1)) >> p)]),\n                  (m = z >>> 24),\n                  (b = (z >>> 16) & 255),\n                  (g = 65535 & z),\n                  !(p + m <= d);\n\n              ) {\n                if (0 === o) break t;\n                o--, (h += i[s++] << d), (d += 8);\n              }\n              (h >>>= p), (d -= p), (a.back += p);\n            }\n            if (((h >>>= m), (d -= m), (a.back += m), (a.length = g), 0 === b)) {\n              a.mode = 16205;\n              break;\n            }\n            if (32 & b) {\n              (a.back = -1), (a.mode = Se);\n              break;\n            }\n            if (64 & b) {\n              (t.msg = 'invalid literal/length code'), (a.mode = Le);\n              break;\n            }\n            (a.extra = 15 & b), (a.mode = 16201);\n          case 16201:\n            if (a.extra) {\n              for (R = a.extra; d < R; ) {\n                if (0 === o) break t;\n                o--, (h += i[s++] << d), (d += 8);\n              }\n              (a.length += h & ((1 << a.extra) - 1)), (h >>>= a.extra), (d -= a.extra), (a.back += a.extra);\n            }\n            (a.was = a.length), (a.mode = 16202);\n          case 16202:\n            for (\n              ;\n              (z = a.distcode[h & ((1 << a.distbits) - 1)]),\n                (m = z >>> 24),\n                (b = (z >>> 16) & 255),\n                (g = 65535 & z),\n                !(m <= d);\n\n            ) {\n              if (0 === o) break t;\n              o--, (h += i[s++] << d), (d += 8);\n            }\n            if (0 == (240 & b)) {\n              for (\n                p = m, k = b, v = g;\n                (z = a.distcode[v + ((h & ((1 << (p + k)) - 1)) >> p)]),\n                  (m = z >>> 24),\n                  (b = (z >>> 16) & 255),\n                  (g = 65535 & z),\n                  !(p + m <= d);\n\n              ) {\n                if (0 === o) break t;\n                o--, (h += i[s++] << d), (d += 8);\n              }\n              (h >>>= p), (d -= p), (a.back += p);\n            }\n            if (((h >>>= m), (d -= m), (a.back += m), 64 & b)) {\n              (t.msg = 'invalid distance code'), (a.mode = Le);\n              break;\n            }\n            (a.offset = g), (a.extra = 15 & b), (a.mode = 16203);\n          case 16203:\n            if (a.extra) {\n              for (R = a.extra; d < R; ) {\n                if (0 === o) break t;\n                o--, (h += i[s++] << d), (d += 8);\n              }\n              (a.offset += h & ((1 << a.extra) - 1)), (h >>>= a.extra), (d -= a.extra), (a.back += a.extra);\n            }\n            if (a.offset > a.dmax) {\n              (t.msg = 'invalid distance too far back'), (a.mode = Le);\n              break;\n            }\n            a.mode = 16204;\n          case 16204:\n            if (0 === l) break t;\n            if (((c = f - l), a.offset > c)) {\n              if (((c = a.offset - c), c > a.whave && a.sane)) {\n                (t.msg = 'invalid distance too far back'), (a.mode = Le);\n                break;\n              }\n              c > a.wnext ? ((c -= a.wnext), (u = a.wsize - c)) : (u = a.wnext - c),\n                c > a.length && (c = a.length),\n                (w = a.window);\n            } else (w = n), (u = r - a.offset), (c = a.length);\n            c > l && (c = l), (l -= c), (a.length -= c);\n            do {\n              n[r++] = w[u++];\n            } while (--c);\n            0 === a.length && (a.mode = Ie);\n            break;\n          case 16205:\n            if (0 === l) break t;\n            (n[r++] = a.length), l--, (a.mode = Ie);\n            break;\n          case Fe:\n            if (a.wrap) {\n              for (; d < 32; ) {\n                if (0 === o) break t;\n                o--, (h |= i[s++] << d), (d += 8);\n              }\n              if (\n                ((f -= l),\n                (t.total_out += f),\n                (a.total += f),\n                4 & a.wrap && f && (t.adler = a.check = a.flags ? H(a.check, n, f, r - f) : C(a.check, n, f, r - f)),\n                (f = l),\n                4 & a.wrap && (a.flags ? h : Ne(h)) !== a.check)\n              ) {\n                (t.msg = 'incorrect data check'), (a.mode = Le);\n                break;\n              }\n              (h = 0), (d = 0);\n            }\n            a.mode = 16207;\n          case 16207:\n            if (a.wrap && a.flags) {\n              for (; d < 32; ) {\n                if (0 === o) break t;\n                o--, (h += i[s++] << d), (d += 8);\n              }\n              if (4 & a.wrap && h !== (4294967295 & a.total)) {\n                (t.msg = 'incorrect length check'), (a.mode = Le);\n                break;\n              }\n              (h = 0), (d = 0);\n            }\n            a.mode = 16208;\n          case 16208:\n            x = ve;\n            break t;\n          case Le:\n            x = ze;\n            break t;\n          case 16210:\n            return Ae;\n          default:\n            return xe;\n        }\n      return (\n        (t.next_out = r),\n        (t.avail_out = l),\n        (t.next_in = s),\n        (t.avail_in = o),\n        (a.hold = h),\n        (a.bits = d),\n        (a.wsize || (f !== t.avail_out && a.mode < Le && (a.mode < Fe || e !== be))) &&\n          We(t, t.output, t.next_out, f - t.avail_out),\n        (_ -= t.avail_in),\n        (f -= t.avail_out),\n        (t.total_in += _),\n        (t.total_out += f),\n        (a.total += f),\n        4 & a.wrap &&\n          f &&\n          (t.adler = a.check = a.flags ? H(a.check, n, f, t.next_out - f) : C(a.check, n, f, t.next_out - f)),\n        (t.data_type =\n          a.bits + (a.last ? 64 : 0) + (a.mode === Se ? 128 : 0) + (a.mode === Oe || a.mode === Te ? 256 : 0)),\n        ((0 === _ && 0 === f) || e === be) && x === ke && (x = Ee),\n        x\n      );\n    },\n    inflateEnd: (t) => {\n      if (Ce(t)) return xe;\n      let e = t.state;\n      return e.window && (e.window = null), (t.state = null), ke;\n    },\n    inflateGetHeader: (t, e) => {\n      if (Ce(t)) return xe;\n      const a = t.state;\n      return 0 == (2 & a.wrap) ? xe : ((a.head = e), (e.done = !1), ke);\n    },\n    inflateSetDictionary: (t, e) => {\n      const a = e.length;\n      let i, n, s;\n      return Ce(t)\n        ? xe\n        : ((i = t.state),\n          0 !== i.wrap && i.mode !== Ue\n            ? xe\n            : i.mode === Ue && ((n = 1), (n = C(n, e, a, 0)), n !== i.check)\n            ? ze\n            : ((s = We(t, e, a, a)), s ? ((i.mode = 16210), Ae) : ((i.havedict = 1), ke)));\n    },\n    inflateInfo: 'pako inflate (from Nodeca project)',\n  };\n  var Je = function () {\n    (this.text = 0),\n      (this.time = 0),\n      (this.xflags = 0),\n      (this.os = 0),\n      (this.extra = null),\n      (this.extra_len = 0),\n      (this.name = ''),\n      (this.comment = ''),\n      (this.hcrc = 0),\n      (this.done = !1);\n  };\n  const Qe = Object.prototype.toString,\n    {\n      Z_NO_FLUSH: Ve,\n      Z_FINISH: $e,\n      Z_OK: ta,\n      Z_STREAM_END: ea,\n      Z_NEED_DICT: aa,\n      Z_STREAM_ERROR: ia,\n      Z_DATA_ERROR: na,\n      Z_MEM_ERROR: sa,\n    } = K;\n  function ra(t) {\n    this.options = jt({ chunkSize: 65536, windowBits: 15, to: '' }, t || {});\n    const e = this.options;\n    e.raw &&\n      e.windowBits >= 0 &&\n      e.windowBits < 16 &&\n      ((e.windowBits = -e.windowBits), 0 === e.windowBits && (e.windowBits = -15)),\n      !(e.windowBits >= 0 && e.windowBits < 16) || (t && t.windowBits) || (e.windowBits += 32),\n      e.windowBits > 15 && e.windowBits < 48 && 0 == (15 & e.windowBits) && (e.windowBits |= 15),\n      (this.err = 0),\n      (this.msg = ''),\n      (this.ended = !1),\n      (this.chunks = []),\n      (this.strm = new qt()),\n      (this.strm.avail_out = 0);\n    let a = qe.inflateInit2(this.strm, e.windowBits);\n    if (a !== ta) throw new Error(j[a]);\n    if (\n      ((this.header = new Je()),\n      qe.inflateGetHeader(this.strm, this.header),\n      e.dictionary &&\n        ('string' == typeof e.dictionary\n          ? (e.dictionary = Gt(e.dictionary))\n          : '[object ArrayBuffer]' === Qe.call(e.dictionary) && (e.dictionary = new Uint8Array(e.dictionary)),\n        e.raw && ((a = qe.inflateSetDictionary(this.strm, e.dictionary)), a !== ta)))\n    )\n      throw new Error(j[a]);\n  }\n  function oa(t, e) {\n    const a = new ra(e);\n    if ((a.push(t), a.err)) throw a.msg || j[a.err];\n    return a.result;\n  }\n  (ra.prototype.push = function (t, e) {\n    const a = this.strm,\n      i = this.options.chunkSize,\n      n = this.options.dictionary;\n    let s, r, o;\n    if (this.ended) return !1;\n    for (\n      r = e === ~~e ? e : !0 === e ? $e : Ve,\n        '[object ArrayBuffer]' === Qe.call(t) ? (a.input = new Uint8Array(t)) : (a.input = t),\n        a.next_in = 0,\n        a.avail_in = a.input.length;\n      ;\n\n    ) {\n      for (\n        0 === a.avail_out && ((a.output = new Uint8Array(i)), (a.next_out = 0), (a.avail_out = i)),\n          s = qe.inflate(a, r),\n          s === aa &&\n            n &&\n            ((s = qe.inflateSetDictionary(a, n)), s === ta ? (s = qe.inflate(a, r)) : s === na && (s = aa));\n        a.avail_in > 0 && s === ea && a.state.wrap > 0 && 0 !== t[a.next_in];\n\n      )\n        qe.inflateReset(a), (s = qe.inflate(a, r));\n      switch (s) {\n        case ia:\n        case na:\n        case aa:\n        case sa:\n          return this.onEnd(s), (this.ended = !0), !1;\n      }\n      if (((o = a.avail_out), a.next_out && (0 === a.avail_out || s === ea)))\n        if ('string' === this.options.to) {\n          let t = Wt(a.output, a.next_out),\n            e = a.next_out - t,\n            n = Xt(a.output, t);\n          (a.next_out = e), (a.avail_out = i - e), e && a.output.set(a.output.subarray(t, t + e), 0), this.onData(n);\n        } else this.onData(a.output.length === a.next_out ? a.output : a.output.subarray(0, a.next_out));\n      if (s !== ta || 0 !== o) {\n        if (s === ea) return (s = qe.inflateEnd(this.strm)), this.onEnd(s), (this.ended = !0), !0;\n        if (0 === a.avail_in) break;\n      }\n    }\n    return !0;\n  }),\n    (ra.prototype.onData = function (t) {\n      this.chunks.push(t);\n    }),\n    (ra.prototype.onEnd = function (t) {\n      t === ta &&\n        ('string' === this.options.to ? (this.result = this.chunks.join('')) : (this.result = Kt(this.chunks))),\n        (this.chunks = []),\n        (this.err = t),\n        (this.msg = this.strm.msg);\n    });\n  var la = {\n    Inflate: ra,\n    inflate: oa,\n    inflateRaw: function (t, e) {\n      return ((e = e || {}).raw = !0), oa(t, e);\n    },\n    ungzip: oa,\n    constants: K,\n  };\n  const { Deflate: ha, deflate: da, deflateRaw: _a, gzip: fa } = le,\n    { Inflate: ca, inflate: ua, inflateRaw: wa, ungzip: ma } = la;\n  var ba = ha,\n    ga = da,\n    pa = _a,\n    ka = fa,\n    va = ca,\n    ya = ua,\n    xa = wa,\n    za = ma,\n    Aa = K,\n    Ea = {\n      Deflate: ba,\n      deflate: ga,\n      deflateRaw: pa,\n      gzip: ka,\n      Inflate: va,\n      inflate: ya,\n      inflateRaw: xa,\n      ungzip: za,\n      constants: Aa,\n    };\n  (t.Deflate = ba),\n    (t.Inflate = va),\n    (t.constants = Aa),\n    (t.default = Ea),\n    (t.deflate = ga),\n    (t.deflateRaw = pa),\n    (t.gzip = ka),\n    (t.inflate = ya),\n    (t.inflateRaw = xa),\n    (t.ungzip = za),\n    Object.defineProperty(t, '__esModule', { value: !0 });\n});\n","let config = {};\nlet db;\nlet flushing = false;\nconst DB_NAME = 'conviva-session-record-db';\nconst STORE_NAME = 'events';\nconst POLICY_NAME = 'uploadPolicy';\nconst POLICY_KEY = 'policy';\nconst LOCK_STORE_NAME = 'flushLock';\nconst LOCK_KEY = 'lock';\nconst FLUSH_TIMESTAMP_STORE_NAME = 'flushTimestamp';\nconst FLUSH_TIMESTAMP_KEY = 'lastFlushTimestamp';\nconst MAX_EVENTS = 5000; //TODO: Check device storage\nconst FLUSH_TIME = 60 * 1000;\nconst FLUSH_COOLDOWN_TIME_BUFFER = 500; // 500 milliseconds buffer\nconst UPDATE_POLICY_EXPIRY_TIME = 3600; // 1 hour\nconst LOCK_TIMEOUT = 30000; // 30 seconds\nconst DEFAULT_GATEWAY_URL = 'https://rcg.conviva.com';\nlet flushTimer = null;\nlet initialEvents = [];\nlet uploadPolicyObject = null;\nlet initialFlushTimeout = null;\nconst workerScope = typeof self !== 'undefined' ? self : null;\n\nasync function openDB() {\n  return new Promise((resolve, reject) => {\n    const request = indexedDB.open(DB_NAME, 3);\n    request.onupgradeneeded = (event) => {\n      const db = request.result;\n      const oldVersion = event.oldVersion;\n\n      if (db) {\n        // Version 1: Initial schema\n        if (oldVersion < 1) {\n          const store = db.createObjectStore(STORE_NAME, { keyPath: 'id', autoIncrement: true });\n          store.createIndex('byTimestamp', 'timestamp');\n          const policy = db.createObjectStore(POLICY_NAME, { keyPath: 'id' });\n          policy.put({ id: POLICY_KEY, value: null });\n        }\n\n        // Version 2: Add separate object store for flush lock (multi-tab coordination)\n        if (oldVersion < 2) {\n          const lockStore = db.createObjectStore(LOCK_STORE_NAME, { keyPath: 'id' });\n          lockStore.put({ id: LOCK_KEY, value: null });\n        }\n\n        // Version 3: Add object store for flush timestamp\n        if (oldVersion < 3) {\n          const flushTimestampStore = db.createObjectStore(FLUSH_TIMESTAMP_STORE_NAME, { keyPath: 'id' });\n          flushTimestampStore.put({ id: FLUSH_TIMESTAMP_KEY, value: null });\n        }\n      }\n    };\n    request.onsuccess = () => resolve(request.result);\n    request.onerror = () => reject(request.error);\n  });\n}\n\nfunction deleteDB() {\n  if (db) {\n    db.close();\n    db = null;\n  }\n  return new Promise((resolve, reject) => {\n    const deleteRequest = indexedDB.deleteDatabase(DB_NAME);\n\n    deleteRequest.onsuccess = () => {\n      resolve();\n    };\n\n    deleteRequest.onerror = () => {\n      reject(deleteRequest.error);\n    };\n\n    deleteRequest.onblocked = () => {};\n  });\n}\n\nasync function storeEvent(eventPayload) {\n  if (!db) {\n    initialEvents.push(eventPayload.event);\n    return;\n  }\n\n  try {\n    const tx = db.transaction(STORE_NAME, 'readwrite');\n    const store = tx.objectStore(STORE_NAME);\n    if (initialEvents.length > 0) {\n      initialEvents.forEach((event) => store.add(event));\n      initialEvents = [];\n    }\n    store.add(eventPayload.event);\n\n    await tx.done;\n  } catch (error) {\n    //console.warn('Failed to store event:', error);\n  }\n}\n\nasync function getAllEvents() {\n  if (!db) {\n    return [];\n  }\n\n  const tx = db.transaction(STORE_NAME, 'readonly');\n  const store = tx.objectStore(STORE_NAME);\n  const index = store.index('byTimestamp');\n  const request = index.getAll();\n\n  return new Promise((resolve, reject) => {\n    tx.onerror = () => reject(tx.error);\n    request.onerror = () => reject(request.error);\n\n    request.onsuccess = () => resolve(request.result);\n  });\n}\n\nasync function pruneOldEvents() {\n  if (!db) {\n    return;\n  }\n\n  return new Promise((resolve) => {\n    let awaitingFlush = false;\n    let resolved = false;\n\n    const finish = () => {\n      if (!resolved) {\n        resolved = true;\n        resolve();\n      }\n    };\n\n    try {\n      const tx = db.transaction(STORE_NAME, 'readwrite');\n      const store = tx.objectStore(STORE_NAME);\n      let initialCount = 0;\n\n      tx.oncomplete = () => {\n        if (!awaitingFlush) {\n          finish();\n        }\n      };\n      tx.onerror = () => {\n        finish(); // Resolve silently if transaction fails (e.g., database closing)\n      };\n      const countReq = store.count();\n\n      countReq.onsuccess = async () => {\n        initialCount = countReq.result;\n\n        if (initialCount <= MAX_EVENTS) {\n          finish(); // Resolve the promise when no pruning needed\n          return;\n        }\n        awaitingFlush = true;\n        try {\n          await flushEvents(true);\n        } catch (error) {\n          // Swallow errors to keep pruning resilient\n        } finally {\n          awaitingFlush = false;\n          finish();\n        }\n      };\n\n      countReq.onerror = () => {\n        finish(); // Resolve silently if count fails\n      };\n    } catch (error) {\n      finish(); // Resolve silently if transaction creation fails (e.g., InvalidStateError)\n    }\n  });\n}\n\nasync function setPolicyValue(value) {\n  if (!db) {\n    return;\n  }\n  try {\n    const tx = db.transaction(POLICY_NAME, 'readwrite');\n    const policyStore = tx.objectStore(POLICY_NAME);\n    policyStore.put({ id: POLICY_KEY, value });\n    await tx.done;\n  } catch (error) {}\n}\n\nasync function getPolicyValue() {\n  if (!db) {\n    return null;\n  }\n\n  return new Promise((resolve, reject) => {\n    const tx = db.transaction(POLICY_NAME, 'readonly');\n    const req = tx.objectStore(POLICY_NAME).get(POLICY_KEY); // e.g. 'policy'\n\n    req.onsuccess = () => resolve(req.result ? req.result.value : null); // <-- result, not value\n    req.onerror = () => reject(req.error);\n  });\n}\n\n/**\n * Try to acquire an IndexedDB-based flush lock.\n * Returns true if lock was acquired, false otherwise.\n * The lock expires after 30 seconds to prevent deadlocks.\n */\nasync function tryAcquireFlushLock() {\n  if (!db) {\n    return false;\n  }\n\n  try {\n    return new Promise((resolve) => {\n      const tx = db.transaction(LOCK_STORE_NAME, 'readwrite');\n      const store = tx.objectStore(LOCK_STORE_NAME);\n      const getReq = store.get(LOCK_KEY);\n\n      getReq.onsuccess = () => {\n        const lockData = getReq.result ? getReq.result.value : null;\n        const now = Date.now();\n\n        // Check if lock is available (null or expired)\n        if (!lockData || now - lockData.timestamp > LOCK_TIMEOUT) {\n          // Acquire the lock by setting current timestamp\n          const putReq = store.put({ id: LOCK_KEY, value: { timestamp: now } });\n          putReq.onsuccess = () => resolve(true);\n          putReq.onerror = () => resolve(false);\n        } else {\n          // Lock is held by another worker\n          resolve(false);\n        }\n      };\n\n      getReq.onerror = () => resolve(false);\n      tx.onerror = () => resolve(false);\n    });\n  } catch (error) {\n    return false;\n  }\n}\n\n/**\n * Release the IndexedDB-based flush lock.\n */\nasync function releaseFlushLock() {\n  if (!db) {\n    return;\n  }\n\n  try {\n    const tx = db.transaction(LOCK_STORE_NAME, 'readwrite');\n    const store = tx.objectStore(LOCK_STORE_NAME);\n    store.put({ id: LOCK_KEY, value: null });\n    await tx.done;\n  } catch (error) {\n    // Silently fail - lock will expire anyway\n  }\n}\n\n/**\n * Get the last flush timestamp from IndexedDB.\n * Returns null if no timestamp is stored.\n */\nasync function getLastFlushTimestamp() {\n  if (!db) {\n    return null;\n  }\n\n  return new Promise((resolve, reject) => {\n    const tx = db.transaction(FLUSH_TIMESTAMP_STORE_NAME, 'readonly');\n    const req = tx.objectStore(FLUSH_TIMESTAMP_STORE_NAME).get(FLUSH_TIMESTAMP_KEY);\n\n    req.onsuccess = () => resolve(req.result ? req.result.value : null);\n    req.onerror = () => reject(req.error);\n  });\n}\n\n/**\n * Set the last flush timestamp in IndexedDB.\n */\nasync function setLastFlushTimestamp(timestamp) {\n  if (!db) {\n    return;\n  }\n  try {\n    const tx = db.transaction(FLUSH_TIMESTAMP_STORE_NAME, 'readwrite');\n    const store = tx.objectStore(FLUSH_TIMESTAMP_STORE_NAME);\n    store.put({ id: FLUSH_TIMESTAMP_KEY, value: timestamp });\n    await tx.done;\n  } catch (error) {\n    // Silently fail\n  }\n}\n\n/**\n * Check if enough time has passed since the last flush.\n * Returns true if flush should be allowed, false otherwise.\n */\nasync function shouldAllowFlush(currentTimeStamp) {\n  const lastFlushTimestamp = await getLastFlushTimestamp();\n\n  // If no timestamp exists, allow flush\n  if (!lastFlushTimestamp) {\n    return true;\n  }\n  const timeSinceLastFlush = currentTimeStamp - lastFlushTimestamp;\n\n  // Allow flush if more than 1 minute has passed\n  const flushIntervalDelay = config.uploadInterval ? config.uploadInterval * 1000 : FLUSH_TIME;\n  return timeSinceLastFlush + FLUSH_COOLDOWN_TIME_BUFFER >= flushIntervalDelay;\n}\n\nif (workerScope) {\n  workerScope.onmessage = async (e) => {\n    const { type, payload } = e.data;\n\n    if (type === 'config') {\n      config = payload;\n      if (!db) {\n        db = await openDB();\n        await flushEvents();\n      }\n      await scheduleFlush();\n    }\n    if (type === 'event') {\n      await storeEvent(payload);\n      await pruneOldEvents();\n    }\n    if (type === 'delete') {\n      await flushEvents();\n      await deleteDB();\n      if (workerScope && typeof workerScope.postMessage === 'function') {\n        workerScope.postMessage({ type: 'deletion-complete' });\n      }\n    }\n  };\n}\n\nasync function scheduleFlush() {\n  if (flushTimer) {\n    clearInterval(flushTimer);\n    flushTimer = null;\n  }\n  if (initialFlushTimeout) {\n    clearTimeout(initialFlushTimeout);\n    initialFlushTimeout = null;\n  }\n\n  const intervalDelay = config.uploadInterval ? config.uploadInterval * 1000 : FLUSH_TIME;\n  const startFlushInterval = () => {\n    flushTimer = setInterval(async () => {\n      if (flushing) return;\n      try {\n        await flushEvents(true);\n      } catch (err) {\n        //console.warn(err);\n      }\n    }, intervalDelay);\n  };\n\n  const runInitialFlushAndStartInterval = async () => {\n    try {\n      await flushEvents(true);\n    } catch (err) {\n      //console.warn(err);\n    } finally {\n      startFlushInterval();\n    }\n  };\n\n  try {\n    const lastFlushTimestamp = await getLastFlushTimestamp();\n    if (lastFlushTimestamp) {\n      const flushIntervalDelay = config.uploadInterval ? config.uploadInterval * 1000 : FLUSH_TIME;\n      const targetFlushTime = lastFlushTimestamp + flushIntervalDelay;\n      const delay = Math.max(0, targetFlushTime - Date.now());\n\n      if (delay > 0) {\n        initialFlushTimeout = setTimeout(() => {\n          runInitialFlushAndStartInterval()\n            .catch(() => {})\n            .finally(() => {\n              initialFlushTimeout = null;\n            });\n        }, delay);\n        return;\n      }\n    }\n  } catch (err) {\n    // Failed to read last flush timestamp, fall back to immediate scheduling\n  }\n\n  startFlushInterval();\n}\n\nasync function flushAllEvents(takeSnapShot) {\n  try {\n    // Always flush events for the current recordId\n    const allEvents = await getAllEvents();\n    if (allEvents.length === 0) return;\n\n    await uploadBatch(allEvents);\n\n    // Remove only these events from the store\n    const tx = db.transaction(STORE_NAME, 'readwrite');\n    const store = tx.objectStore(STORE_NAME);\n    for (const evt of allEvents) {\n      store.delete(evt.id);\n    }\n    await tx.done;\n    if (takeSnapShot && workerScope && typeof workerScope.postMessage === 'function') {\n      workerScope.postMessage({ type: 'takeSnapShot' });\n    }\n  } catch (error) {\n    throw error;\n  }\n}\n\nasync function flushEvents(takeSnapShot = false) {\n  if (flushing || !db) return;\n\n  // Check if enough time has passed since the last flush\n  let currentTimeStamp = Date.now();\n  const canFlush = await shouldAllowFlush(currentTimeStamp);\n  if (!canFlush) {\n    // Skip flush if less than 1 minute has passed\n    return;\n  }\n  // Update the last flush timestamp\n  await setLastFlushTimestamp(currentTimeStamp);\n\n  flushing = true;\n\n  try {\n    // Try Web Locks API first (modern browsers)\n    if (navigator && navigator.locks && navigator.locks.request) {\n      await navigator.locks.request('session-replay-flush', { mode: 'exclusive', ifAvailable: true }, async (lock) => {\n        if (lock) {\n          await flushAllEvents(takeSnapShot);\n        }\n      });\n    } else {\n      // Fallback: Use IndexedDB-based locking for older browsers\n      const lockAcquired = await tryAcquireFlushLock();\n      if (lockAcquired) {\n        try {\n          await flushAllEvents(takeSnapShot);\n        } finally {\n          await releaseFlushLock();\n        }\n      }\n      // If lock not acquired, skip flush (another worker is handling it)\n    }\n  } catch (err) {\n    //console.warn('flush failed', err);\n  } finally {\n    flushing = false;\n  }\n}\n\nasync function uploadBatch(events) {\n  try {\n    if (!events || events.length === 0) {\n      return;\n    }\n    let tabId = events[0]['_tabId'];\n    let timestamp = events[0]['timestamp'];\n    const json = JSON.stringify(events);\n    const compressed = pako.gzip(json);\n    const blob = new Blob([compressed], { type: 'application/octet-stream' });\n    const blobName = getBlobNameRoundedToMinute(timestamp, tabId);\n    await uploadFileToGcs(blob, blobName);\n  } catch (error) {\n    //console.warn('Error uploading batch:', error);\n    throw error; // Re-throw to handle in flushEvents\n  }\n}\n\nfunction sleep(ms) {\n  return new Promise((res) => setTimeout(res, ms));\n}\n\nfunction getBlobNameRoundedToMinute(timestamp, tabId) {\n  const date = new Date(timestamp); // Uses current time\n  date.setUTCSeconds(0, 0); // Rounds down to the start of the current minute\n\n  const day = String(date.getUTCDate()).padStart(2, '0');\n  const month = String(date.getUTCMonth() + 1).padStart(2, '0'); // Months are 0-indexed\n  const year = String(date.getUTCFullYear()).slice(-2);\n  const hour = String(date.getUTCHours()).padStart(2, '0');\n\n  const epoch = Math.floor(date.getTime() / 1000); // Epoch time in seconds (UTC-based)\n\n  const uuid = getUUID(); // Generate a UUID for uniqueness\n\n  return `${year}-${month}-${day}-${hour}-${epoch}_${tabId}_${uuid}.gz`;\n}\n\nasync function uploadFileToGcs(blob, blobName) {\n  try {\n    if (!uploadPolicyObject) {\n      uploadPolicyObject = await getPolicyValue();\n    }\n    const isPolicyInvalid = uploadPolicyObject ? Date.now() >= uploadPolicyObject.expiry : true;\n    if (isPolicyInvalid) {\n      const expiryTimeInSec = config.policyExpiryTime || UPDATE_POLICY_EXPIRY_TIME; // Default to 1 hour if not set\n      const gatewayUrl = getGatewayUrl();\n      const response = await fetch(`${gatewayUrl}`);\n      if (!response.ok) {\n        throw new Error('Failed to get upload policy from server.');\n      }\n      let uploadPolicy = await response.json();\n      let isoString = uploadPolicy.fields['x-goog-date'];\n      let urlExpiryTimestamp = convertToUnixTimestamp(isoString) + expiryTimeInSec * 1000; // Convert to milliseconds\n      uploadPolicyObject = { policy: uploadPolicy, expiry: urlExpiryTimestamp };\n      await setPolicyValue(uploadPolicyObject); // Store the new policy\n    }\n  } catch (error) {\n    throw error;\n  }\n\n  if (\n    !uploadPolicyObject ||\n    !uploadPolicyObject.policy ||\n    !uploadPolicyObject.policy.fields ||\n    !uploadPolicyObject.policy.url ||\n    !uploadPolicyObject.policy.customerID\n  ) {\n    throw new Error('Invalid upload policy object');\n  }\n  const form = new FormData();\n  Object.entries(uploadPolicyObject.policy.fields).forEach(([k, v]) => form.append(k, v));\n  let key = `${uploadPolicyObject.policy.customerID}/${config.clId}/${blobName}`;\n  form.set('key', key); // override the dummy one\n  form.append('file', blob, blobName);\n\n  try {\n    const uploadResponse = await fetch(uploadPolicyObject.policy.url, {\n      method: 'POST',\n      body: form,\n    });\n\n    if (!uploadResponse.ok) {\n      const errorText = await uploadResponse.text();\n      throw new Error(`GCS Upload Error: ${uploadResponse.status} ${errorText}`);\n    }\n  } catch (error) {\n    throw error;\n  }\n}\n\nfunction getGatewayUrl() {\n  const expiryTimeInSec = config.policyExpiryTime || UPDATE_POLICY_EXPIRY_TIME;\n  let endPointUrl = config.endpoint || DEFAULT_GATEWAY_URL;\n  return `${endPointUrl}/sr?clientId=${config.clId}&expiryTimeInSec=${expiryTimeInSec}&customerKey=${config.customerKey}`;\n}\n\nfunction convertToUnixTimestamp(isoString) {\n  const date = new Date(isoString.replace(/^(\\d{4})(\\d{2})(\\d{2})T(\\d{2})(\\d{2})(\\d{2})Z$/, '$1-$2-$3T$4:$5:$6Z'));\n  const unixTimestampInMilliSceonds = date.getTime();\n  return unixTimestampInMilliSceonds;\n}\n\nfunction getUUID() {\n  return Date.now().toString();\n}\n"],{type:"application/javascript"});this._workerUrl=URL.createObjectURL(a),this.worker=new Worker(this._workerUrl),this.recording=!1,this.recordingReady=!1,this.recordId=Date.now().toString(),this._storageListener=this._handleStorageEvent.bind(this),this.worker.postMessage({type:"config",payload:p(p(p({},null===(r=this.sessionReplayConfig)||void 0===r?void 0:r.emitterConfiguration),null===(i=this.sessionReplayConfig)||void 0===i?void 0:i.networkConfiguration),{},{customerKey:this.trackerConfiguration.convivaCustomerKey,clId:Ju().clId,recordId:this.recordId})}),this._handleVisibilityChange=this._handleVisibilityChange.bind(this),this.snapshotHandler=this.snapshotHandler.bind(this),this.takeFullSnapshot=this.takeFullSnapshot.bind(this),this.snapshotHandler(),this._initBroadcastChannel()},[{key:"takeFullSnapshot",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if("function"==typeof Vu.takeFullSnapshot){var t=function(){try{Vu.takeFullSnapshot(e)}catch(e){}};"requestIdleCallback"in window?requestIdleCallback(t,{timeout:1e3}):setTimeout(t,0)}}},{key:"snapshotHandler",value:function(){var e=this;this._messageHandlers.snapShotHandler=function(t){"takeSnapShot"===t.data.type&&("visible"===document.visibilityState?e.takeFullSnapshot(!0):e._broadcastFlushSignal())},this.worker.addEventListener("message",this._messageHandlers.snapShotHandler)}},{key:"initiateRecording",value:function(){var e=this;this.startRecording().catch(function(t){e.recording=!1,e.triggerSessionRecordingStatusEvent(!1)}),document.addEventListener("visibilitychange",this._handleVisibilityChange,{signal:qu()}),!this._broadcastChannel&&"undefined"!=typeof window&&this._storageListener&&window.addEventListener("storage",this._storageListener)}},{key:"startRecording",value:(t=r(v().m(function e(){var t,n,r,i,o,a,s,l,u,c,h,d,f,p,m,y,g,w,b,k,S,_,C,I,x,E,O,A,R,M,T,N,L,D,P,F,z,U,j,B,Z,G,V,W=this;return v().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!this.recording){e.n=1;break}return e.a(2);case 1:return this.recording=!0,this.triggerSessionRecordingStatusEvent(!0),e.p=2,e.n=3,this.waitForPageStability();case 3:V="complete"===document.readyState?0:null!==(t=null===(n=this.sessionReplayConfig)||void 0===n||null===(n=n.webRecorderConfiguration)||void 0===n?void 0:n.recordAfter)&&void 0!==t?t:"load",this.stopFn=Vu({blockSelector:null!==(r=null===(i=this.sessionReplayConfig)||void 0===i||null===(i=i.webRecorderConfiguration)||void 0===i?void 0:i.blockSelector)&&void 0!==r?r:void 0,ignoreSelector:null!==(o=null===(a=this.sessionReplayConfig)||void 0===a||null===(a=a.webRecorderConfiguration)||void 0===a?void 0:a.ignoreSelector)&&void 0!==o?o:void 0,ignoreCSSAttributes:null!==(s=null===(l=this.sessionReplayConfig)||void 0===l||null===(l=l.webRecorderConfiguration)||void 0===l?void 0:l.ignoreCSSAttributes)&&void 0!==s?s:void 0,maskTextSelector:null!==(u=null===(c=this.sessionReplayConfig)||void 0===c||null===(c=c.webRecorderConfiguration)||void 0===c?void 0:c.maskTextSelector)&&void 0!==u?u:void 0,maskAllInputs:null!==(h=null===(d=this.sessionReplayConfig)||void 0===d||null===(d=d.webRecorderConfiguration)||void 0===d?void 0:d.maskAllInputs)&&void 0!==h&&h,maskInputOptions:null!==(f=null===(p=this.sessionReplayConfig)||void 0===p||null===(p=p.webRecorderConfiguration)||void 0===p?void 0:p.maskInputOptions)&&void 0!==f?f:{password:!0,email:!0,textarea:!0,text:!0,tel:!0},slimDOMOptions:null!==(m=null===(y=this.sessionReplayConfig)||void 0===y||null===(y=y.webRecorderConfiguration)||void 0===y?void 0:y.slimDOMOptions)&&void 0!==m?m:{comment:!1,headWhitespace:!1,headMetaDescKeywords:!1,headMetaSocial:!1,headMetaRobots:!1,headMetaHttpEquiv:!1,headMetaAuthorship:!1,headMetaVerification:!1},dataURLOptions:null!==(g=null===(w=this.sessionReplayConfig)||void 0===w||null===(w=w.webRecorderConfiguration)||void 0===w?void 0:w.dataURLOptions)&&void 0!==g?g:{},inlineStylesheet:null===(b=null===(k=this.sessionReplayConfig)||void 0===k||null===(k=k.webRecorderConfiguration)||void 0===k?void 0:k.inlineStylesheet)||void 0===b||b,recordCanvas:null!==(S=null===(_=this.sessionReplayConfig)||void 0===_||null===(_=_.webRecorderConfiguration)||void 0===_?void 0:_.recordCanvas)&&void 0!==S&&S,recordCrossOriginIframes:null!==(C=null===(I=this.sessionReplayConfig)||void 0===I||null===(I=I.webRecorderConfiguration)||void 0===I?void 0:I.recordCrossOriginIframes)&&void 0!==C&&C,recordAfter:V,inlineImages:null!==(x=null===(E=this.sessionReplayConfig)||void 0===E||null===(E=E.webRecorderConfiguration)||void 0===E?void 0:E.inlineImages)&&void 0!==x&&x,collectFonts:null!==(O=null===(A=this.sessionReplayConfig)||void 0===A||null===(A=A.webRecorderConfiguration)||void 0===A?void 0:A.collectFonts)&&void 0!==O&&O,userTriggeredOnInput:null!==(R=null===(M=this.sessionReplayConfig)||void 0===M||null===(M=M.webRecorderConfiguration)||void 0===M?void 0:M.userTriggeredOnInput)&&void 0!==R&&R,sampling:{mousemove:null!==(T=null===(N=this.sessionReplayConfig)||void 0===N||null===(N=N.webRecorderConfiguration)||void 0===N?void 0:N.mousemove)&&void 0!==T&&T,mouseInteraction:null!==(L=null===(D=this.sessionReplayConfig)||void 0===D||null===(D=D.webRecorderConfiguration)||void 0===D?void 0:D.mouseInteraction)&&void 0!==L?L:{MouseUp:!1,MouseDown:!1,Click:!0,ContextMenu:!0,DblClick:!0,Focus:!0,Blur:!0,TouchStart:!1,TouchEnd:!1,MouseOver:!1,MouseOut:!1},scroll:null!==(P=null===(F=this.sessionReplayConfig)||void 0===F||null===(F=F.webRecorderConfiguration)||void 0===F?void 0:F.scroll)&&void 0!==P?P:300,media:null!==(z=null===(U=this.sessionReplayConfig)||void 0===U||null===(U=U.webRecorderConfiguration)||void 0===U?void 0:U.media)&&void 0!==z?z:1e3,input:null!==(j=null===(B=this.sessionReplayConfig)||void 0===B||null===(B=B.webRecorderConfiguration)||void 0===B?void 0:B.input)&&void 0!==j?j:"last"},checkoutEveryNms:null!==(Z=null===(G=this.sessionReplayConfig)||void 0===G||null===(G=G.webRecorderConfiguration)||void 0===G?void 0:G.checkoutEveryNms)&&void 0!==Z?Z:0,emit:function(e){var t;"visible"===document.visibilityState&&(3===e.type&&7===(null===(t=e.data)||void 0===t?void 0:t.source)||e&&"number"==typeof e.timestamp&&(e._tabId=W.recordId,W.worker.postMessage({type:"event",payload:{event:e}})))}}),this.initializeRecordingReadiness(),this.startCommunicationElementWatcher(),e.n=5;break;case 4:throw e.p=4,e.v;case 5:return e.a(2)}},e,this,[[2,4]])})),function(){return t.apply(this,arguments)})},{key:"initializeRecordingReadiness",value:function(){var e=this,t=0,n=function(){if(t++,e.isPageTrulyReady()||t>=20)e.recordingReady=!0;else{var r=e.detectSlowNetwork()?1e3:500;setTimeout(n,r)}};n()}},{key:"isPageTrulyReady",value:function(){return["interactive"===document.readyState||"complete"===document.readyState,document.body&&document.body.children.length>0,!this.hasCriticalPendingRequests()].filter(Boolean).length>=2}},{key:"hasCriticalPendingRequests",value:function(){if("performance"in window&&"getEntriesByType"in performance){var e=performance.getEntriesByType("navigation")[0];if(e)return 0===e.domContentLoadedEventEnd}return!1}},{key:"waitForPageStability",value:(e=r(v().m(function e(){var t=this;return v().w(function(e){for(;;)if(0===e.n)return e.a(2,new Promise(function(e){if("complete"!==document.readyState||t.hasCriticalPendingRequests()){var n=function(){"complete"!==document.readyState||t.hasCriticalPendingRequests()?setTimeout(n,100):e()};n();var r=t.detectSlowNetwork()?1e4:6e3;setTimeout(function(){e()},r)}else e()}))},e)})),function(){return e.apply(this,arguments)})},{key:"startCommunicationElementWatcher",value:function(){var e=this,t=!1,n=null,r=function(){if(n&&(clearTimeout(n),n=null),e.recording&&e.recordingReady&&"hidden"!==document.visibilityState){var t=e.detectSlowNetwork()?1500:500;n=setTimeout(function(){e.recording&&e.recordingReady&&"function"==typeof Vu.takeFullSnapshot&&(e.takeFullSnapshot(!0),n=null)},t)}},i=this.detectSlowNetwork()?2e3:500;this.detectionInterval=setInterval(function(){e.recording?function(){var n,i;if(e.recording&&e.recordingReady&&!t){var o=null===(n=e.sessionReplayConfig)||void 0===n||null===(n=n.webRecorderConfiguration)||void 0===n?void 0:n.chatContainer,a=null===(i=e.sessionReplayConfig)||void 0===i||null===(i=i.webRecorderConfiguration)||void 0===i?void 0:i.chatRoot;if(o&&a){var s=document.querySelector(o);if(s&&s.shadowRoot){var l=s.shadowRoot.querySelector(a);l&&function(e){var t=e.isConnected,n=!!e.shadowRoot,r=e.textContent&&e.textContent.trim().length>0,i=n&&e.shadowRoot.children.length>0;return t&&(r||i||n)}(l)&&(t=!0,r(),e.detectionInterval&&(clearInterval(e.detectionInterval),e.detectionInterval=null))}}}}():e.detectionInterval&&(clearInterval(e.detectionInterval),e.detectionInterval=null)},i)}},{key:"stopRecording",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.recording){if(this.recording=!1,this.recordingReady=!1,this.stopFn&&(this.stopFn(),this.stopFn=null),this.detectionInterval&&(clearInterval(this.detectionInterval),this.detectionInterval=null),this.userInteractionHandlers&&(this.userInteractionHandlers.forEach(function(e){var t=e.event,n=e.handler;document.removeEventListener(t,n)}),this.userInteractionHandlers=null),this.interactionTimeout&&(clearTimeout(this.interactionTimeout),this.interactionTimeout=null),document.removeEventListener("visibilitychange",this._handleVisibilityChange),!this._broadcastChannel&&"undefined"!=typeof window&&this._storageListener&&window.removeEventListener("storage",this._storageListener),this._broadcastChannel){try{this._broadcastChannel.onmessage=null,this._broadcastChannel.close()}catch(e){}this._broadcastChannel=null}this._messageHandlers.snapShotHandler&&(this.worker.removeEventListener("message",this._messageHandlers.snapShotHandler),delete this._messageHandlers.snapShotHandler),t&&(this.worker.postMessage({type:"delete"}),this.triggerSessionRecordingStatusEvent(!1));this._messageHandlers.deletionHandler=function(t){var n;"deletion-complete"===(null===(n=t.data)||void 0===n?void 0:n.type)&&function(){try{e._messageHandlers.deletionHandler&&(e.worker.removeEventListener("message",e._messageHandlers.deletionHandler),delete e._messageHandlers.deletionHandler),e.worker.terminate(),URL.revokeObjectURL(e._workerUrl)}catch(e){}}()},this.worker.addEventListener("message",this._messageHandlers.deletionHandler)}}},{key:"_handleVisibilityChange",value:function(){if("visible"===document.visibilityState&&this.recording&&this.recordingReady){var e,t,n=null===(e=this.sessionReplayConfig)||void 0===e||null===(e=e.webRecorderConfiguration)||void 0===e?void 0:e.chatContainer,r=null===(t=this.sessionReplayConfig)||void 0===t||null===(t=t.webRecorderConfiguration)||void 0===t?void 0:t.chatRoot,i=n?document.querySelector(n):null;if(i&&i.shadowRoot){var o=r?i.shadowRoot.querySelector(r):null;if(o&&o.isConnected)return}this.takeFullSnapshot(!0)}}},{key:"_initBroadcastChannel",value:function(){var e=this;try{"undefined"!=typeof BroadcastChannel&&(this._broadcastChannel=new BroadcastChannel("conviva-session-replay"),this._broadcastChannel.onmessage=function(t){e._handleBroadcastChannelMessage(t)})}catch(e){this._broadcastChannel=null}}},{key:"_handleBroadcastChannelMessage",value:function(e){if(e&&e.data&&"flush-signal"===e.data.type&&this.recording&&this.recordingReady)try{var t=e.data.payload;if((null==t?void 0:t.recordId)===this.recordId||(null==t?void 0:t.ts)<=this._lastFlushSignalTimestamp)return;this._lastFlushSignalTimestamp=(null==t?void 0:t.ts)||0,"visible"===document.visibilityState&&this.takeFullSnapshot(!0)}catch(e){}}},{key:"_broadcastFlushSignal",value:function(){var e={recordId:this.recordId,ts:Date.now()};if(this._broadcastChannel)try{return void this._broadcastChannel.postMessage({type:"flush-signal",payload:e})}catch(e){}try{"undefined"!=typeof window&&window.localStorage&&window.localStorage.setItem(tc,JSON.stringify(e))}catch(e){}}},{key:"_handleStorageEvent",value:function(e){if(e&&e.key===tc&&e.newValue&&this.recording&&this.recordingReady){try{var t=JSON.parse(e.newValue);if((null==t?void 0:t.recordId)===this.recordId||(null==t?void 0:t.ts)<=this._lastFlushSignalTimestamp)return;this._lastFlushSignalTimestamp=(null==t?void 0:t.ts)||0}catch(e){return}"visible"===document.visibilityState&&this.takeFullSnapshot(!0)}}},{key:"detectSlowNetwork",value:function(){if("connection"in navigator){var e=navigator.connection.effectiveType;if("slow-2g"===e||"2g"===e||"3g"===e||"slow-4g"===e)return!0}return!1}},{key:"triggerSessionRecordingStatusEvent",value:function(e){var t,n=new CustomEvent("SessionRecordingStatus",{detail:{isSR:e}});"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){var e;null!==(e=window)&&void 0!==e&&e.dispatchEvent&&window.dispatchEvent(n)}):null!==(t=window)&&void 0!==t&&t.dispatchEvent&&window.dispatchEvent(n)}}]);var e,t}();function cc(e){ac({convivaCustomerKey:e})}var hc={init:cc};e.default=hc,e.init=cc,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=conviva-replay.umd.min.js.map
